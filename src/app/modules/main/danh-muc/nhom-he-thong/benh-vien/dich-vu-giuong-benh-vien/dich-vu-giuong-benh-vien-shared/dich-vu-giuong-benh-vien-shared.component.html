<div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="16px grid" fxLayoutGap.lt-sm="0">
    <div fxFlex="12%" fxFlex.sm="12%">
        <div class="container-custom no-label">
            <label>&nbsp;</label>
            <div fxLayout="row" fxLayoutGap="16px">
                <app-checkbox fxFlex="100%" value="true" id="AnhXa" label="Ánh xạ"
                    [(model)]="dichVuGiuongBenhVien.AnhXa" (modelChange)="XuLyAnhXa($event)"></app-checkbox>
            </div>
        </div>
    </div>
    <div *ngIf="!dichVuGiuongBenhVien.AnhXa" fxFlex="88%"></div>
    <ng-container *ngIf="dichVuGiuongBenhVien.AnhXa">
        <app-combobox id="DichVuGiuong" fxFlex="50%" fxFlex.sm="50%" [(model)]="dichVuGiuongBenhVien.DichVuGiuongId"
            [required]="true" [modelText]="dichVuGiuongBenhVien.DichVuGiuongModelText" label="Dịch Vụ Giường"
            class="item-no-padding" [template]="dichVuGiuongTemplate" [templateHeader]="dichVuGiuongTemplateHeader"
            url="DichVuGiuongBenhVien/GetListDichVuGiuong" (selectionChange)="ChonDichVu($event)"
            [validationerror]="'DichVuGiuongId' | validationerror:validationErrors">
            <ng-template #dichVuGiuongTemplateHeader let-dataItem>
                <table width="100%" class="table-combobox">
                    <tr>
                        <th width="20%">Mã</th>
                        <th>Tên</th>
                    </tr>
                </table>
            </ng-template>
            <ng-template #dichVuGiuongTemplate let-dataItem>
                <table width="100%" class="table-combobox">
                    <tr>
                        <td width="20%">{{dataItem.Ma}}</td>
                        <td>{{dataItem.Ten}}</td>
                    </tr>
                </table>
            </ng-template>
        </app-combobox>
        <div fxFlex="38%"></div>
    </ng-container>

    <fieldset *ngIf="dichVuGiuongBenhVien.AnhXa" fxFlex="99%">
        <legend>Thông tin dịch vụ giường ánh xạ</legend>
        <div fxFlex="100%" class="mt-4 ml-4">
            <ul class="inline">
                <li>Mã dịch vụ:
                    <strong>{{dichVuGiuongBenhVien.DichVuGiuong.MaChung}}</strong>
                </li>
                <li>Tên dịch vụ:
                    <strong>{{dichVuGiuongBenhVien.DichVuGiuong.TenChung}}</strong>
                </li>
                <li>Mã TT37:
                    <strong>{{dichVuGiuongBenhVien.DichVuGiuong.MaTT37}}</strong>
                </li>
                <li>Mô tả:
                    <strong>{{dichVuGiuongBenhVien.DichVuGiuong.MoTa}}</strong>
                </li>
            </ul>
        </div>
    </fieldset>

    <app-textbox id="Ma" fxFlex="25%" fxFlex.sm="25%" label="Mã" [required]="true"
        [(model)]="dichVuGiuongBenhVien.Ma" [maxlength]="50"
        [validationerror]="'Ma' | validationerror:validationErrors">
    </app-textbox>
    <app-textbox id="Ten" fxFlex="25%" fxFlex.sm="25%" label="Tên" [required]="true"
        [(model)]="dichVuGiuongBenhVien.Ten" [maxlength]="250"
        [validationerror]="'Ten' | validationerror:validationErrors">
    </app-textbox>

    <app-dropdownlist id="LoaiGiuong" fxFlex="10%" fxFlex.sm="50%" [(model)]="dichVuGiuongBenhVien.LoaiGiuong"
        [required]="true" [validationerror]="'LoaiGiuong' | validationerror:validationErrors"
        [modelText]="dichVuGiuongBenhVien.LoaiGiuongText" label="Loại Giường" url="DichVuGiuongBenhVien/GetLoaiGiuong">
    </app-dropdownlist>

    <div fxFlex="10%" fxFlex.sm="10%">
        <div class="container-custom no-label">
            <label>&nbsp;</label>
            <div fxLayout="row" fxLayoutGap="16px">
                <app-checkbox fxFlex="100%" value="true" id="HieuLuc" label="Hiệu lực"
                    [(model)]="dichVuGiuongBenhVien.HieuLuc"></app-checkbox>
            </div>
        </div>
    </div>

    <app-textbox id="MoTa" fxFlex="30%" fxFlex.sm="50%" maxlength="4000" [(model)]="dichVuGiuongBenhVien.MoTa"
        label="Mô Tả" [validationerror]="'MoTa' | validationerror:validationErrors">
    </app-textbox>

    <!-- <app-multiselect fxFlex="50%" [(model)]="dichVuGiuongBenhVien.KhoaPhongIds" [modelText]="" label="Khoa"
        class="item-no-padding" [template]="khoaPhongTemplate" (modelChange)="changeKhoa($event)"
        [templateHeader]="khoaPhongTemplateHeader" url="DichVuGiuongBenhVien/GetKhoaKhamTheoDichVuGiuongBenhVien"
        [validationerror]="'KhoaPhongIds' | validationerror:validationErrors" required="true">
        <ng-template #khoaPhongTemplateHeader let-dataItem>

            <table width="100%" class="table-combobox">
                <tr>
                    <th width="20%">Mã</th>
                    <th>Tên</th>
                </tr>
            </table>
        </ng-template>
        <ng-template #khoaPhongTemplate let-dataItem>
            <table width="100%" class="table-combobox">
                <tr>
                    <td width="20%">{{dataItem.Ma}}</td>
                    <td>{{dataItem.Ten}}</td>
                </tr>
            </table>
        </ng-template>
    </app-multiselect> -->

    <!-- <app-multiselect fxFlex="50%" [(model)]="dichVuGiuongBenhVien.PhongBenhVienIds" idWhere="{{id}}"
        [modelText]="" label="Phòng bệnh viện" class="item-no-padding" [template]="phongBenhVienTemplate"
        [templateHeader]="phongBenhVienTemplateHeader" url="DichVuGiuongBenhVien/GetPhongKhamTheoDichVuGiuongBenhVien"
        [validationerror]="'KhoaIds' | validationerror:validationErrors">
        <ng-template #phongBenhVienTemplateHeader let-dataItem>

            <table width="100%" class="table-combobox">
                <tr>
                    <th width="20%">Mã</th>
                    <th>Tên</th>
                </tr>
            </table>
        </ng-template>
        <ng-template #phongBenhVienTemplate let-dataItem>
            <table width="100%" class="table-combobox">
                <tr>
                    <td width="20%">{{dataItem.Ma}}</td>
                    <td>{{dataItem.Ten}}</td>
                </tr>
            </table>
        </ng-template>
    </app-multiselect>   -->


    <!-- <app-multiselect #noiThucHien fxFlex="50%" [(model)]="dichVuGiuongBenhVien.NoiThucHienIds" idWhere="{{id}}"
        [modelText]="" label="Nơi thực hiện" class="item-no-padding" [template]="phongBenhVienTemplate"
        [queryInfo]="queryNoiThucHien" url="DichVuGiuongBenhVien/GetPhongKhamTheoDichVuGiuongBenhVien"
        [autoClose]="false" [validationerror]="'NoiThucHienIds' | validationerror:validationErrors" required="true"
        [popupSettings]="null">
        <ng-template #phongBenhVienTemplate let-dataItem>
            <div>
                <input type="checkbox" class="k-checkbox" [checked]="isItemSelected(dataItem)">
                <label [ngClass]="dataItem.KhoaId !== null ? 'item-child' : 'item-parent'"
                    class="k-checkbox-label">{{dataItem.DisplayName}}</label>
            </div>
        </ng-template>
    </app-multiselect> -->
    <!-- [style.marginLeft.px]="dataItem.KhoaId !== null ? 30 : 0" -->


    <ng-container *ngIf="dichVuGiuongBenhVien.AnhXa">
        <h4 class="sub-title" fxFlex="100%">Giá bảo hiểm</h4>
        <div fxFlex="100%" fxFlex.sm="100%"
            *ngFor="let item of dichVuGiuongBenhVien.DichVuGiuongBenhVienGiaBaoHiems;let i = index">
            <div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="16px grid" fxLayoutGap.lt-sm="0">
                <app-textboxnumeric [disabled]="!isDisplay" id="GiaBH{{i}}" fxFlex="25%" fxFlex.sm="25%"
                    [required]="true" min="0" max="999999999" [(model)]="item.Gia" label="Giá" 
                    [validationerror]="'DichVuGiuongBenhVienGiaBaoHiems['+i+'].Gia' | validationerror:validationErrors">
                </app-textboxnumeric>

                <app-textboxnumeric [disabled]="!isDisplay" id="TiLeBaoHiemThanhToanBH{{i}}" fxFlex="25%"
                    fxFlex.sm="25%" [required]="true" min="1" max="9999999" [spinners]="false"
                    [(model)]="item.TiLeBaoHiemThanhToan" label="Tỉ lệ thanh toán" max="100" min="0"
                    [validationerror]="'DichVuGiuongBenhVienGiaBaoHiems['+i+'].TiLeBaoHiemThanhToan' | validationerror:validationErrors">
                </app-textboxnumeric>
                <app-datepicker [disabled]="!isDisplay" id="TuNgayBH{{i}}" fxFlex="23%" fxFlex.sm="23%"
                    label="Từ ngày" [required]="true" [(model)]="item.TuNgay" [required]="true"
                    [validationerror]="'DichVuGiuongBenhVienGiaBaoHiems['+i+'].TuNgay' | validationerror:validationErrors">
                </app-datepicker>

                <app-datepicker *ngIf="item.DenNgay!=null" [disabled]="true" id="DenNgayBH{{i}}" fxFlex="23%"
                    fxFlex.sm="23%" label="Đến Ngày" [(model)]="item.DenNgay">
                </app-datepicker>

                <div fxFlex="4%" fxFlex.sm="4%">
                    <button mat-icon-button class="mt-3" (click)="XoaBaoHiem(i)">
                        <mat-icon [icIcon]="icRemove" color="warn"></mat-icon>
                    </button>
                </div>

            </div>
        </div>
        <div fxFlex="100%" fxFlex.sm="100%">
            <button mat-mini-fab color="primary" (click)="ThemBaoHiem()">
                <mat-icon [icIcon]="icAdd"></mat-icon>
            </button>
        </div>
    </ng-container>
    <h4 class="sub-title" fxFlex="100%">Giá bệnh viện</h4>
    <div fxFlex="100%" fxFlex.sm="100%"
        *ngFor="let item of dichVuGiuongBenhVien.DichVuGiuongBenhVienGiaBenhViens;let i = index">
        <div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="16px grid" fxLayoutGap.lt-sm="0">
            <app-dropdownlist label="Loại Giá" fxFlex="25%" fxFlex.sm="25%" id="LoaiGiaBV{{i}}" required="true"
                [(model)]="item.NhomGiaDichVuGiuongBenhVienId" [modelText]="item.NhomGiaDichVuGiuongBenhVienText"
                url="DichVuGiuongBenhVien/GetNhomDichVu"
                [validationerror]="'DichVuGiuongBenhVienGiaBenhViens['+i+'].NhomGiaDichVuGiuongBenhVienId' | validationerror:validationErrors">
            </app-dropdownlist>

            <app-textboxnumeric [disabled]="!isDisplay" id="GiaBV{{i}}" fxFlex="25%" fxFlex.sm="25%" [required]="true"
                min="0" max="999999999" [(model)]="item.Gia" label="Giá"           
                [validationerror]="'DichVuGiuongBenhVienGiaBenhViens['+i+'].Gia' | validationerror:validationErrors">
            </app-textboxnumeric>


            <app-datepicker [disabled]="!isDisplay" id="TuNgayBV{{i}}" fxFlex="25%" fxFlex.sm="25%" label="Từ ngày"
                [required]="true" [(model)]="item.TuNgay" [required]="true"
                [validationerror]="'DichVuGiuongBenhVienGiaBenhViens['+i+'].TuNgay' | validationerror:validationErrors">
            </app-datepicker>

            <app-datepicker *ngIf="item.DenNgay!=null" [disabled]="true" id="DenNgayBV{{i}}" fxFlex="22%"
                fxFlex.sm="22%" label="Đến Ngày" [(model)]="item.DenNgay">
            </app-datepicker>

            <!-- <div fxFlex="9%" fxFlex.sm="9%">
                <div class="container-custom no-label">
                    <label>&nbsp;</label>
                    <div fxLayout="row" fxLayoutGap="16px">
                        <app-checkbox fxFlex="100%" value="true" id="baoPhong{{i}}" label="Bao Phòng"
                            [(model)]="item.BaoPhong"></app-checkbox>
                    </div>
                </div>
            </div> -->

            <div fxFlex="3%" fxFlex.sm="3%">
                <button mat-icon-button class="mt-3" (click)="XoaBenhVien(i)">
                    <mat-icon [icIcon]="icRemove" color="warn"></mat-icon>
                </button>
            </div>

        </div>
    </div>
    <div fxFlex="100%" fxFlex.sm="100%">
        <button mat-mini-fab color="primary" (click)="ThemBenhVien()">
            <mat-icon [icIcon]="icAdd"></mat-icon>
        </button>
    </div>
</div>
