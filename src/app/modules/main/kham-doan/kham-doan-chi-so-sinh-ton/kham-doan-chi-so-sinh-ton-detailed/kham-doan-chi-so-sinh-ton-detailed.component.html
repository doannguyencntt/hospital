<div mat-dialog-title fxLayout="row" fxLayoutAlign="space-between center">
    <div style="text-transform: uppercase;">Đo chỉ số sinh tồn khám sức khỏe đoàn</div>
</div>

<mat-dialog-content>
    <div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="16px grid" fxLayoutGap.lt-sm="0">
        <!-- <h3 fxFlex="100%" class="sub-title">Thông tin hành chính</h3>
        <app-textbox id="maNhanVien" fxFlex="20%" fxFlex.sm="20%" label="Mã NV" [(model)]="khamDoanSinhTon.MaNhanVien"
            [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-textbox id="hoTen" fxFlex="20%" fxFlex.sm="20%" label="Họ tên" [(model)]="khamDoanSinhTon.HoTen"
            [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-textbox id="hoTenKhac" fxFlex="20%" fxFlex.sm="20%" label="Họ tên khác"
            [(model)]="khamDoanSinhTon.HoTenKhac" [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-datepicker id="NgaySinh" fxFlex="20%" fxFlex.sm="20%" label="Ngày sinh" [disabled]="true"
            [(model)]="khamDoanSinhTon.NgayThangNamSinh">
        </app-datepicker>
        <app-textboxnumeric id="tuoi" fxFlex="20%" fxFlex.sm="20%" [max]="999" label="Tuổi" [decimals]="0"
            [(model)]="khamDoanSinhTon.Tuoi" [disabled]="true">
        </app-textboxnumeric>

        <app-textbox id="soDienThoai" fxFlex="20%" fxFlex.sm="20%" label="Số điện thoại"
            [(model)]="khamDoanSinhTon.SoDienThoaiDisplay" [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-radio fxFlex="20%" fxFlex.sm="20%" id="gioiTinh" [items]="[{Value:1,Text:'Nam'},{Value:2,Text:'Nữ'}]"
            [(model)]="khamDoanSinhTon.GioiTinh" label="Giới Tính" [disabled]="true">
        </app-radio>
        <app-combobox id="ngheNghiep" fxFlex="20%" fxFlex.sm="20%" label="Nghề nghiệp"
            [(model)]="khamDoanSinhTon.NgheNghiepId" [modelText]="khamDoanSinhTon.NgheNghiep"
            url="KhamDoan/GetListNgheNghiep" [disabled]="true">
        </app-combobox>
        <app-combobox id="quocTinh" fxFlex="20%" fxFlex.sm="20%" label="Quốc tịch"
            [(model)]="khamDoanSinhTon.QuocTichId" [modelText]="khamDoanSinhTon.QuocTich" url="KhamDoan/GetListQuocTinh"
            [disabled]="true">
        </app-combobox>
        <app-combobox id="danToc" fxFlex="20%" fxFlex.sm="20%" label="Dân tộc" [(model)]="khamDoanSinhTon.DanTocId"
            [modelText]="khamDoanSinhTon.DanToc" url="KhamDoan/GetListDanToc" [disabled]="true">
        </app-combobox>

        <app-combobox id="tinhThanh" fxFlex="20%" fxFlex.sm="20%" label="Tỉnh/TP"
            [(model)]="khamDoanSinhTon.TinhThanhId" [modelText]="khamDoanSinhTon.TinhThanh"
            url="KhamDoan/GetListTinhThanh" [disabled]="true">
        </app-combobox>
        <app-combobox id="quanHuyen" fxFlex="20%" fxFlex.sm="20%" label="Quận/Huyện"
            [(model)]="khamDoanSinhTon.QuanHuyenId" [modelText]="khamDoanSinhTon.QuanHuyen"
            url="KhamDoan/GetListQuanHuyen" [disabled]="true">
        </app-combobox>
        <app-combobox id="phuongXa" fxFlex="20%" fxFlex.sm="20%" label="Phường/Xã"
            [(model)]="khamDoanSinhTon.PhuongXaId" [modelText]="khamDoanSinhTon.PhuongXa" url="KhamDoan/GetListPhuongXa"
            [disabled]="true">
        </app-combobox>
        <app-textbox id="soNha" fxFlex="20%" fxFlex.sm="20%" label="Số nhà" [(model)]="khamDoanSinhTon.DiaChi"
            [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-textbox id="soCMTHC" fxFlex="20%" fxFlex.sm="20%" label="số CMT/HC"
            [(model)]="khamDoanSinhTon.SoChungMinhThu" [maxlength]="50" [disabled]="true">
        </app-textbox>

        <app-textbox id="email" fxFlex="20%" fxFlex.sm="20%" label="Email" [(model)]="khamDoanSinhTon.Email"
            [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-textbox id="tenDonViBP" fxFlex="20%" fxFlex.sm="20%" label="Tên đơn vị/BP"
            [(model)]="khamDoanSinhTon.TenDonViHoacBoPhan" [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-combobox id="nhomMau" fxFlex="20%" fxFlex.sm="20%" label="Nhóm máu" [(model)]="khamDoanSinhTon.NhomMau"
            [modelText]="khamDoanSinhTon.NhomMauDisplay" url="KhamDoan/GetListNhomMau" [disabled]="true">
        </app-combobox>
        <app-combobox id="rh" fxFlex="20%" fxFlex.sm="20%" label="RH" [(model)]="khamDoanSinhTon.YeuToRh"
            [modelText]="khamDoanSinhTon.YeuToRhDisplay" url="KhamDoan/GetListRH" [disabled]="true">
        </app-combobox>
        <app-combobox id="honNhan" fxFlex="20%" fxFlex.sm="20%" label="Hôn nhân"
            [modelText]="khamDoanSinhTon.DaLapGiaDinhDisplay" url="KhamDoan/GetListHonNhan" [disabled]="true">
        </app-combobox>

        <div fxFlex="20%" fxFlex.sm="20%">
            <div class="container-custom no-label">
                <label>&nbsp;</label>
                <div fxLayout="row" fxLayoutGap="16px">
                    <app-checkbox [(model)]="khamDoanSinhTon.CoMangThai" fxFlex="100%" value="true" id="MangThai"
                        label="Mang thai" [disabled]="true"></app-checkbox>
                </div>
            </div>
        </div>
        <app-combobox id="nhomDTKSK" [modelText]="khamDoanSinhTon.NhomDoiTuongKhamSucKhoe" fxFlex="20%" fxFlex.sm="20%"
            label="Nhóm ĐT KSK" url="KhamDoan/GetListHonNhan" [disabled]="true">
        </app-combobox> -->
        <!-- <app-textbox id="tienSuBenh" [(model)]="khamDoanSinhTon.GhiChuTienSuBenh" fxFlex="20%" fxFlex.sm="20%"
            label="TS Bệnh" [maxlength]="50" [disabled]="true">
        </app-textbox>
        <app-textbox id="tienSuDiUng" [(model)]="khamDoanSinhTon.GhiChuDiUngThuoc" fxFlex="40%" fxFlex.sm="40%"
            label="TS Dị ứng" [maxlength]="50" [disabled]="true">
        </app-textbox> -->
        <app-kham-doan-thong-tin-hanh-chinh fxFlex="100%" [yeuCauTiepNhanId]="data.YeuCauTiepNhanId">
        </app-kham-doan-thong-tin-hanh-chinh>

        <h3 fxFlex="100%" class="sub-title mr-4">CHỈ SỐ SINH TỒN
            <button class="po-h" color="primary" (click)="themChiSoSinhTon()">
                <mat-icon [icIcon]="icAddCircle"></mat-icon>
            </button>
        </h3>
        <ng-container *ngIf="dataSourceSinhHieuDisplay.data.length == 0">
            <p>Không có chỉ số sinh tồn</p>
        </ng-container>
        <app-grid #gridSinhHieu fxFlex="100%" *ngIf="dataSourceSinhHieuDisplay.data.length > 0" masterName="SinhHieu"
            [gridColumns]="gridSinhHieuColumns" [documentType]="documentType" [useAddDeault]="false"
            class="k-grid-border" [useHeaderDefault]="false" [useActionDefault]="false" [checkboxAble]="false"
            [lazyLoadPage]="true" [autoHeight]="true" [gridDataSource]="dataSourceSinhHieuDisplay" [pageable]="false">
        </app-grid>
        <ng-template #nhipTimTemplate let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [max]="9999" [spinners]="false"
                [(model)]="dataItem.NhipTim" class="no-label" (modelChange)="onChangeNhipTim(dataItem, $event)">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.NhipTim}}</p>
        </ng-template>
        <ng-template #huyetApTemplate let-dataItem>
            <table width="100%" *ngIf="dataItem.Id == 0 || dataItem.IsUpdate">
                <tr>
                    <td style="width:calc(50% - 3px);padding:0">
                        <app-textboxnumeric [spinners]="false" [(model)]="dataItem.HuyetApTamThu" class="no-label"
                            [max]="9999" (modelChange)="onChangeHuyetApTamThu($event, dataItem)">
                        </app-textboxnumeric>
                    </td>
                    <td style="width:6px;padding:0">/</td>
                    <td style="width:calc(50% - 3px);padding:0">
                        <app-textboxnumeric [spinners]="false" [(model)]="dataItem.HuyetApTamTruong" class="no-label"
                            [max]="9999" (modelChange)="onChangeHuyetApTamTruong($event, dataItem)">
                        </app-textboxnumeric>
                    </td>
                </tr>
            </table>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.HuyetAp}}</p>
        </ng-template>
        <ng-template #thanNhietTemplate let-dataItem>
            <app-textboxnumeric [format]="format" [max]="9999" [spinners]="false"
                *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [decimals]="1" [(model)]="dataItem.ThanNhiet"
                class="no-label">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.ThanNhiet | number}}</p>
        </ng-template>
        <ng-template #nhipThoTemplate let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [max]="9999" [spinners]="false"
                [(model)]="dataItem.NhipTho" class="no-label" (modelChange)="onChangeNhipTho($event, dataItem)">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.NhipTho}}</p>
        </ng-template>
        <ng-template #canNangTemplate let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [format]="format" [spinners]="false"
                [(model)]="dataItem.CanNang" class="no-label" [max]="9999" [decimals]="1"
                (modelChange)="onChangeCanNang(dataItem)">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.CanNang | number}}</p>
        </ng-template>
        <ng-template #chieuCaoTemplate let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [format]="format" [spinners]="false"
                [(model)]="dataItem.ChieuCao" [decimals]="1" class="no-label" [max]="9999"
                (modelChange)="onChangeChieuCao(dataItem)">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.ChieuCao | number}}</p>
        </ng-template>
        <ng-template #BMITemplate let-dataItem>
            <p class="ml-1">{{dataItem.BMI | number: '1.2-2'}}</p>
        </ng-template>
        <ng-template #glassgowTemplate let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [max]="9999" [format]="format"
                [spinners]="false" [(model)]="dataItem.Glassgow" [decimals]="1" class="no-label">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.Glassgow | number}}</p>
        </ng-template>
        <ng-template #spO2Template let-dataItem>
            <app-textboxnumeric *ngIf="dataItem.Id == 0 || dataItem.IsUpdate" [max]="9999" [format]="format"
                [spinners]="false" [(model)]="dataItem.SpO2" [decimals]="1" class="no-label">
            </app-textboxnumeric>
            <p class="ml-1" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate">{{dataItem.SpO2 | number}}</p>
        </ng-template>
        <ng-template #actionSinhHieuTemplate let-dataItem>
            <div class="text-center" kendoTooltip>
                <!-- <button *ngIf="dataItem.Id == 0" color="primary" mat-icon-button kendoTooltip title="Lưu" type="button"
                  (click)="luuChiSoSinhHieu(dataItem)">
                  <mat-icon [icIcon]="icSave"></mat-icon>
              </button> -->
                <button color="primary" *ngIf="dataItem.Id != 0 && !dataItem.IsUpdate" mat-icon-button kendoTooltip
                    title="Sửa" type="button" (click)="suaChiSoSinhHieu(dataItem)">
                    <mat-icon [icIcon]="icEdit"></mat-icon>
                </button>
                <button color="primary" mat-icon-button kendoTooltip title="Xóa" type="button"
                    (click)="xoaChiSoSinhHieu(dataItem)">
                    <mat-icon [icIcon]="icDelete"></mat-icon>
                </button>
            </div>
        </ng-template>
    </div>
</mat-dialog-content>

<mat-dialog-actions class="mt-4 pb-5">
    <button style="margin-left: auto;" type="button" mat-stroked-button color="primary" [mat-dialog-close]="null">Quay
        Lại</button>
    <button *ngIf="dataSourceSinhHieuDisplay.data.length > 0" mat-raised-button mat-button color="primary" (click)="submit()">Lưu</button>
</mat-dialog-actions>
