<div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="16px grid" fxLayoutGap.lt-sm="0">
    <h3 fxFlex="100%" class="sub-title mr-4">CHỈ SỐ SINH TỒN
        <button [disabled]="!canChange || IsDaTuongTrinh || thongTinBenhNhan.IsTuongTrinhLai" class="po-h" color="primary" (click)="themChiSoSinhTon()">
            <mat-icon [icIcon]="icAddCircle"></mat-icon>
        </button>
    </h3>
    <ng-container *ngIf="dataSourceSinhHieu.data.length == 0">
        <p>Không có chỉ số sinh tồn</p>
    </ng-container>
    <app-grid fxFlex="100%" *ngIf="dataSourceSinhHieu.data.length > 0" masterName="SinhHieu" [gridColumns]="gridSinhHieuColumns" [documentType]="documentType" [useAddDeault]="false" class="k-grid-border" [useHeaderDefault]="false" [useActionDefault]="false"
        [checkboxAble]="false" [maxHeight]="200" [lazyLoadPage]="true" [gridDataSource]="dataSourceSinhHieu" [pageable]="false">
    </app-grid>
    <ng-template #nhipTimTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [max]="9999" [spinners]="false" [(model)]="dataItem.NhipTim" class="no-label" (modelChange)="onChangeNhipTim(dataItem, $event)">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.NhipTim}}</p>
    </ng-template>
    <ng-template #huyetApTemplate let-dataItem>
        <table *ngIf="dataItem.AllowModify" width="100%">
            <tr>
                <td style="width:calc(50% - 3px);padding:0">
                    <app-textboxnumeric id="tam-thu-text" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [spinners]="false" [(model)]="dataItem.HuyetApTamThu" class="no-label" [max]="9999" (modelChange)="onChangeHuyetApTamThu($event, dataItem)">
                    </app-textboxnumeric>
                </td>
                <td style="width:6px;padding:0">/</td>
                <td style="width:calc(50% - 3px);padding:0">
                    <app-textboxnumeric id="tam-truong-text" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [spinners]="false" [(model)]="dataItem.HuyetApTamTruong" class="no-label" [max]="9999" (modelChange)="onChangeHuyetApTamTruong($event, dataItem)">
                    </app-textboxnumeric>
                </td>
            </tr>
        </table>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.HuyetAp}}</p>
    </ng-template>
    <ng-template #thanNhietTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [format]="format" [max]="9999" [spinners]="false" [decimals]="1" [(model)]="dataItem.ThanNhiet" class="no-label">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.ThanNhiet | number}}</p>
    </ng-template>
    <ng-template #nhipThoTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [max]="9999" [spinners]="false" [(model)]="dataItem.NhipTho" class="no-label" (modelChange)="onChangeNhipTho($event, dataItem)">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.NhipTho}}</p>
    </ng-template>
    <ng-template #canNangTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [format]="format" [spinners]="false" [(model)]="dataItem.CanNang" class="no-label" [max]="9999" [decimals]="1" (modelChange)="onChangeCanNang(dataItem)">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.CanNang | number}}</p>
    </ng-template>
    <ng-template #chieuCaoTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [format]="format" [spinners]="false" [(model)]="dataItem.ChieuCao" [decimals]="1" class="no-label" [max]="9999" (modelChange)="onChangeChieuCao(dataItem)">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.ChieuCao | number}}</p>
    </ng-template>
    <ng-template #BMITemplate let-dataItem>
        <p class="ml-1">{{dataItem.Bmi | number: '1.2-2'}}</p>
    </ng-template>
    <ng-template #glassgowTemplate let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [max]="9999" [format]="format" [spinners]="false" [(model)]="dataItem.Glassgow" [decimals]="1" class="no-label">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.Glassgow | number}}</p>
    </ng-template>
    <ng-template #sp02Template let-dataItem>
        <app-textboxnumeric *ngIf="dataItem.AllowModify" (modelChange)="OnChange()" [disabled]="IsDaTuongTrinh" [max]="9999" [format]="format" [spinners]="false" [(model)]="dataItem.SpO2" [decimals]="1" class="no-label">
        </app-textboxnumeric>
        <p *ngIf="!dataItem.AllowModify">{{dataItem.SpO2 | number}}</p>
    </ng-template>
    <ng-template #actionSinhHieuTemplate let-dataItem>
        <div class="text-center" kendoTooltip>
            <button color="primary" *ngIf="!dataItem.AllowModify" [disabled]="IsDaTuongTrinh" mat-icon-button kendoTooltip title="Sửa" type="button" (click)="SuaChiSoSinhHieu(dataItem)">
                <mat-icon [icIcon]="icEdit"></mat-icon>
            </button>
            <button color="primary" [disabled]="IsDaTuongTrinh" mat-icon-button kendoTooltip title="Xóa" type="button" (click)="XoaChiSoSinhHieu(dataItem)">
                <mat-icon [icIcon]="icDelete"></mat-icon>
            </button>
        </div>
    </ng-template>
</div>