{"version":3,"sources":["./node_modules/@iconify/icons-ic/delete.js","./node_modules/@iconify/icons-ic/info.js","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-cho-tung-loai-thuoc-popup/ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component.html","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-them-popup/ap-dung-miem-giam-them-popup.component.html","./src/app/modules/main/quay-thuoc/in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component.html","./src/app/modules/main/quay-thuoc/in-don-thuoc-pop-up/in-don-thuoc-pop-up.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-thanh-toan/quay-thuoc-cho-thanh-toan.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-xuat-thuoc/quay-thuoc-cho-xuat-thuoc.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-hinh-thuc-thanh-toan/quay-thuoc-hinh-thuc-thanh-toan.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-thanh-toan/quay-thuoc-khach-vang-lai-cho-thanh-toan.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai/quay-thuoc-khach-vang-lai.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-list/quay-thuoc-list.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-mua-thuoc/quay-thuoc-mua-thuoc.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-bao-hiem-tu-nhan/quay-thuoc-thong-tin-bao-hiem-tu-nhan.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-hanh-chinh/quay-thuoc-thong-tin-hanh-chinh.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan-pop-up/quay-thuoc-tim-benh-nhan-pop-up.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan/quay-thuoc-tim-benh-nhan.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-toa-thuoc-cu/quay-thuoc-toa-thuoc-cu.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component.html","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-pop-up/quay-thuoc-xac-nhan-pop-up.component.html","./src/app/modules/main/quay-thuoc/thong-tin-phieu-da-thu/thong-tin-phieu-da-thu.component.html","./src/app/modules/main/quay-thuoc/thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component.html","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc.component.html","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu/xac-nhan-phieu-huy-thu.component.html","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-cho-tung-loai-thuoc-popup/ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component.scss","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-cho-tung-loai-thuoc-popup/ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component.ts","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-them-popup/ap-dung-miem-giam-them-popup.component.scss","./src/app/modules/main/quay-thuoc/ap-dung-miem-giam-them-popup/ap-dung-miem-giam-them-popup.component.ts","./src/app/modules/main/quay-thuoc/in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component.scss","./src/app/modules/main/quay-thuoc/in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component.ts","./src/app/modules/main/quay-thuoc/in-don-thuoc-pop-up/in-don-thuoc-pop-up.component.scss","./src/app/modules/main/quay-thuoc/in-don-thuoc-pop-up/in-don-thuoc-pop-up.component.ts","./src/app/modules/main/quay-thuoc/lich-su-quay-thuoc/lich-su-quay-thuoc.model.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-thanh-toan/quay-thuoc-cho-thanh-toan.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-thanh-toan/quay-thuoc-cho-thanh-toan.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-xuat-thuoc/quay-thuoc-cho-xuat-thuoc.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-cho-xuat-thuoc/quay-thuoc-cho-xuat-thuoc.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-hinh-thuc-thanh-toan/quay-thuoc-hinh-thuc-thanh-toan.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-hinh-thuc-thanh-toan/quay-thuoc-hinh-thuc-thanh-toan.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-thanh-toan/quay-thuoc-khach-vang-lai-cho-thanh-toan.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-thanh-toan/quay-thuoc-khach-vang-lai-cho-thanh-toan.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai/quay-thuoc-khach-vang-lai.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-khach-vang-lai/quay-thuoc-khach-vang-lai.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-list/quay-thuoc-list.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-list/quay-thuoc-list.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-mua-thuoc/quay-thuoc-mua-thuoc.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-mua-thuoc/quay-thuoc-mua-thuoc.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-routing.module.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-bao-hiem-tu-nhan/quay-thuoc-thong-tin-bao-hiem-tu-nhan.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-bao-hiem-tu-nhan/quay-thuoc-thong-tin-bao-hiem-tu-nhan.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-hanh-chinh/quay-thuoc-thong-tin-hanh-chinh.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-thong-tin-hanh-chinh/quay-thuoc-thong-tin-hanh-chinh.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan-pop-up/quay-thuoc-tim-benh-nhan-pop-up.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan-pop-up/quay-thuoc-tim-benh-nhan-pop-up.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan/quay-thuoc-tim-benh-nhan.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-tim-benh-nhan/quay-thuoc-tim-benh-nhan.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-toa-thuoc-cu/quay-thuoc-toa-thuoc-cu.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-toa-thuoc-cu/quay-thuoc-toa-thuoc-cu.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-pop-up/quay-thuoc-xac-nhan-pop-up.component.scss","./src/app/modules/main/quay-thuoc/quay-thuoc-xac-nhan-pop-up/quay-thuoc-xac-nhan-pop-up.component.ts","./src/app/modules/main/quay-thuoc/quay-thuoc.module.ts","./src/app/modules/main/quay-thuoc/quay-thuoc.service.ts","./src/app/modules/main/quay-thuoc/thong-tin-phieu-da-thu/thong-tin-phieu-da-thu.component.scss","./src/app/modules/main/quay-thuoc/thong-tin-phieu-da-thu/thong-tin-phieu-da-thu.component.ts","./src/app/modules/main/quay-thuoc/thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component.scss","./src/app/modules/main/quay-thuoc/thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component.ts","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc.component.scss","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc.component.ts","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu/xac-nhan-phieu-huy-thu.component.scss","./src/app/modules/main/quay-thuoc/xac-nhan-phieu-huy-thu/xac-nhan-phieu-huy-thu.component.ts"],"names":[],"mappings":"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","file":"default~kham-benh-lich-su-kham-benh-lich-su-kham-benh-module~quay-thuoc-danh-sach-cap-thuoc-bhyt-cap~f2f72aff-es2015.js","sourcesContent":["var data = {\n\t\"body\": \"<path d=\\\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\\\" fill=\\\"currentColor\\\"/>\",\n\t\"width\": 24,\n\t\"height\": 24\n};\nexports.__esModule = true;\nexports.default = data;\n","var data = {\n\t\"body\": \"<path d=\\\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\\\" fill=\\\"currentColor\\\"/>\",\n\t\"width\": 24,\n\t\"height\": 24\n};\nexports.__esModule = true;\nexports.default = data;\n","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div style=\\\"font: 500 18px/26px var(--font)\\\">\\n        Miễn giảm dịch vụ: <strong style=\\\"color: green;\\\">{{tenDichVu}}</strong>\\n    </div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n<mat-dialog-content>\\n    <div width=\\\"100%\\\" fxLayout=\\\"row\\\">\\n        <table class=\\\"table table-border\\\" width=\\\"100%\\\">\\n            <tr>\\n                <td colspan=\\\"2\\\" align=\\\"right\\\">Số tiền trước miễn giảm :</td>\\n                <td><strong style=\\\"color: blue;\\\">{{tongTienTungDichVu | number:'0.2-2':'vi-VN'}}</strong></td>\\n            </tr>\\n            <ng-container *ngFor=\\\"let item of danhSachChiPhi.DanhSachMienGiamVos; let i = index\\\">\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 1\\\">\\n                    <td colspan=\\\"3\\\" class=\\\"no-border-bottom pb-0\\\">Đối tượng: <strong>{{item.DoiTuongUuDai}}</strong>\\n                    </td>\\n                </tr>\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 1\\\">\\n                    <td width=\\\"140px\\\" style=\\\"width: 31%;\\\">\\n                        <app-radio class=\\\"no-format-css p-0\\\" [disabled]=\\\"true\\\" [model]=\\\"item.LoaiChietKhau\\\"\\n                            [items]=\\\"[{Value:2,Text:'Tiền'},{Value:1,Text:'%'}]\\\"></app-radio>\\n                    </td>\\n                    <td>\\n                        <app-textboxnumeric label=\\\" \\\" class=\\\"no-label p-0\\\" max=\\\"100\\\" min=\\\"0\\\" [disabled]=\\\"true\\\"\\n                            [model]=\\\"item.TiLe\\\">\\n                        </app-textboxnumeric>\\n                    </td>\\n                    <td>= <strong>{{ item.TongTienMiemGiam | number:'0.2-2':'vi-VN'}}</strong></td>\\n                </tr>\\n            </ng-container>\\n            <ng-container *ngFor=\\\"let item of danhSachChiPhi.DanhSachMienGiamVos; let i = index\\\">\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 2\\\">\\n                    <td colspan=\\\"3\\\" class=\\\"no-border-bottom pb-0\\\">Voucher: <strong>{{item.MaTheVoucher}}</strong></td>\\n                </tr>\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 2\\\">\\n                    <td class=\\\"no-border-bottom pb-0\\\" style=\\\"width: 31%;\\\">\\n                        <app-radio class=\\\"no-format-css p-0\\\" [disabled]=\\\"true\\\" [model]=\\\"item.LoaiChietKhau\\\"\\n                            [items]=\\\"[{Value:2,Text:'Tiền'},{Value:1,Text:'%'}]\\\"></app-radio>\\n                    </td>\\n                    <td *ngIf=\\\"item.LoaiMienGiam === 2 && item.LoaiChietKhau === 1\\\" class=\\\"no-border-bottom pb-0\\\">\\n                        <app-textboxnumeric label=\\\" \\\"  class=\\\"no-label p-0\\\" max=\\\"100\\\"\\n                            min=\\\"0\\\" [disabled]=\\\"true\\\" [model]=\\\"item.TiLe\\\">\\n                        </app-textboxnumeric>\\n                    </td>\\n                    <td *ngIf=\\\"item.LoaiMienGiam === 2 && item.LoaiChietKhau === 2\\\" class=\\\"no-border-bottom pb-0\\\">\\n                        <app-textboxnumeric label=\\\" \\\" class=\\\"no-label p-0\\\" max=\\\"999999\\\" min=\\\"0\\\" [disabled]=\\\"true\\\"\\n                            [model]=\\\"item.SoTien\\\">\\n                        </app-textboxnumeric>\\n                    </td>\\n                    <td class=\\\"no-border-bottom pb-0\\\">= <strong>{{ item.TongTienMiemGiam | number:'0.2-2':'vi-VN'}}</strong>\\n                    </td>\\n                </tr>\\n            </ng-container>\\n\\n            <tr>\\n                <td colspan=\\\"3\\\" class=\\\"no-border-bottom pb-0\\\">MG thêm:</td>\\n            </tr>\\n            <ng-container *ngFor=\\\"let item of danhSachChiPhi.DanhSachMienGiamVos; let i = index\\\">\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 3  && item.LoaiChietKhau === 1\\\">\\n                    <td class=\\\"no-border-bottom\\\">\\n                        <app-checkbox id=\\\"phan-tram\\\" value=\\\"1\\\" fxFlex=\\\"40%\\\" label=\\\"%\\\" [(model)]=\\\"disableInputPhanTram\\\"\\n                            (modelChange)=\\\"apDungPhanTram($event , item)\\\">\\n                        </app-checkbox>\\n                    </td>\\n                    <td class=\\\"no-border-bottom\\\" style=\\\"width: 1200px;\\\">\\n                        <app-textboxnumeric style=\\\"width: 1200px;\\\" max=\\\"100\\\" class=\\\"no-label p-0\\\" label=\\\" \\\" min=\\\"0\\\"\\n                            [(model)]=\\\"item.TiLe\\\" [disabled]=\\\"!disableInputPhanTram\\\"\\n                            (modelChange)=\\\"changePhanTram($event, item)\\\" \\n                            [validationerror]=\\\"'TiLe' | validationerror: validationErrors\\\">\\n                        </app-textboxnumeric>\\n                    </td>\\n                    <td class=\\\"no-border-bottom\\\">= <strong>{{ item.TongTienMiemGiam | number:'0.2-2':'vi-VN'}}</strong></td>\\n                </tr>\\n                <tr *ngIf=\\\"item.LoaiMienGiam === 3  && item.LoaiChietKhau === 2\\\">\\n                    <td class=\\\"no-border-bottom pb-0\\\">\\n                        <app-checkbox id=\\\"so-tien\\\" value=\\\"1\\\" fxFlex=\\\"40%\\\" label=\\\"Tiền\\\" [(model)]=\\\"disableInputSoTien\\\"\\n                            (modelChange)=\\\"apDungSoTien($event , item)\\\">\\n                        </app-checkbox>\\n                    </td>\\n                    <td class=\\\"no-border-bottom pb-0\\\" style=\\\"width: 1200px;\\\">\\n                        <app-textboxnumeric label=\\\"\\\" style=\\\"width: 1200px;\\\" class=\\\"no-label p-0\\\" [(model)]=\\\"item.SoTien\\\"\\n                            min=\\\"0\\\" max=\\\"99999999\\\" [disabled]=\\\"!disableInputSoTien\\\"\\n                            (modelChange)=\\\"changeSoTien($event, item)\\\"\\n                            [validationerror]=\\\"'SoTien' | validationerror: validationErrors\\\">\\n                        </app-textboxnumeric>\\n                    </td>\\n                    <td class=\\\"no-border-bottom pb-0\\\" style=\\\"width: 500px;\\\">=\\n                        <strong>{{ item.TongTienMiemGiam | number:'0.2-2':'vi-VN'}}</strong></td>\\n                </tr>\\n            </ng-container>\\n            <tr>\\n                <td colspan=\\\"2\\\" align=\\\"right\\\">Tổng cộng MG :</td>\\n                <td><strong style=\\\"color: red;\\\">{{tongTatCaSoTienMg | number:'0.2-2':'vi-VN'}}</strong></td>\\n            </tr>\\n            <tr>\\n                <td colspan=\\\"3\\\">\\n                    <app-textarea label=\\\"Ghi chú\\\" maxlength=\\\"2000\\\" minHeight=\\\"60\\\"\\n                        [(model)]=\\\"data.dataItem.GhiChuMienGiamThem\\\">\\n                    </app-textarea>\\n                </td>\\n            </tr>\\n        </table>\\n    </div>\\n</mat-dialog-content>\\n<mat-dialog-actions fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\">\\n    <button mat-button mat-dialog-close (click)=\\\"HuyApDungMGT()\\\">Hủy</button>\\n    <div *ngIf=\\\"tongTienTungDichVu > 0\\\">\\n        <button mat-raised-button mat-button color=\\\"primary\\\"\\n            *ngIf=\\\"disableInputPhanTram || disableInputSoTien || kiemTraThayDoiSoTienTiLe\\\" (click)=\\\"ApDungMGT()\\\"\\n            cdkFocusInitial>Áp dụng</button>\\n    </div>\\n</mat-dialog-actions>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div style=\\\"font: 500 18px/26px var(--font)\\\">\\n        MIỄN GIẢM TẤT CẢ DỊCH VỤ\\n    </div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n<mat-dialog-content>\\n    <div width=\\\"100%\\\" fxLayout=\\\"row\\\">\\n        <table class=\\\"table table-border\\\" width=\\\"100%\\\">\\n            <tr>\\n                <td width=\\\"100%\\\">\\n                    <app-checkbox id=\\\"phan-tram\\\" [(model)]=\\\"apDungMiemGiamThem.ChietKhauTheoTiLe\\\" value=\\\"1\\\" fxFlex=\\\"30%\\\"\\n                        label=\\\"%\\\" value=\\\"true\\\" (modelChange)=\\\"apDungPhanTram($event)\\\">\\n                    </app-checkbox>\\n                    <app-textboxnumeric fxFlex=\\\"60%\\\" label=\\\"\\\" class=\\\"no-label\\\" max=\\\"100\\\" min=\\\"0\\\"\\n                        [(model)]=\\\"apDungMiemGiamThem.TiLe\\\" [required]=\\\"true\\\" [disabled]=\\\"disablePhanTram\\\"\\n                        [validationerror]=\\\"'TiLe' | validationerror: validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <label class=\\\"red\\\" fxFlex=\\\"10%\\\">(*)</label>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td width=\\\"100%\\\">\\n                    <app-checkbox id=\\\"so-tien\\\" [(model)]=\\\"apDungMiemGiamThem.ChietKhauTheoSoTien\\\" value=\\\"1\\\" fxFlex=\\\"30%\\\"\\n                         label=\\\"Tiền\\\" value=\\\"true\\\"\\n                        (modelChange)=\\\"apDungSoTien($event)\\\">\\n                    </app-checkbox>\\n                    <app-textboxnumeric  fxFlex=\\\"60%\\\" class=\\\"no-label\\\"\\n                          [disabled]=\\\"disableSoTien\\\"\\n                          [(model)]=\\\"apDungMiemGiamThem.SoTien\\\" [required]=\\\"true\\\"\\n                        [validationerror]=\\\"'SoTien' | validationerror: validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <label class=\\\"red\\\" fxFlex=\\\"10%\\\">(*)</label>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td width=\\\"100%\\\">\\n                    <app-textarea id=\\\"ghichu\\\" [(model)]=\\\"apDungMiemGiamThem.GhiChu\\\" label=\\\"Ghi chú\\\" maxlength=\\\"2000\\\"\\n                        minHeight=\\\"60\\\">\\n                    </app-textarea>\\n                </td>\\n            </tr>\\n        </table>\\n    </div>\\n</mat-dialog-content>\\n<mat-dialog-actions fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\">\\n    <button mat-button mat-dialog-close (click)=\\\"HuyApDungMGT()\\\">Hủy</button>\\n    <button *ngIf=\\\"apDungMiemGiamThem.ChietKhauTheoTiLe || apDungMiemGiamThem.ChietKhauTheoSoTien\\\" mat-raised-button\\n        mat-button color=\\\"primary\\\" (click)=\\\"ApDungMGT()\\\" cdkFocusInitial>Áp dụng</button>\\n</mat-dialog-actions>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\" class=\\\"mb-1\\\">\\n    <div>XEM TRƯỚC KHI IN</div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n<mat-dialog-content style=\\\"overflow:hidden\\\">\\n    <div class=\\\"container-iframe\\\">\\n        <iframe width=\\\"100%\\\" style=\\\"height: 500px;\\\" [src]=\\\"src| safe\\\" allowTransparency=\\\"true\\\"\\n            background=\\\"transparent\\\"></iframe>\\n    </div>\\n</mat-dialog-content>\\n<mat-dialog-actions align=\\\"end\\\" class=\\\"mt-3\\\">\\n    <app-print-form textPrint=\\\"In Bảng Kê Thu Tiền Thuốc\\\" style=\\\"text-align: right;\\\"  type=\\\"PDF\\\" [event]=\\\"data\\\" typeSize=\\\"A5\\\" [bodyComponent]=\\\"this\\\" *ngIf=\\\"kiemtraPhieuInManhinh != true && InBangKe == true\\\"\\n        (click)=\\\"InPhieu(1)\\\" copies=\\\"2\\\">\\n    </app-print-form>\\n    <app-print-form textPrint=\\\"In Phiếu Thu\\\" type=\\\"PDF\\\"  style=\\\"text-align: right;\\\" typeLayout=\\\"landscape\\\" [event]=\\\"data\\\" typeSize=\\\"A5\\\"\\n        [bodyComponent]=\\\"this\\\" (click)=\\\"InPhieu(2)\\\" *ngIf=\\\"kiemtraPhieuInManhinh != true && InPhieuThu == true\\\">\\n    </app-print-form>\\n</mat-dialog-actions>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\" class=\\\"mb-1\\\">\\n    <div>XEM TRƯỚC KHI IN</div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n<mat-dialog-content style=\\\"overflow:hidden\\\">\\n    <div class=\\\"container-iframe\\\">\\n        <iframe width=\\\"100%\\\" style=\\\"height: 500px;\\\" [src]=\\\"src| safe\\\" allowTransparency=\\\"true\\\"\\n            background=\\\"transparent\\\"></iframe>\\n    </div>\\n</mat-dialog-content>\\n<mat-dialog-actions align=\\\"end\\\" class=\\\"mt-3\\\">\\n    <app-print-form textPrint=\\\"In đơn thuốc\\\" style=\\\"text-align: right;\\\"  type=\\\"PDF\\\" [event]=\\\"data\\\" typeSize=\\\"A5\\\" [bodyComponent]=\\\"this\\\" *ngIf=\\\"kiemtraPhieuInManhinh != true && InBangKe == true\\\"\\n        (click)=\\\"InPhieu(1)\\\" >\\n    </app-print-form>\\n    <app-print-form textPrint=\\\"In đơn thuốc\\\" type=\\\"PDF\\\"  style=\\\"text-align: right;\\\" typeLayout=\\\"landscape\\\" [event]=\\\"data\\\" typeSize=\\\"A5\\\"\\n        [bodyComponent]=\\\"this\\\" (click)=\\\"InPhieu(2)\\\" *ngIf=\\\"kiemtraPhieuInManhinh != true && InPhieuThu == true\\\">\\n    </app-print-form>\\n</mat-dialog-actions>\"","export default \"<vex-page-layout>\\n    <vex-page-layout-header class=\\\"pb-16\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center start\\\">\\n        <div [class.px-gutter]=\\\"true\\\" class=\\\"w-full flex justify-between\\\">\\n            <vex-breadcrumbs [crumbs]=\\\"\\n                    [\\n                    {Title:'Nhà Thuốc',Path:''},\\n                    {Title:'DS Đơn Thuốc',Path:'/nha-thuoc', Active:true}\\n                    ]\\\">\\n            </vex-breadcrumbs>\\n            <app-hot-key  style=\\\"position: absolute;right: 180px;top: 7px;\\\" [keys]=\\\"[\\n            {Key:'Ctrl + Q',Description:'Quét mã vạch',End:true}\\n            ]\\\"></app-hot-key>\\n            <button type=\\\"button\\\" (click)=\\\"ToKhachVangLai(typeDanhSachThanhToan)\\\"\\n                style=\\\"position: absolute;right: 21px;top: 7px;\\\" mat-raised-button mat-button>Khách Vãng Lai</button>\\n               \\n        </div>\\n       \\n    </vex-page-layout-header>\\n\\n    <vex-page-layout-content [class.px-gutter]=\\\"true\\\" class=\\\"-mt-6\\\">\\n        <div class=\\\"-mt-16\\\">\\n            <div fxLayout=\\\"row\\\" fxLayout.lt-md=\\\"column\\\" fxLayoutGap=\\\"20px\\\">\\n                <div class=\\\"card\\\" fxFlex=\\\"100%\\\">\\n                    <div class=\\\"px-6 py-4\\\" fxLayout=\\\"column\\\" style=\\\"position: relative;\\\">\\n                        <!-- (onHaddlekiemTraDonThuocThanhToan)=\\\"getkiemTraDonThuocThanhToan($event)\\\"  -->\\n                        <app-quay-thuoc-tim-benh-nhan (dataSearch)=\\\"getData($event)\\\" class=\\\"mb-2\\\"\\n                             \\n                            (onHaddleeXportExel)=\\\"KiemTraeXportExel($event)\\\"\\n                            (onHaddleUuTienSearch)=\\\"getonHaddleUuTienSearch($event)\\\"\\n                            [typeDanhSachThanhToan]=\\\"typeDanhSachThanhToan\\\"\\n                            [dataQuayThuocSearch]=\\\"dataQuayThuocSearch\\\" \\n                            [hoquerySearch]=\\\"hoquerySearch\\\"\\n                            >\\n                        </app-quay-thuoc-tim-benh-nhan>\\n                        <!-- [typeDanhSachThanhToan]=\\\"typeDanhSachThanhToan\\\"  -->\\n                        <app-quay-thuoc-list \\n                        [(id)]=id \\n                        [xacNhanIn]=\\\"xacNhanIn\\\" \\n                        [queryStringSearchUuTien]=\\\"queryStringSearchUuTien\\\"\\n                        (OnHandleDataQuayThuocSearchList)=\\\"getonHaddleDataSearch($event)\\\"\\n                        >\\n                        </app-quay-thuoc-list>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </vex-page-layout-content>\\n</vex-page-layout>\"","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n    <app-grid *ngIf=\\\"dataSourcedanhsachThuocBHYT.data.length>0\\\" fxFlex=\\\"100%\\\" [gridColumns]=\\\"gridColumns\\\"\\n        [gridDataSource]=\\\"dataSourcedanhsachThuocBHYT\\\" [autoHeight]=\\\"true\\\" [lazyLoadPage]=\\\"false\\\"\\n        [useActionDefault]=\\\"false\\\" [useAddDeault]=\\\"false\\\" [useHeaderDefault]=\\\"false\\\" [allowSortDefault]=\\\"false\\\"\\n        [pageable]=\\\"false\\\" [headerTemplate]=\\\"headerTemplate\\\" useActionDefault=\\\"false\\\" [checkboxAble]=\\\"false\\\"\\n        [lazyLoadPage]=\\\"true\\\">\\n        <ng-template #headerTemplate>\\n            <div class=\\\"px-2 py-2\\\" style=\\\"background: burlywood;overflow: hidden;\\\">\\n                <h4 style=\\\"font-weight: bold;float: left;line-height: 36px;\\\">THUỐC BHYT- VẬT TƯ</h4>\\n                <button type=\\\"button\\\" (click)=\\\"KeThuoc()\\\" style=\\\"float: right;\\\" mat-raised-button>\\n                    In kê thuốc</button>\\n            </div>\\n        </ng-template>\\n    </app-grid>\\n    <app-grid *ngIf=\\\"dataSourcedanhsachThuocKhongBHYT.data.length>0\\\" fxFlex=\\\"100%\\\" [gridColumns]=\\\"gridColumns\\\"\\n        [gridDataSource]=\\\"dataSourcedanhsachThuocKhongBHYT\\\" [autoHeight]=\\\"true\\\" [lazyLoadPage]=\\\"false\\\"\\n        [useActionDefault]=\\\"false\\\" [headerTemplate]=\\\"headerTemplate1\\\" [useAddDeault]=\\\"false\\\" [useHeaderDefault]=\\\"false\\\"\\n        [allowSortDefault]=\\\"false\\\" [pageable]=\\\"false\\\" useActionDefault=\\\"false\\\" [checkboxAble]=\\\"false\\\"\\n        [lazyLoadPage]=\\\"true\\\">\\n        <ng-template #headerTemplate1>\\n            <div class=\\\"px-2 py-2\\\" style=\\\"background: lightblue;\\\">\\n                <h4 style=\\\"font-weight: bold;\\\">THUỐC KHÔNG BHYT-VẬT TƯ</h4>\\n\\n            </div>\\n        </ng-template>\\n    </app-grid>\\n    <p *ngIf=\\\"dataSourcedanhsachThuocKhongBHYT.data.length == 0 && dataSourcedanhsachThuocBHYT.data.length == 0\\\"\\n        class=\\\"m-0 p-0\\\"><strong>Không có dược phẩm nào chờ xuất</strong></p>\\n    <ng-template #donGiaTemplate let-dataItem>\\n        <span> {{dataItem.DonGia | number:'0.2-2':'vi-VN'}}</span>\\n    </ng-template>\\n\\n    <ng-template #thanhTienTemplate let-dataItem>\\n        <span> {{dataItem.ThanhTien | number:'0.2-2':'vi-VN'}}</span>\\n    </ng-template>\\n\\n</div>\\n<br>\\n<div *ngIf=\\\"dataSourcedanhsachThuocBHYT.data.length>0 || dataSourcedanhsachThuocKhongBHYT.data.length>0\\\">\\n    <button type=\\\"button\\\" color=\\\"primary\\\" (click)=\\\"GuiData()\\\" class=\\\"mr-1 float-right\\\" mat-raised-button>\\n        Xuất thuốc</button>\\n</div>\"","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n    <div fxFlex=\\\"100%\\\" class=\\\"mt-3\\\">\\n        <span style=\\\"float: left;\\\" *ngIf=\\\"!(benhnhanThongTin.SoDuTaiKhoan > 0)\\\">\\n            <strong style=\\\"font-size: 14px;\\\">Số tiền cần thu của bệnh nhân: </strong>\\n            <strong style=\\\"color:red\\\">{{tongTien | number:'0.2-2':'vi-VN'}}</strong></span>\\n        <span style=\\\"float: left;\\\" *ngIf=\\\"benhnhanThongTin.SoDuTaiKhoan > 0\\\">\\n            <strong style=\\\"font-size: 14px;\\\">Số tiền cần thu của bệnh nhân: </strong>\\n            <strong style=\\\"color:red\\\">{{tongTien |number:'0.2-2':'vi-VN'}}</strong>\\n        </span>\\n        <!-- <span style=\\\"float: right;\\\">Tài khoản\\n            <strong style=\\\"color:green\\\">{{benhnhanThongTin.SoDuTaiKhoan |number:'0.2-2':'vi-VN'}}</strong>\\n        </span> -->\\n        <span style=\\\"float: right;\\\">\\n            <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"nguoiBenhKhongMuaThuoc()\\\"\\n                title=\\\"Phím tắt: Người bệnh không mua thuốc\\\">NB không mua thuốc</button>\\n        </span>\\n    </div>\\n    <div fxFlex=\\\"100%\\\">\\n        <kendo-splitter>           \\n            <kendo-splitter-pane [collapsible]=\\\"true\\\" size=\\\"18%\\\" class=\\\"sticky-panelbar\\\" style=\\\"overflow-x: hidden;\\\">\\n                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\"\\n                    class=\\\"px-2 py-3\\\" style=\\\"overflow:hidden;\\\">\\n                    <app-multiselect [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Hình thức thanh toán\\\" [(model)]=\\\"setDefeautTienMat\\\"\\n                        (valueChange)=\\\"ChangeHinhThucThanhToan($event)\\\" [data]=\\\"hinhThucThanhToan\\\"\\n                        [validationerror]=\\\"'HinhThucThanhToan' | validationerror:validationThuThuocErrors\\\"\\n                        required=\\\"true\\\">\\n                    </app-multiselect>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"so-tien\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Tiền mặt\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.TienMat\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienMat\\\" (modelChange)=\\\"modelChangeTienMat($event , 1)\\\" min=\\\"0\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'TienMat' | validationerror:validationThuThuocErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedChuyenKhoan\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"chuyen-khoan\\\" fxFlex=\\\"100%\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Chuyển khoản\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.ChuyenKhoan\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienChuyenKhoan\\\" (modelChange)=\\\"modelChangeChuyenKhoan($event , 2)\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'ChuyenKhoan' | validationerror:validationThuThuocErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedPos\\\" [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\"\\n                        id=\\\"pos\\\" fxFlex=\\\"100%\\\" [(selectMoney)]=\\\"selectMoneyTienPos\\\"\\n                        (modelChange)=\\\"modelChangePos($event , 3)\\\" fxFlex.sm=\\\"100%\\\" label=\\\"POS\\\" [step]=\\\"100\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.POS\\\" [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'POS' | validationerror:validationThuThuocErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedSoTienCongNo\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"pos\\\" fxFlex=\\\"100%\\\"\\n                        [(selectMoney)]=\\\"selectMoneySoTienCongNo\\\" (modelChange)=\\\"modelChangeSoTienCongNo($event , 4)\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Công nợ\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.SoTienCongNo\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'SoTienCongNo' | validationerror:validationThuThuocErrors\\\">\\n                    </app-textboxnumeric>\\n                    <p style=\\\"margin-top:-20px;\\\" *ngIf=\\\"showCanhBaoSoTienNhap\\\" class=\\\"color-red\\\">Số tiền nhập không đúng\\n                        số tiền thu.</p>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"benh-nhan-dua\\\" fxFlex=\\\"100%\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Người bệnh đưa\\\" [step]=\\\"100\\\" [spinners]=\\\"false\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienBNDua\\\" (modelChange)=\\\"modelChangeTienBNDua($event)\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.BenhNhanDua\\\" (keyup)=\\\"onChangeBenhNhanDua()\\\" min=\\\"0\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'BenhNhanDua' | validationerror:validationThuThuocErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"tra-lai\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Trả lại\\\" [(model)]=\\\"thongtinDonThuoc.TienTraLai\\\" [readonly]=\\\"true\\\" [spinners]=\\\"false\\\"\\n                        [isFormatCurrenly]=\\\"true\\\">\\n                    </app-textboxnumeric>\\n                    <app-datepicker id=\\\"ngay-thu\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Ngày thu\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.NgayThu\\\" [readonly]=\\\"true\\\"\\n                        [validationerror]=\\\"'NgayThu' | validationerror:validationThuThuocErrors\\\">\\n                    </app-datepicker>\\n                    <app-textbox id=\\\"noi-dung-thu\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Nội dung thu\\\" maxlength=\\\"1000\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.NoiDungThu\\\"\\n                        [validationerror]=\\\"'NoiDungThu' | validationerror:validationThuThuocErrors\\\" required=\\\"true\\\">\\n                    </app-textbox>\\n\\n                    <div fxFlex=\\\"100%\\\" fxLayout=\\\"row\\\" style=\\\"margin-right:10px;margin-top:15px;\\\"\\n                        fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"padding-thu-tien\\\" kendoTooltip>\\n                        <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"ThuTienVaXuatThuoc()\\\"\\n                            title=\\\"Phím tắt: Thu tiền và xuất thuốc\\\">Thu tiền và xuất thuốc</button>\\n                        <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"ThuTien()\\\"\\n                            title=\\\"Phím tắt: Ctrl + S\\\">Thu\\n                            tiền</button>\\n                    </div>\\n                </div>\\n            </kendo-splitter-pane>\\n            <kendo-splitter-pane>\\n                <kendo-tabstrip #tabStrip fxFlex=\\\"100%\\\" class=\\\"content-has-border\\\" style=\\\"padding: 5px !important\\\"\\n                    (tabSelect)=\\\"chuyenDen($event)\\\">\\n                    <kendo-tabstrip-tab [title]=\\\"'Chưa thu'\\\" [selected]=\\\"true\\\">\\n                        <ng-template kendoTabContent>\\n                            <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px\\\" fxLayoutGap.lt-sm=\\\"0\\\"\\n                                style=\\\"padding: 4px; margin-top: -16px;\\\">\\n                                <app-combobox #duocPhamCombobox id=\\\"DuocPham\\\" fxFlex=\\\"55%\\\" fxFlex.sm=\\\"55%\\\"\\n                                    [required]=\\\"true\\\" [(model)]=\\\"themDuocPham.DuocPhamId\\\"\\n                                    [modelText]=\\\"themDuocPham.DuocPhamText\\\" label=\\\"Dược phẩm\\\"\\n                                    class=\\\"item-no-padding pb-0\\\" [template]=\\\"dichVuGiuongTemplate\\\"\\n                                    [templateHeader]=\\\"dichVuGiuongTemplateHeader\\\"\\n                                    (selectionChange)=\\\"onSelectDuocPham($event)\\\" url=\\\"QuayThuoc/GetDuocPham\\\"\\n                                    [validationerror]=\\\"'DuocPhamId' | validationerror:validationErrors\\\"\\n                                    [popupSettings]=\\\"{width: 900,popupClass:'item-no-padding'}\\\"\\n                                    (keyup)=\\\"onKeyEnterAddItem($event)\\\" (openCombobox)=\\\"openCombobox($event)\\\">\\n                                    <ng-template #dichVuGiuongTemplateHeader let-dataItem>\\n                                        <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                                            <tr>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Loại</th>\\n                                                <th width=\\\"20%\\\" style=\\\"text-align: left;\\\">Tên</th>\\n                                                <th width=\\\"10%\\\">Hàm lượng</th>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Hoạt chất</th>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">ĐVT</th>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">ĐD</th>\\n                                                <th>NSX</th>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Tồn</th>\\n                                                <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Hạn Sử Dụng</th>\\n                                            </tr>\\n                                        </table>\\n                                    </ng-template>\\n                                    <ng-template #dichVuGiuongTemplate let-dataItem>\\n                                        <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                                            <tr>\\n                                                <td width=\\\"10%\\\">{{dataItem.Loai}}</td>\\n                                                <td width=\\\"20%\\\">{{dataItem.Ten}}</td>\\n                                                <td width=\\\"10%\\\">{{dataItem.HamLuong}}</td>\\n                                                <td width=\\\"10%\\\">{{dataItem.HoatChat}}</td>\\n                                                <td width=\\\"10%\\\">{{dataItem.DonViTinh}}</td>\\n                                                <td width=\\\"10%\\\">{{dataItem.DuongDung}}</td>\\n                                                <td>{{dataItem.NhaSanXuat}}</td>\\n                                                <td width=\\\"10%\\\" style=\\\"text-align: center;\\\">{{dataItem.SoLuongTon |\\n                                                    number }}</td>\\n                                                <td width=\\\"10%\\\" style=\\\"text-align: left;\\\">{{dataItem.HanSuDung}}\\n                                                </td>\\n                                            </tr>\\n                                        </table>\\n                                    </ng-template>\\n                                </app-combobox>\\n                                <app-textboxnumeric class=\\\"pb-0\\\" label=\\\"Số lượng tồn\\\" fxFlex=\\\"15%\\\"\\n                                    [(model)]=\\\"themDuocPham.SoLuongTon\\\" disabled=\\\"true\\\" moreClass=\\\"text-green bold\\\">\\n                                </app-textboxnumeric>\\n                                <app-textboxnumeric class=\\\"pb-0\\\" fxFlex=\\\"15%\\\" label=\\\"Số lượng\\\"\\n                                    [(model)]=\\\"themDuocPham.SoLuong\\\" [required]=\\\"true\\\"\\n                                    [validationerror]=\\\"'SoLuong' | validationerror:validationErrors\\\" min=\\\"1\\\"\\n                                    (keyup)=\\\"onKey($event)\\\">\\n                                </app-textboxnumeric>\\n                                <div fxFlex=\\\"10%\\\" class=\\\"mt-5\\\">\\n                                    <button type=\\\"button\\\" color=\\\"primary\\\" class=\\\"mr-1\\\" (click)=\\\"themThuoc()\\\"\\n                                        mat-raised-button>Thêm</button>\\n                                </div>\\n                            </div>\\n                            <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"0\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n                                <kendo-grid fxFlex=\\\"100%\\\" [data]=\\\"gridData\\\" [resizable]=\\\"true\\\"\\n                                    [kendoGridSelectBy]=\\\"keySelectBy\\\" [selectable]=\\\"{enabled: true, checkboxOnly: true}\\\"\\n                                    class=\\\"header-center header-small\\\">\\n                                    <kendo-grid-checkbox-column width=\\\"51\\\">\\n                                        <ng-template kendoGridHeaderTemplate>\\n                                            <input class=\\\"k-checkbox\\\" id=\\\"selectAllCheckboxId\\\"\\n                                                kendoGridSelectAllCheckbox [state]=\\\"selectAllState\\\"\\n                                                (selectAllChange)=\\\"onSelectAllChange($event)\\\">\\n                                            <label class=\\\"k-checkbox-label\\\" for=\\\"selectAllCheckboxId\\\"></label>\\n                                        </ng-template>\\n\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <div>\\n                                                <input class=\\\"k-checkbox\\\" id=\\\"selectCheckboxId{{dataItem[keySelectBy]}}\\\"\\n                                                    type=\\\"checkbox\\\" kendoCheckBox [(ngModel)]=\\\"dataItem.CheckedDefault\\\"\\n                                                    (change)=\\\"onSelectChangeCheckbox($event,dataItem[keySelectBy])\\\" />\\n                                                <label class=\\\"k-checkbox-label\\\"\\n                                                    for=\\\"selectCheckboxId{{dataItem[keySelectBy]}}\\\"\\n                                                    [style.display]=\\\"'block'\\\"></label>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-checkbox-column>\\n                                    <kendo-grid-column field=\\\"STT\\\" title=\\\"#\\\" width=\\\"59\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"TenDuocPham\\\" title=\\\"Tên Thuốc-Vật Tư\\\" width=\\\"143\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n                                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\"\\n                                                class=\\\"mt-2\\\" kendoTooltip>\\n                                                <span class=\\\"reverse-ellipsis r\\\" title=\\\"{{dataItem.TenDuocPham}}\\\">\\n                                                    {{dataItem.TenDuocPham}}\\n                                                </span>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"NongDoVaHamLuong\\\" title=\\\"Nồng Độ/Hàm Lượng\\\" width=\\\"80\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\" [style]=\\\"{'text-align': 'center'}\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n                                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\"\\n                                                class=\\\"mt-2\\\" kendoTooltip>\\n                                                <span class=\\\"reverse-ellipsis r\\\" title=\\\"{{dataItem.NongDoVaHamLuong}}\\\">\\n                                                    {{dataItem.NongDoVaHamLuong}}\\n                                                </span>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"MaHoatChat\\\" title=\\\"Hoạt Chất\\\" width=\\\"100\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\" [style]=\\\"{'text-align': 'center'}\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n                                            <span style=\\\"color: black;font-size: 14px;font-weight: bold\\\">Tổng\\n                                                cộng:</span>\\n                                        </ng-template>\\n                                        <ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n                                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\"\\n                                                class=\\\"mt-2\\\" kendoTooltip>\\n                                                <span class=\\\"reverse-ellipsis r\\\" title=\\\"{{dataItem.MaHoatChat}}\\\">\\n                                                    {{dataItem.MaHoatChat}}\\n                                                </span>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"DonViTinh\\\" title=\\\"ĐVT\\\" width=\\\"40\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n                                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\"\\n                                                class=\\\"mt-2\\\" kendoTooltip>\\n                                                <span class=\\\"reverse-ellipsis r\\\" title=\\\"{{dataItem.DonViTinh}}\\\">\\n                                                    {{dataItem.DonViTinh}}\\n                                                </span>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"SoLuongToa\\\" title=\\\"SL Toa\\\" width=\\\"78\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\" [style]=\\\"{'text-align': 'center'}\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"SoLuongMua\\\" title=\\\"SL Mua\\\" width=\\\"95\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <app-textboxnumeric class=\\\"no-label numeric-in-grid\\\"\\n                                                [disabled]=\\\"!dataItem.CheckedDefault\\\"\\n                                                (modelChange)=\\\"modelChangeSoLuongMua($event , dataItem)\\\"\\n                                                [(model)]=\\\"dataItem.SoLuongMua\\\">\\n                                            </app-textboxnumeric>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"DonGia\\\" title=\\\"Đơn Giá\\\" width=\\\"90\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <div>{{ dataItem.DonGia | number:'0.2-2':'vi-VN'}}</div>\\n                                        </ng-template>\\n                                        <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n                                            <span style=\\\"color: black;font-size: 14px;font-weight: bold\\\"\\n                                                *ngIf=\\\"loaiYeuCauTiepNhanKhachVangLai\\\">Tổng\\n                                                cộng:</span>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"ThanhTien\\\" title=\\\"Thành Tiền\\\" width=\\\"90\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <div style=\\\"float: right;\\\">{{ dataItem.ThanhTien | number:'0.2-2':'vi-VN'}}\\n                                            </div>\\n                                        </ng-template>\\n                                        <!-- <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\"\\n                                            style=\\\"text-align: center\\\">\\n                                            <span style=\\\"float: right;\\\">{{total('ThanhTien') |\\n                                                number:'0.2-2':'vi-VN'}} 654</span>\\n                                        </ng-template> -->\\n                                        <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n                                            <span style=\\\"color:red;float: right;\\\"\\n                                                *ngIf=\\\"loaiYeuCauTiepNhanKhachVangLai\\\">{{total('ThanhTien') |\\n                                                number:'0.2-2':'vi-VN'}}</span>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column-group [style]=\\\"{'text-align': 'center'}\\\"\\n                                        *ngFor=\\\"let col of danhSachCongNoChoThus\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <div>\\n                                            <ng-template kendoGridHeaderTemplate let-columnIndex=\\\"columnIndex\\\"\\n                                                let-column=\\\"column\\\">\\n                                                <div class=\\\"text-center\\\">Công nợ </div>\\n                                            </ng-template>\\n                                        </div>\\n                                        <kendo-grid-column *ngFor=\\\"let col1 of col.CongNoChoThus\\\" width=\\\"150\\\"\\n                                            [style]=\\\"{'text-align': 'center'}\\\" title=\\\"{{col1.TenCongTy}}\\\"\\n                                            [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                            <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"5px grid\\\"\\n                                                    fxLayoutGap.lt-sm=\\\"0\\\" fxLayoutAlign=\\\"space-between\\\">\\n                                                    <app-textboxnumeric class=\\\"no-label\\\" [step]=\\\"100\\\" decimals=\\\"2\\\"\\n                                                        [format]=\\\"format\\\" min=\\\"0.00\\\"\\n                                                        (modelChange)=\\\"modelChangeCongNo($event , dataItem, col1.ViTri)\\\"\\n                                                        [(model)]=\\\"dataItem.DanhSachCongNoChoThus[col1.ViTri].SoTienCongNoChoThu\\\">\\n                                                    </app-textboxnumeric>\\n                                                </div>\\n                                            </ng-template>\\n                                            <ng-template kendoGridGroupFooterTemplate>\\n                                                <div *ngIf=\\\"col1.SoTienCongNoChoThu !== 0\\\">\\n                                                    {{col1.SoTienCongNoChoThu | number:'0.2-2':'vi-VN'}}\\n                                                </div>\\n                                                <div\\n                                                    *ngIf=\\\"col1.SoTienCongNoChoThu === undefined && col1.SoTienCongNoChoThu === 0\\\">\\n                                                    {{0 | number:'0.2-2':'vi-VN'}}\\n                                                </div>\\n                                            </ng-template>\\n                                            <ng-template kendoGridFooterTemplate let-column\\n                                                let-columnIndex=\\\"columnIndex\\\" style=\\\"text-align: center\\\">\\n                                                <span style=\\\"color:black;float: right;\\\">{{totalCongno(col1.ViTri) |\\n                                                    number:'0.2-2':'vi-VN'}}</span>\\n                                            </ng-template>\\n                                        </kendo-grid-column>\\n                                    </kendo-grid-column-group>\\n                                    <kendo-grid-column field=\\\"SoTienMG\\\" title=\\\"Số tiền MG\\\" width=\\\"130\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\" [style]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridHeaderTemplate let-columnIndex=\\\"columnIndex\\\"\\n                                            let-column=\\\"column\\\">\\n                                            Số tiền MG\\n                                            <mat-icon style=\\\"margin-top: 10px;cursor: pointer\\\" [icIcon]=\\\"icRoundEdit\\\"\\n                                                (click)=\\\"apDungMiemGiamThem()\\\">\\n                                            </mat-icon>\\n                                        </ng-template>\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <div class=\\\"float_right\\\">\\n                                                <div style=\\\"cursor: pointer;\\\">\\n                                                    {{ dataItem.SoTienMG | number:'0.2-2':'vi-VN'}}\\n                                                    <ic-icon [icon]=\\\"icRoundEdit\\\" class=\\\"mr-3\\\" inline=\\\"true\\\"\\n                                                        (click)=\\\"apDungMiemGiamChoTungDichVu(dataItem)\\\">\\n                                                    </ic-icon>\\n                                                </div>\\n                                            </div>\\n                                        </ng-template>\\n                                        <ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\"\\n                                            let-aggregates=\\\"aggregates\\\">\\n                                            <div style=\\\"margin-right: 28px;\\\" class=\\\"float_right\\\">\\n                                                {{aggregates.SoTienMG.sum |number:'0.2-2':'vi-VN'}}\\n                                            </div>\\n                                        </ng-template>\\n                                        <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n                                            <span style=\\\"margin-right: 28px;\\\" class=\\\"float_right\\\">{{total('SoTienMG') |\\n                                                number:'0.2-2':'vi-VN'}}</span>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"BNConPhaiThanhToan\\\" title=\\\"BN Còn Phải TT\\\" width=\\\"90\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <div *ngIf=\\\"dataItem.BNConPhaiThanhToan >= 0\\\">\\n                                                <span style=\\\"float: right;\\\">{{dataItem.BNConPhaiThanhToan |\\n                                                    number:'0.2-2':'vi-VN'}}</span>\\n                                            </div>\\n                                            <div *ngIf=\\\"dataItem.BNConPhaiThanhToan < 0\\\" style=\\\"color:red;float: right\\\">\\n                                                {{ dataItem.BNConPhaiThanhToan | number:'0.2-2':'vi-VN'}}\\n                                                <mat-icon [icIcon]=\\\"icInfo\\\" kendoTooltip\\n                                                    title=\\\"Số tiền bạn nhập không đúng.\\\">\\n                                                </mat-icon>\\n                                            </div>\\n                                        </ng-template>\\n                                        <ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n                                            <span style=\\\"color:red;float: right;\\\">{{total('BNConPhaiThanhToan') |\\n                                                number:'0.2-2':'vi-VN'}}</span>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"Solo\\\" title=\\\"Số Lô\\\" width=\\\"125\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"HanSuDungHientThi\\\" title=\\\"Hạn Sử Dụng\\\" width=\\\"80\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"BacSiKeToa\\\" title=\\\"Bác Sĩ Kê Toa\\\" width=\\\"80\\\"\\n                                        [style]=\\\"{'text-align': 'center'}\\\" [headerStyle]=\\\"{'text-align': 'center'}\\\"\\n                                        [hidden]=\\\"loaiYeuCauTiepNhanKhachVangLai\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n                                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\"\\n                                                class=\\\"mt-2\\\" kendoTooltip>\\n                                                <span class=\\\"reverse-ellipsis r\\\" title=\\\"{{dataItem.BacSiKeToa}}\\\">\\n                                                    {{dataItem.BacSiKeToa}}\\n                                                </span>\\n                                            </div>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-column field=\\\"Action\\\" title=\\\"\\\" width=\\\"54\\\"\\n                                        [headerStyle]=\\\"{'text-align': 'center'}\\\">\\n                                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n                                            <button type=\\\"button\\\" mat-icon-button (click)=\\\"delete(dataItem)\\\"\\n                                                *ngIf=\\\"dataItem.isNew\\\">\\n                                                <mat-icon [icIcon]=\\\"icDelete\\\"></mat-icon>\\n                                            </button>\\n                                        </ng-template>\\n                                    </kendo-grid-column>\\n                                    <kendo-grid-messages noRecords=\\\"Không có dữ liệu.\\\" pagerOf=\\\"trong số\\\"\\n                                        pagerItems=\\\"dòng\\\" detailExpand=\\\"Mở rộng chi tiết\\\"\\n                                        detailCollapse=\\\"Thu gọn chi tiết\\\">\\n                                    </kendo-grid-messages>\\n                                </kendo-grid>\\n                            </div>\\n                        </ng-template>\\n                    </kendo-tabstrip-tab>\\n                    <kendo-tabstrip-tab [title]=\\\"'Đã thu'\\\">\\n                        <ng-template kendoTabContent>\\n                            <app-thong-tin-phieu-da-thu [yeuCauTiepNhanId]=\\\"maYCTNId\\\"></app-thong-tin-phieu-da-thu>\\n                        </ng-template>\\n                    </kendo-tabstrip-tab>\\n                </kendo-tabstrip>\\n            </kendo-splitter-pane>\\n        </kendo-splitter>\\n    </div>\\n</div>\"","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n    <div fxFlex=\\\"100%\\\" class=\\\"mt-3\\\">\\n        <span style=\\\"float: left;\\\">Số tiền <strong  style=\\\"color:red\\\">{{tongTien | number:'0.2-2':'vi-VN'}}</strong></span>\\n    </div>\\n    <div fxFlex=\\\"100%\\\">\\n        <kendo-splitter>\\n            <kendo-splitter-pane [collapsible]=\\\"true\\\" size=\\\"18%\\\" class=\\\"sticky-panelbar\\\" style=\\\"overflow-x: hidden;\\\">\\n                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\"\\n                    class=\\\"px-2 py-3\\\" style=\\\"overflow:hidden;\\\">\\n                    <app-multiselect [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Hình thức thanh toán\\\" [(model)]=\\\"setDefeautTienMat\\\"\\n                        (valueChange)=\\\"ChangeHinhThucThanhToan($event)\\\" [data]=\\\"hinhThucThanhToan\\\"\\n                        [validationerror]=\\\"'HinhThucThanhToan' | validationerror:validationErrors\\\"\\n                        required=\\\"true\\\">\\n                    </app-multiselect>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"so-tien\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Tiền mặt\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.TienMat\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienMat\\\" (modelChange)=\\\"modelChangeTienMat($event , 1)\\\" min=\\\"0\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'TienMat' | validationerror:validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedChuyenKhoan\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"chuyen-khoan\\\" fxFlex=\\\"100%\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Chuyển khoản\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.ChuyenKhoan\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienChuyenKhoan\\\" (modelChange)=\\\"modelChangeChuyenKhoan($event , 2)\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'ChuyenKhoan' | validationerror:validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedPos\\\" [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\"\\n                        id=\\\"pos\\\" fxFlex=\\\"100%\\\" [(selectMoney)]=\\\"selectMoneyTienPos\\\"\\n                        (modelChange)=\\\"modelChangePos($event , 3)\\\" fxFlex.sm=\\\"100%\\\" label=\\\"POS\\\" [step]=\\\"100\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.POS\\\" [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'POS' | validationerror:validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedSoTienCongNo\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"pos\\\" fxFlex=\\\"100%\\\"\\n                        [(selectMoney)]=\\\"selectMoneySoTienCongNo\\\" (modelChange)=\\\"modelChangeSoTienCongNo($event , 4)\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Công nợ\\\" [step]=\\\"100\\\" [(model)]=\\\"thongtinDonThuoc.SoTienCongNo\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'SoTienCongNo' | validationerror:validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <!-- <p style=\\\"margin-top:-20px;\\\" *ngIf=\\\"showCanhBaoSoTienNhap\\\" class=\\\"color-red\\\">\\n                        Số tiền nhập không đúng số tiền thu.</p> -->\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"benh-nhan-dua\\\" fxFlex=\\\"100%\\\"\\n                        fxFlex.sm=\\\"100%\\\" label=\\\"Người bệnh đưa\\\" [step]=\\\"100\\\" [spinners]=\\\"false\\\"\\n                        [(selectMoney)]=\\\"selectMoneyTienBNDua\\\" (modelChange)=\\\"modelChangeTienBNDua($event)\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.BenhNhanDua\\\" (keyup)=\\\"onChangeBenhNhanDua()\\\" min=\\\"0\\\"\\n                        [isFormatCurrenly]=\\\"true\\\"\\n                        [validationerror]=\\\"'BenhNhanDua' | validationerror:validationErrors\\\">\\n                    </app-textboxnumeric>\\n                    <app-textboxnumeric *ngIf=\\\"flagCheckSeletedTienMat\\\"\\n                        [style.display]=\\\"tongTien < 0 ? 'none' : 'block'\\\" id=\\\"tra-lai\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\"\\n                        label=\\\"Trả lại\\\" [(model)]=\\\"thongtinDonThuoc.TienTraLai\\\" [readonly]=\\\"true\\\" [spinners]=\\\"false\\\"\\n                        [isFormatCurrenly]=\\\"true\\\">\\n                    </app-textboxnumeric>\\n                    <app-datepicker id=\\\"ngay-thu\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Ngày thu\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.NgayThu\\\" [readonly]=\\\"true\\\"\\n                        [validationerror]=\\\"'NgayThu' | validationerror:validationErrors\\\">\\n                    </app-datepicker>\\n                    <app-textbox id=\\\"noi-dung-thu\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Nội dung thu\\\" maxlength=\\\"1000\\\"\\n                        [(model)]=\\\"thongtinDonThuoc.NoiDungThu\\\"\\n                        [validationerror]=\\\"'NoiDungThu' | validationerror:validationErrors\\\" required=\\\"true\\\">\\n                    </app-textbox>\\n                    <div fxFlex=\\\"100%\\\" fxLayout=\\\"row\\\" style=\\\"margin-right:10px;margin-top:15px;\\\"\\n                        fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"padding-thu-tien\\\" kendoTooltip>\\n                        <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"ThuTienVaXuatThuoc()\\\"\\n                            title=\\\"Phím tắt: Thu tiền và xuất thuốc\\\">Thu tiền và xuất thuốc</button>\\n                        <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"ThuTien()\\\"\\n                            title=\\\"Phím tắt: Ctrl + S\\\">Thu\\n                            tiền</button>\\n                    </div>\\n                </div>\\n            </kendo-splitter-pane>\\n            <kendo-splitter-pane style=\\\"overflow:hidden;\\\">\\n                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px \\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n                    <app-grid #gridDanhSachMuaThuoc masterName=\\\"MuaThuoc\\\" [documentType]=\\\"documentType\\\" fxFlex=\\\"100%\\\"\\n                        [gridColumns]=\\\"gridColumns\\\" [gridDataSource]=\\\"dataSourcedanhsachThuoc\\\" [autoHeight]=\\\"true\\\"\\n                        [lazyLoadPage]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [useAddDeault]=\\\"false\\\"\\n                        [headerTemplate]=\\\"headerTemplate\\\" [useHeaderDefault]=\\\"false\\\" [allowSortDefault]=\\\"false\\\"\\n                        [pageable]=\\\"false\\\" useActionDefault=\\\"false\\\" [checkboxAble]=\\\"false\\\" [lazyLoadPage]=\\\"true\\\">\\n                    </app-grid>\\n                    <ng-template #donGiaTemplate let-dataItem>\\n                        <span *ngIf=\\\"dataItem.DonGia != null\\\">{{dataItem.DonGia | number:'0.2-2':'vi-VN'}}</span>\\n                        <span *ngIf=\\\"dataItem.DonGia == null\\\">{{0| number:'0.2-2':'vi-VN'}}</span>\\n                    </ng-template>\\n                    <ng-template #thanhTienTemplate let-dataItem>\\n                        <span>{{dataItem.ThanhTien | number:'0.2-2':'vi-VN'}}</span>\\n                    </ng-template>\\n                    <ng-template #footerTemplateDonGia let-dataItem> <span style=\\\"float: right;\\\">Tổng:</span>\\n                    </ng-template>\\n                    <ng-template #footerTemplateTongTienDonThuoc let-dataItem>\\n                        <span style=\\\"color:red\\\">{{tongTienHienThi | number:'0.2-2':'vi-VN'}}</span>\\n                    </ng-template>\\n                    <ng-template #soLuonTemplate let-dataItem>\\n                        <!-- <span >{{dataItem.SoLuongMua | number}}</span> -->\\n                        <app-textboxnumeric class=\\\"no-label numeric-in-grid\\\"\\n                        [disabled]=\\\"!dataItem.CheckedDefault\\\"\\n                        (modelChange)=\\\"modelChangeSoLuongMua($event , dataItem)\\\"\\n                        [(model)]=\\\"dataItem.SoLuongMua\\\">\\n                    </app-textboxnumeric>\\n                    </ng-template>\\n                    <ng-template #headerTemplate>\\n                        <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\"\\n                            class=\\\"px-2 py-3\\\">\\n                            <app-combobox #duocphamCombobox id=\\\"DuocPham\\\" fxFlex=\\\"55%\\\" fxFlex.sm=\\\"55%\\\"\\n                                [(model)]=\\\"themDuocPham.DuocPhamId\\\" [required]=\\\"true\\\"\\n                                (selectionChange)=\\\"onSelectDuocPham($event)\\\" [modelText]=\\\"themDuocPham.DuocPhamText\\\"\\n                                label=\\\"Dược phẩm\\\" class=\\\"item-no-padding\\\" [template]=\\\"dichVuGiuongTemplate\\\"\\n                                [templateHeader]=\\\"dichVuGiuongTemplateHeader\\\" url=\\\"QuayThuoc/GetDuocPham\\\"\\n                                [popupSettings]=\\\"{width: 900,popupClass:'item-no-padding'}\\\"\\n                                [validationerror]=\\\"'DuocPhamId' | validationerror:validationThuocErrors\\\"\\n                                (keyup)=\\\"onKeyEnterAddItem($event)\\\" (openCombobox)=\\\"openCombobox($event)\\\">\\n                                <ng-template #dichVuGiuongTemplateHeader let-dataItem>\\n                                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                                        <tr>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Loại</th>\\n                                            <th width=\\\"20%\\\" style=\\\"text-align: left;\\\">Tên</th>\\n                                            <th width=\\\"10%\\\">Hàm lượng</th>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Hoạt chất</th>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">ĐVT</th>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Đường dùng</th>\\n                                            <th>NSX</th>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">Tồn</th>\\n                                            <th width=\\\"10%\\\" style=\\\"text-align: left;\\\">HSD</th>\\n                                        </tr>\\n                                    </table>\\n                                </ng-template>\\n                                <ng-template #dichVuGiuongTemplate let-dataItem>\\n                                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                                        <tr>\\n                                            <td width=\\\"10%\\\">{{dataItem.Loai}}</td>\\n                                            <td width=\\\"20%\\\">{{dataItem.Ten}}</td>\\n                                            <td width=\\\"10%\\\">{{dataItem.HamLuong}}</td>\\n                                            <td width=\\\"10%\\\">{{dataItem.HoatChat}}</td>\\n                                            <td width=\\\"10%\\\">{{dataItem.DonViTinh}}</td>\\n                                            <td width=\\\"10%\\\">{{dataItem.DuongDung}}</td>\\n                                            <td>{{dataItem.NhaSanXuat}}</td>\\n                                            <td width=\\\"10%\\\" style=\\\"text-align: center;\\\">\\n                                                {{dataItem.SoLuongTon | number }}</td>\\n                                            <td width=\\\"10%\\\" style=\\\"text-align: left;\\\">{{dataItem.HanSuDung}}</td>\\n                                        </tr>\\n                                    </table>\\n                                </ng-template>\\n                            </app-combobox>\\n\\n                            <app-textboxnumeric label=\\\"Số lượng tồn\\\" fxFlex=\\\"15%\\\" [(model)]=\\\"themDuocPham.SoLuongTon\\\"\\n                                disabled=\\\"true\\\" moreClass=\\\"text-green bold\\\">\\n                            </app-textboxnumeric>\\n                            <app-textboxnumeric fxFlex=\\\"15%\\\" label=\\\"Số lượng\\\" [(model)]=\\\"themDuocPham.SoLuong\\\"\\n                                [required]=\\\"true\\\" [validationerror]=\\\"'SoLuong' | validationerror:validationThuocErrors\\\"\\n                                (keyup)=\\\"onKey($event)\\\">\\n                            </app-textboxnumeric>\\n                            <div fxFlex=\\\"10%\\\" class=\\\"mt-5\\\">\\n                                <button type=\\\"button\\\" color=\\\"primary\\\" class=\\\"mr-1\\\" (click)=\\\"them1()\\\"\\n                                    mat-raised-button>Thêm</button>\\n                            </div>\\n\\n                        </div>\\n                    </ng-template>\\n                    <ng-template #actionTemplate let-dataItem>\\n                        <div class=\\\"text-center\\\" *ngIf=\\\"dataItem.LoaiDonThuoc === 1\\\">\\n                            <p style=\\\"color: red\\\">\\n                                <mat-icon [icIcon]=\\\"icInfo\\\" class=\\\"mt-4\\\" kendoTooltip\\n                                    title=\\\"Thuốc bảo hiểm y tế không có trong kho.\\\">\\n                                </mat-icon>\\n                            </p>\\n                        </div>\\n                        <div class=\\\"text-center\\\" *ngIf=\\\"dataItem.ThuocTrongKhoExit == true\\\">\\n                            <p style=\\\"color: red\\\">\\n                                <mat-icon [icIcon]=\\\"icInfo\\\" class=\\\"mt-4\\\" kendoTooltip title=\\\"Thuốc trong kho đã hết.\\\">\\n                                </mat-icon>\\n                            </p>\\n                        </div>\\n                        <div class=\\\"text-center\\\" kendoTooltip *ngIf=\\\"dataItem.isNew==true\\\">\\n                            <button type=\\\"button\\\" mat-icon-button (click)=\\\"delete(dataItem)\\\">\\n                                <mat-icon [icIcon]=\\\"icDelete\\\"></mat-icon>\\n                            </button>\\n                        </div>\\n                    </ng-template>\\n\\n                </div>\\n            </kendo-splitter-pane>\\n        </kendo-splitter>\\n    </div>\\n</div>\"","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n    <app-grid [gridColumns]=\\\"gridColumns\\\" [gridDataSource]=\\\"dataSourcedanhsachThuoc\\\" [autoHeight]=\\\"true\\\"\\n        [lazyLoadPage]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [useAddDeault]=\\\"false\\\" [useHeaderDefault]=\\\"false\\\"\\n        [allowSortDefault]=\\\"false\\\" [pageable]=\\\"false\\\" useActionDefault=\\\"false\\\" [checkboxAble]=\\\"false\\\"\\n        [lazyLoadPage]=\\\"true\\\">\\n    </app-grid>\\n</div>\\n<br>\\n<div *ngIf=\\\"dataSourcedanhsachThuoc.data.length>0\\\">\\n    <button type=\\\"button\\\" color=\\\"primary\\\" (click)=\\\"GuiData()\\\" class=\\\"mr-1 float-right\\\" mat-raised-button>\\n        Xuất thuốc</button>\\n</div>\"","export default \"<div class=\\\"row\\\">\\n    <fieldset fxFlex=\\\"100%\\\" *ngIf=\\\"data != null\\\">\\n        <legend>THÔNG TIN HÀNH CHÍNH</legend>\\n        <div fxFlex=\\\"100%\\\">\\n            <ul class=\\\"inline\\\">\\n                <!-- <li>Mã TN:\\n                    <strong>{{data.MaTN}}</strong>\\n                </li> -->\\n                <li>Mã NB:\\n                    <strong>{{data.MaBN}}</strong>\\n                </li>\\n                <li>Họ tên:\\n                    <strong>{{data.HoTen}}</strong>\\n                </li>\\n                <li>Giới tính:\\n                    <strong>{{data.GioiTinhHienThi}}</strong>\\n                </li>\\n                <li>Năm sinh:\\n                    <strong>{{data.NamSinh}}</strong>\\n                </li>\\n                <li>Địa chỉ:\\n                    <strong>{{data.DiaChiDayDu}}</strong>\\n                </li>\\n\\n                <li>SĐT:\\n                    <strong>{{data.SoDienThoai}}</strong>\\n                </li>\\n                <li>Email:\\n                    <strong>{{data.Email}}</strong>\\n                </li>\\n            </ul>\\n        </div>\\n    </fieldset>\\n\\n\\n    <fieldset fxFlex=\\\"100%\\\" *ngIf=\\\"data == null\\\">\\n        <legend>THÔNG TIN HÀNH CHÍNH</legend>\\n        <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\"\\n            fxLayoutAlign=\\\"space-between\\\">\\n            <app-textbox id=\\\"Ten\\\" fxFlex=\\\"14%\\\" fxFlex.sm=\\\"14%\\\" maxlength=\\\"100\\\" [(model)]=\\\"thongTinBenhNhan.HoTen\\\" class=\\\"text-transform-uppercase\\\"\\n                [required]=\\\"true\\\" (modelChange)=\\\"onSaveTen()\\\" label=\\\"Họ tên\\\"\\n                [validationerror]=\\\"'HoTen' | validationerror:validationErrors\\\">\\n            </app-textbox>\\n\\n            <app-radio id=\\\"GioiTinh\\\" label=\\\"Giới tính\\\" fxFlex=\\\"11%\\\" fxFlex.sm=\\\"11%\\\"\\n                (modelChange)=\\\"onSaveGioiTinh($event)\\\" [(model)]=\\\"thongTinBenhNhan.GioiTinh\\\"\\n                [items]=\\\"[{Value:1,Text:'Nam'},{Value:2,Text:'Nữ'}]\\\">\\n            </app-radio>\\n\\n            <app-textboxnumeric id=\\\"NamSinh\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" label=\\\"Năm sinh\\\" [format]=\\\"'0'\\\"\\n                (modelChange)=\\\"onSaveNamSinh($event)\\\" [(model)]=\\\"thongTinBenhNhan.NamSinh\\\" [max]=\\\"9999\\\"\\n                [validationerror]=\\\"'NamSinh' | validationerror:validationErrors\\\">\\n            </app-textboxnumeric>\\n\\n            <!-- <app-textbox id=\\\"SDT\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" maxlength=\\\"12\\\" (modelChange)=\\\"onSaveSDT($event)\\\"\\n                [(model)]=\\\"thongTinBenhNhan.SoDienThoai\\\" label=\\\"Điện thoại\\\">\\n            </app-textbox> -->\\n            <app-textboxmask id=\\\"SDT\\\" onlynumber=\\\"true\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" label=\\\"Số điện thoại\\\" (modelChange)=\\\"onSaveSDT($event)\\\"\\n                 maxlength=\\\"10\\\" [(model)]=\\\"thongTinBenhNhan.SoDienThoai\\\" mask=\\\"000 000 0000\\\">\\n            </app-textboxmask>\\n            <app-combobox id=\\\"TinhThanhPho\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" (modelChange)=\\\"TinhThanhPhoChange($event)\\\"\\n                label=\\\"Tỉnh/Thành Phố\\\" url=\\\"QuayThuoc/GetTinhThanh\\\" hierarchyKeyToSend=\\\"tinhThanh\\\"\\n                [(model)]=\\\"thongTinBenhNhan.TinhThanhId\\\"  [modelText]=\\\"thongTinBenhNhan.TenTinhDisplay\\\" bind =\\\"true\\\" class=\\\"item-no-padding\\\" [template]=\\\"tinhThanhTemplate\\\"\\n                [templateHeader]=\\\"tinhThanhTemplateHeader\\\">\\n                <ng-template #tinhThanhTemplateHeader let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <th width=\\\"20%\\\">Mã</th>\\n                            <th>Tên</th>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n                <ng-template #tinhThanhTemplate let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <td width=\\\"20%\\\">{{dataItem.Ma}}</td>\\n                            <td>{{dataItem.Ten}}</td>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n            </app-combobox>\\n\\n            <app-combobox id=\\\"QuanHuyen\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" label=\\\"Quận/Huyện\\\"\\n                (modelChange)=\\\"QuanHuyenChange($event)\\\" [modelText]=\\\"thongTinBenhNhan.TenHuyenDisplay\\\" url=\\\"QuayThuoc/GetQuanHuyen\\\" hierarchyKeyToListen=\\\"tinhThanh\\\"\\n                hierarchyKeyToSend=\\\"quanHuyen\\\" [(model)]=\\\"thongTinBenhNhan.QuanHuyenId\\\" class=\\\"item-no-padding\\\" bind =\\\"true\\\"\\n                [template]=\\\"quanHuyenTemplate\\\" [templateHeader]=\\\"quanHuyenTemplateHeader\\\">\\n                <ng-template #quanHuyenTemplateHeader let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <th width=\\\"20%\\\">Mã</th>\\n                            <th>Tên</th>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n                <ng-template #quanHuyenTemplate let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <td width=\\\"20%\\\">{{dataItem.Ma}}</td>\\n                            <td>{{dataItem.Ten}}</td>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n            </app-combobox>\\n\\n            <app-combobox id=\\\"PhuongXa\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" label=\\\"Phường/Xã\\\" url=\\\"QuayThuoc/GetPhuongXa\\\"\\n                hierarchyKeyToListen=\\\"quanHuyen\\\" (modelChange)=\\\"PhuongXaChange($event)\\\" \\n                [(model)]=\\\"thongTinBenhNhan.PhuongXaId\\\" class=\\\"item-no-padding\\\" [template]=\\\"phuongXaTemplate\\\"\\n                [templateHeader]=\\\"phuongXaTemplateHeader\\\">\\n                <ng-template #phuongXaTemplateHeader let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <th width=\\\"20%\\\">Mã</th>\\n                            <th>Tên</th>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n                <ng-template #phuongXaTemplate let-dataItem>\\n                    <table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n                        <tr>\\n                            <td width=\\\"20%\\\">{{dataItem.Ma}}</td>\\n                            <td>{{dataItem.Ten}}</td>\\n                        </tr>\\n                    </table>\\n                </ng-template>\\n            </app-combobox>\\n\\n            <app-textbox id=\\\"DiaChi\\\" fxFlex=\\\"12.5%\\\" fxFlex.sm=\\\"12.5%\\\" maxlength=\\\"200\\\"\\n                (modelChange)=\\\"onSaveDiaChi($event)\\\" [(model)]=\\\"thongTinBenhNhan.DiaChi\\\" label=\\\"Địa chỉ\\\">\\n            </app-textbox>\\n        </div>\\n    </fieldset>\\n</div>\"","export default \"<vex-page-layout>\\n    <vex-page-layout-header class=\\\"pb-16\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center start\\\">\\n        <div [class.px-gutter]=\\\"true\\\" class=\\\"w-full flex justify-between\\\">\\n            <vex-breadcrumbs [crumbs]=\\\"\\n                    [\\n                    {Title:'Nhà Thuốc',Path:''},\\n                    {Title:'Khách vãng lai',Path:'/nha-thuoc', Active:true}\\n                    ]\\\">\\n            </vex-breadcrumbs>\\n            <app-hot-key [keys]=\\\"[\\n            {Key:'Ctrl + F1',Description:'Di chuyển tới và mở tab Mua thuốc'},\\n            {Key:'Ctrl + F2',Description:'Di chuyển tới và mở tab Chờ xuất thuốc'},\\n            {Key:'Ctrl + S',Description:'Thu tiền'},\\n            {Key:'Esc',Description:'Quay lại', End:true}\\n            ]\\\"></app-hot-key>\\n        </div>\\n    </vex-page-layout-header>\\n\\n    <vex-page-layout-content [class.px-gutter]=\\\"true\\\" class=\\\"-mt-6\\\">\\n        <div class=\\\"-mt-16\\\">\\n            <div fxLayout=\\\"row\\\" fxLayout.lt-md=\\\"column\\\" fxLayoutGap=\\\"20px\\\">\\n                <div class=\\\"card\\\" fxFlex=\\\"100%\\\">\\n                    <div class=\\\"px-6 py-4\\\" fxLayout=\\\"column\\\">\\n                        <app-quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh (valueChange)=\\\"switchValueChanges($event)\\\"\\n                            [validationErrors]=\\\"validationErrorForThongTin\\\" [donThuocId]=\\\"donThuocIds\\\" [MaBN]=\\\"MaBN\\\"\\n                            [TenBenhNhan]=\\\"TenBenhNhan\\\" [SDT]=\\\"SDT\\\"\\n                            [ThongTinBenhNhanDaThuTienData]=\\\"ThongTinBenhNhanDaThuTien\\\">\\n                        </app-quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh>\\n                        <kendo-tabstrip fxFlex=\\\"100%\\\" class=\\\"content-has-border has-padding mt-3\\\"\\n                            [keepTabContent]=\\\"true\\\" (tabSelect)=\\\"onTabSelect($event)\\\" #tabVangLai>\\n                            <kendo-tabstrip-tab [selected]=\\\"kendoTabSelected===1\\\">\\n                                <ng-template kendoTabContent>\\n                                    <app-quay-thuoc-khach-vang-lai-cho-thanh-toan\\n                                        [thongTinKhachVangLai]=\\\"thongTinBenhNhan\\\"\\n                                        (valueChangeThuTien)=\\\"switchValueChangesChoThanhToan($event)\\\"\\n                                        [donThuocId]=\\\"donThuocIds\\\" [ttCheck]=\\\"ttCheck\\\" (changeTab)=\\\"changeTab($event)\\\"\\n                                        (MaTiepNhanBenhNhanDaThuTien)=\\\"MaTiepNhanBenhNhanDaThuTien($event)\\\"\\n                                        (danhSachChuaThanhToan)=\\\"danhSachChuaThanhToan($event)\\\">\\n                                    </app-quay-thuoc-khach-vang-lai-cho-thanh-toan>\\n                                </ng-template>\\n                                <ng-template kendoTabTitle>\\n                                    <div kendoTooltip title=\\\"Phím tắt: Ctrl + F1\\\">\\n                                        Mua thuốc\\n                                    </div>\\n                                </ng-template>\\n                            </kendo-tabstrip-tab>\\n                            <kendo-tabstrip-tab [selected]=\\\"kendoTabSelected===2\\\">\\n                                <ng-template kendoTabContent>\\n                                    <app-quay-thuoc-khach-vang-lai-cho-xuat-thuoc\\n                                        [ThongTinBenhNhanDaThuTienData]=\\\"ThongTinBenhNhanDaThuTien\\\" [ttCheck]=\\\"ttCheck\\\">\\n                                    </app-quay-thuoc-khach-vang-lai-cho-xuat-thuoc>\\n                                </ng-template>\\n                                <ng-template kendoTabTitle>\\n                                    <div kendoTooltip title=\\\"Phím tắt: Ctrl + F2\\\">\\n                                        Chờ xuất thuốc\\n                                    </div>\\n                                </ng-template>\\n                            </kendo-tabstrip-tab>\\n                        </kendo-tabstrip>\\n                        <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"mt-2\\\" kendoTooltip>\\n                            <!-- <button type=\\\"button\\\" (click)=\\\"inXemTruocBangKeThuoc()\\\" mat-raised-button\\n                                title=\\\"In Bảng Kê\\\">\\n                                In Bảng Kê\\n                            </button> -->\\n                            <button type=\\\"button\\\" (click)=\\\"Huy()\\\" mat-raised-button title=\\\"Phím tắt: ESC\\\">\\n                                Quay lại\\n                            </button>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </vex-page-layout-content>\\n</vex-page-layout>\"","export default \"<app-grid #gridD [gridColumns]=\\\"gridChildColumnsChoThanhToan\\\" [documentType]=\\\"documentType\\\" [useAddDeault]=\\\"false\\\"\\n    [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\" [lazyLoadPage]=\\\"true\\\"\\n    [sort]=\\\"sortConfig\\\" [urlGetData]=\\\"urlGetDataGridChild\\\" [urlGetTotalPage]=\\\"urlGetTotalPageGridChild\\\"\\n    heightToolbar=\\\"272\\\" [additionalSearchString]=\\\"queryStringSearchUuTien\\\" [detailTemplate]=\\\"detailTemplate\\\"\\n    (extOnDataBound)=\\\"onDataBound($event)\\\">\\n</app-grid>\\n<ng-template #TongGiaTriDonThuocTemplate let-dataItem>\\n    <strong class=\\\"text-color\\\" style=\\\"color:red\\\" *ngIf=\\\"dataItem.TrangThaiHienThi=='Chưa thanh toán'\\\">\\n        {{dataItem.TongGiaTriDonThuoc | number:'0.2-2':'vi-VN'}}</strong>\\n    <strong class=\\\"text-color\\\" style=\\\"color:blue\\\" *ngIf=\\\"dataItem.TrangThaiHienThi=='Đã thanh toán'\\\">\\n        {{dataItem.TongGiaTriDonThuoc | number:'0.2-2':'vi-VN'}}</strong>\\n</ng-template>\\n<ng-template #SoTienChoThanhToanTemplate let-dataItem>\\n    <strong class=\\\"text-color\\\" style=\\\"color:red\\\" *ngIf=\\\"dataItem.TrangThaiHienThi=='Chưa thanh toán'\\\">\\n        {{dataItem.SoTienChoThanhToan | number:'0.2-2':'vi-VN'}}</strong>\\n    <strong class=\\\"text-color\\\" style=\\\"color:blue\\\" *ngIf=\\\"dataItem.TrangThaiHienThi=='Đã thanh toán'\\\">\\n        {{dataItem.SoTienChoThanhToan | number:'0.2-2':'vi-VN'}}</strong>\\n</ng-template>\\n<ng-template #trangThaiTemplate let-dataItem>\\n    <strong class=\\\"text-color\\\" style=\\\"color:red\\\" *ngIf=\\\"dataItem.TrangThaiHienThi=='Chưa thanh toán'\\\">\\n        {{dataItem.TrangThaiHienThi}}</strong>\\n    <strong class=\\\"text-color\\\" style=\\\"color:blue\\\" *ngIf=\\\"dataItem.TrangThaiHienThi =='Đã thanh toán'\\\">\\n        {{dataItem.TrangThaiHienThi}}</strong>\\n</ng-template>\\n\\n<ng-template #actionTemplate let-dataItem>\\n    <div class=\\\"text-center\\\" kendoTooltip>\\n        <button type=\\\"button\\\" color=\\\"primary\\\" (click)=\\\"Xem(dataItem)\\\" class=\\\"mr-1 float-right\\\" mat-raised-button>\\n            Xem</button>\\n    </div>\\n</ng-template>\\n\\n<ng-template #maTNTemplate let-dataItem>\\n    <a (click)=\\\"Xem(dataItem)\\\">{{dataItem.MaTN}}</a>\\n</ng-template>\\n<ng-template #detailTemplate let-dataItem>\\n    <app-grid baseRoute=\\\"\\\" [gridColumns]=\\\"gridChild\\\" [documentType]=\\\"documentType\\\" [useAddDeault]=\\\"false\\\"\\n        [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\" [lazyLoadPage]=\\\"true\\\"\\n        [urlGetData]=\\\"urlGetDataChild\\\"\\n        [additionalSearchString]=\\\"dataItem.Id + '-' +dataItem.DateStart + '-' + dataItem.DateEnd\\\" [autoHeight]=\\\"true\\\"\\n        [pageable]=\\\"false\\\">\\n    </app-grid>\\n</ng-template>\\n<ng-template #nhomGroupHeaderTemplate let-value=\\\"value\\\">\\n    <strong>{{value}}</strong>\\n</ng-template>\\n<ng-template #templatePrint let-dataItem>\\n    <span *ngIf=\\\"dataItem.DonThuocBacSiKeToa == false\\\">\\n        <button kendoTooltip title=\\\"In phiếu\\\"\\n            (click)=\\\"PrinAllDonThuocBenhNhan(dataItem.DonThuocThanhToanId, dataItem.LoaiDonThuoc , dataItem.YeuCauKhambenhId)\\\"\\n            mat-icon-button type=\\\"button\\\">\\n            <mat-icon [icIcon]=\\\"icPrint\\\"></mat-icon>\\n        </button>\\n    </span>\\n</ng-template>\\n<ng-template #SoTienThuoctemplate let-dataItem>\\n    <span style=\\\"color:red\\\"> {{dataItem.SoTienDisPlay}}</span>\\n</ng-template>\\n<ng-template #TinhTrangThuoctemplate let-dataItem>\\n    <span style=\\\"color:red\\\" *ngIf=\\\"dataItem.TinhTrang =='Chưa xuất thuốc' || dataItem.TinhTrang =='Chưa thanh toán'\\\">\\n        {{dataItem.TinhTrang}}</span>\\n    <span style=\\\"color:blue\\\" *ngIf=\\\"dataItem.TinhTrang =='Đã thanh toán'\\\"> {{dataItem.TinhTrang}}</span>\\n    <span style=\\\"color: blue;\\\" *ngIf=\\\"dataItem.TinhTrang =='Đã xuất thuốc'\\\"> {{dataItem.TinhTrang}}</span>\\n</ng-template>\\n<ng-template #nguoiDungKhongMuaThuocTemplate let-dataItem>\\n    <button *ngIf=\\\"dataItem.TrangThai === 1\\\"  type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"nguoiBenhKhongMuaThuoc(dataItem)\\\"\\n     title=\\\"Phím tắt: Người bệnh không mua thuốc\\\">NB không mua thuốc</button>\\n</ng-template>\"","export default \"<vex-page-layout>\\n    <vex-page-layout-header class=\\\"pb-16\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center start\\\">\\n        <div [class.px-gutter]=\\\"true\\\" class=\\\"w-full flex justify-between\\\">\\n            <vex-breadcrumbs [crumbs]=\\\"\\n                    [\\n                    {Title:'Nhà Thuốc',Path:''},\\n                    {Title:'Mua thuốc',Path:'/nha-thuoc',queryParams: { page: this.ttcheck,hoQuerysearch:false},Active:true}\\n                    ]\\\">\\n            </vex-breadcrumbs>\\n            <app-hot-key [keys]=\\\"[\\n            {Key:'Ctrl + F1',Description:'Di chuyển tới và mở tab Mua thuốc'},\\n            {Key:'Ctrl + F2',Description:'Di chuyển tới và mở tab Chờ xuất thuốc'},\\n            {Key:'Ctrl + S',Description:'Thu tiền'},\\n            {Key:'Esc',Description:'Quay lại', End:true}\\n            ]\\\"></app-hot-key>\\n        </div>\\n    </vex-page-layout-header>\\n\\n    <vex-page-layout-content [class.px-gutter]=\\\"true\\\" class=\\\"-mt-6\\\">\\n        <div class=\\\"-mt-16\\\">\\n            <div fxLayout=\\\"row\\\" fxLayout.lt-md=\\\"column\\\" fxLayoutGap=\\\"20px\\\">\\n                <div class=\\\"card\\\" fxFlex=\\\"100%\\\">\\n                    <div class=\\\"px-6 py-4\\\" fxLayout=\\\"column\\\">\\n                        <app-quay-thuoc-thong-tin-hanh-chinh [benhnhanThongTin]=\\\"benhnhanThongTin\\\">\\n                        </app-quay-thuoc-thong-tin-hanh-chinh>\\n                        <!-- class=\\\"content-has-border\\\" -->\\n                        <kendo-tabstrip fxFlex=\\\"100%\\\" class=\\\"content-has-border has-padding mt-3\\\" (tabSelect)=\\\"onTabSelect($event)\\\" [keepTabContent]=\\\"true\\\" #tabQuayThuoc>\\n                            <kendo-tabstrip-tab [selected]=\\\"tt==1\\\">\\n\\n                                <ng-template kendoTabContent>\\n                                    <app-quay-thuoc-thong-tin-bao-hiem-tu-nhan [tongTienBNThanhToan]=\\\"tongTienBNThanhToan\\\" (valueChangeBaoHiem)=\\\"getBaoHiem($event)\\\" (valueChangeMg)=\\\"getMg($event)\\\">\\n                                    </app-quay-thuoc-thong-tin-bao-hiem-tu-nhan>\\n\\n                                    <app-quay-thuoc-hinh-thuc-thanh-toan [benhnhanThongTin]=\\\"benhnhanThongTin\\\" (afterChangedCongNo)=\\\"afterChangedCongNo()\\\" (changeTab)=\\\"changeTab()\\\" (afterChangedMg)=\\\"afterChangedMienGiam()\\\" [apDungCongNoThuoc]=\\\"apDungCongNoThuoc\\\" [thongTinTam]=\\\"thongTinTam\\\"\\n                                        [apDungMienGiam]=\\\"apDungMienGiam\\\" [viTri]=\\\"viTri\\\" [thongTinMienGiamVos]=\\\"thongTinMienGiamVos\\\" (danhSachChuaThanhToan)=\\\"danhSachChuaThanhToan($event)\\\">\\n                                    </app-quay-thuoc-hinh-thuc-thanh-toan>\\n\\n                                </ng-template>\\n                                <ng-template kendoTabTitle>\\n                                    <div kendoTooltip title=\\\"Phím tắt: Ctrl + F1\\\">\\n                                        Mua thuốc-vật tư\\n                                    </div>\\n                                </ng-template>\\n                            </kendo-tabstrip-tab>\\n                            <kendo-tabstrip-tab [selected]=\\\"tt==2\\\">\\n                                <ng-template kendoTabContent>\\n                                    <app-quay-thuoc-cho-xuat-thuoc [flagOnce]=\\\"flagAllowLoadThuoc\\\" [trangThaiXuatThuoc]=\\\"tt\\\" [ttcheck]=\\\"ttcheck\\\">\\n                                    </app-quay-thuoc-cho-xuat-thuoc>\\n                                </ng-template>\\n                                <ng-template kendoTabTitle>\\n                                    <div kendoTooltip title=\\\"Phím tắt: Ctrl + F2\\\">\\n                                        Chờ xuất thuốc-vật tư\\n                                    </div>\\n                                </ng-template>\\n                            </kendo-tabstrip-tab>\\n                        </kendo-tabstrip>\\n                        <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"mt-2\\\" kendoTooltip>\\n                            <button type=\\\"button\\\"  (click)=\\\"inXemTruocBangKeThuoc()\\\" mat-raised-button title=\\\"In Bảng Kê\\\">\\n                               In Bảng Kê\\n                            </button>\\n                            <button type=\\\"button\\\" (click)=\\\"Huy()\\\" mat-raised-button title=\\\"Phím tắt: ESC\\\">\\n                                Quay lại\\n                            </button>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </vex-page-layout-content>\\n</vex-page-layout>\"","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"0 grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n    <fieldset fxFlex=\\\"100%\\\" class=\\\"mb-3\\\" *ngIf=\\\"checkHaveBHTN === true\\\">\\n        <legend>Thông tin bảo hiểm tư nhân</legend>\\n        <div class=\\\" mt-1\\\">\\n            <app-grid [gridColumns]=\\\"gridChildColumns2\\\" [documentType]=\\\"documentType\\\" [useAddDeault]=\\\"false\\\"\\n                class=\\\"k-grid-border\\\" [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\"\\n                [lazyLoadPage]=\\\"true\\\" [gridDataSource]=\\\"dataSourceDanhSachBHTN\\\" [autoHeight]=\\\"true\\\" style=\\\"width: 1px;\\\"\\n                [pageable]=\\\"false\\\">\\n            </app-grid>\\n        </div>\\n    </fieldset>\\n    <!-- <fieldset *ngIf=\\\"!khachVangLaiMuaThuoc\\\" fxFlex=\\\"100%\\\" class=\\\"mb-3\\\">\\n        <legend>Thông tin miễn giảm</legend>\\n\\n        <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n            start thông tim voucher\\n            <div fxFlex=\\\"15%\\\">\\n                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n                    <app-checkbox id=\\\"loaiVoucher\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" value=\\\"true\\\"\\n                        [disabled]=\\\"disabledVoucher\\\" [model]=\\\"flagEnableVoucher\\\" (modelChange)=\\\"onChangeVoucher($event)\\\"\\n                        label=\\\"Voucher\\\">\\n                    </app-checkbox>\\n                    <app-multiselect *ngIf=\\\"flagEnableVoucher\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Mã Voucher\\\"\\n                        [(model)]=\\\"listVouchers\\\" [required]=\\\"true\\\"\\n                        url=\\\"ThuNgan/GetMaVoucher?loaiVoucher={{loaiVoucher}}&yeucauTiepNhanId={{idMYCTN}}\\\"\\n                        (openChange)=\\\"onOpenChange()\\\" (modelChange)=\\\"onSelectChangeVoucher($event)\\\"\\n                        (valueChange)=\\\"valueChangeTheVoucher($event)\\\"\\n                        [validationerror]=\\\"'ListVouchers' | validationerror:quayThuocValidationErrors\\\" #voucherList>\\n                    </app-multiselect>\\n                </div>\\n            </div>\\n            end thông tim voucher\\n\\n\\n            thông tin miễm giảm thêm\\n            <div fxFlex=\\\"{{flagEnableMGThem?'75%':'10%'}}\\\">\\n                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n                    <app-checkbox id=\\\"MiemGiamThem\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" value=\\\"true\\\"\\n                        [model]=\\\"flagEnableMGThem\\\" [disabled]=\\\"disabledMGThem\\\" (modelChange)=\\\"onChangeMienGiam($event)\\\"\\n                        label=\\\"MG thêm\\\">\\n                    </app-checkbox>\\n                </div>\\n                <div *ngIf=\\\"flagEnableMGThem\\\" fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"10px grid\\\"\\n                    fxLayoutGap.lt-sm=\\\"0\\\">\\n                    <div fxFlex=\\\"13%\\\">\\n                        <mat-radio-button name=\\\"loaiMG\\\" style=\\\"position: absolute;z-index: 1;\\\" [checked]=\\\"soTienMgCheck\\\"\\n                            (change)=\\\"onChangeLoaiMg(1)\\\" value=\\\"chon-miem-giam\\\">\\n                            Số tiền MG <span style=\\\"color: red;\\\">*</span>\\n                        </mat-radio-button>\\n                        <app-textboxnumeric [(model)]=\\\"thongTinMienGiamThem.SoTienMG\\\" class=\\\"mb-0 pb-0\\\"\\n                            [isFormatCurrenly]=\\\"true\\\"\\n                            [validationerror]=\\\"'SoTienMG' | validationerror:quayThuocValidationErrors\\\">\\n                        </app-textboxnumeric>\\n                    </div>\\n                    <div fxFlex=\\\"13%\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap.lt-sm=\\\"0\\\" *ngIf=\\\"!checkHiddenSoTienConLai\\\">\\n                        <app-textboxnumeric fxFlex=\\\"100%\\\" [disabled]=\\\"true\\\" label=\\\"Số tiền còn lại\\\" class=\\\"green\\\"\\n                            [isFormatCurrenly]=\\\"true\\\" [spinners]=\\\"false\\\"\\n                            [(model)]=\\\"thongTinMienGiamThem.SoTienMGConLai\\\">\\n                        </app-textboxnumeric>\\n                    </div>\\n                    <div fxFlex=\\\"13%\\\">\\n                        <mat-radio-button name=\\\"loaiMG\\\" [checked]=\\\"tiLeMgCheck\\\" style=\\\"position: absolute;z-index: 1;\\\"\\n                            (change)=\\\"onChangeLoaiMg(2)\\\" value=\\\"chon-miem-giam\\\">\\n                            % MG <span style=\\\"color: red;\\\">*</span>\\n                        </mat-radio-button>\\n                        <app-textboxnumeric fxFlex=\\\"100%\\\" [disabled]=\\\"disabledTiLeMG\\\" max=\\\"100\\\"\\n                            [(model)]=\\\"thongTinMienGiamThem.TiLeMienGiam\\\" class=\\\"mb-0 pb-0\\\"\\n                            style=\\\"margin-top: 1px !important;\\\"\\n                            [validationerror]=\\\"'TiLeMienGiam' | validationerror:quayThuocValidationErrors\\\">\\n                        </app-textboxnumeric>\\n                    </div>\\n                    <div fxFlex=\\\"17%\\\" fxFlex.sm=\\\"17%\\\">\\n                        <app-textarea id=\\\"MienGiamConLai\\\" [required]=\\\"true\\\" label=\\\"Lý do MG\\\"\\n                            [(model)]=\\\"thongTinMienGiamThem.LyDoMiemGiam\\\" minHeight=\\\"20\\\"\\n                            [validationerror]=\\\"'LyDoMienGiam' | validationerror:quayThuocValidationErrors\\\">\\n                        </app-textarea>\\n                    </div>\\n                    <div fxFlex=\\\"27%\\\" fxFlex.sm=\\\"27%\\\">\\n                        <app-upload id=\\\"Upload\\\" label=\\\"File đính kèm\\\" [required]=\\\"true\\\"\\n                            [model]=\\\"thongTinMienGiamThem.TaiLieuDinhKemGiayMiemGiam\\\"\\n                            (uploadFileDone)=\\\"uploadFileDone($event)\\\"\\n                            [validationerror]=\\\"'TaiLieuDinhKem' | validationerror:quayThuocValidationErrors\\\">\\n                        </app-upload>\\n                    </div>\\n                    <app-combobox id=\\\"NguoiDuyet\\\" fxFlex=\\\"17%\\\" fxFlex.sm=\\\"17%\\\"\\n                        [(model)]=\\\"thongTinMienGiamThem.NhanVienDuyetMienGiamThemId\\\"\\n                        [modelText]=\\\"thongTinMienGiamThem.TenNhanVienDuyet\\\" label=\\\"Người duyệt\\\"\\n                        class=\\\"item-no-padding\\\" url=\\\"NhanVien/GetListLookupNhanVien\\\">\\n                    </app-combobox>\\n                </div>\\n            </div>\\n            thông tin Áp dụng\\n            <div fxFlex=\\\"10%\\\">\\n                <button mat-raised-button color=\\\"primary\\\" (click)=\\\"onApplyMGThem()\\\" *ngIf=\\\"flagApDung==true\\\"\\n                    class=\\\"mt-12\\\">\\n                    Áp dụng\\n                </button>\\n            </div>\\n        </div>\\n    </fieldset> -->\\n    <ng-template #actionTemplateSTCongNo let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n        <app-textboxnumeric class=\\\"no-label\\\" [step]=\\\"100\\\" [(model)]=\\\"dataItem.SoTien\\\" \\n             decimals=\\\"2\\\" [format]=\\\"format\\\" min=\\\"0.00\\\"\\n            (keyup)=\\\"onKeyCongNo($event, rowIndex)\\\">\\n        </app-textboxnumeric>\\n    </ng-template>\\n    <ng-template #actionTemplateSubmitCongNo let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n        <button color=\\\"primary\\\" mat-raised-button mat-button (click)=\\\"ApDungCongNo(rowIndex)\\\" cdkFocusInitial>Áp\\n            dụng</button>\\n    </ng-template>\\n</div>\\n\"","export default \"<div class=\\\"row\\\" >\\n    <fieldset fxFlex=\\\"100%\\\" *ngIf=\\\"MaBN == null\\\">\\n        <legend>THÔNG TIN HÀNH CHÍNH</legend>\\n        <div fxFlex=\\\"100%\\\">\\n            <ul class=\\\"inline\\\">\\n                <li>Mã TN:\\n                    <strong>{{benhnhanThongTin.MaYeuCauTiepNhan}}</strong>\\n                </li>\\n                <li>Mã NB:\\n                    \\n                    <strong>{{benhnhanThongTin.MaBN}}</strong>\\n                </li>\\n                <li>Họ tên:\\n                    <strong>{{benhnhanThongTin.HoTen}}</strong>\\n                </li>\\n                <li>Giới tính:\\n                    <strong>{{benhnhanThongTin.GioiTinhHienThi}}</strong>\\n                </li>\\n                <li>Năm sinh:\\n                    <strong>{{benhnhanThongTin.NamSinh}}</strong>\\n                </li>\\n                <li>Địa chỉ:\\n                    <strong>{{benhnhanThongTin.DiaChiDayDu}}</strong>\\n                </li>\\n               \\n                <li>SĐT:\\n                    <strong>{{benhnhanThongTin.SoDienThoai}}</strong>\\n                </li>\\n                <li>Email:\\n                    <strong>{{benhnhanThongTin.Email}}</strong>\\n                </li>\\n               \\n            </ul>\\n        </div>\\n    </fieldset>\\n    <fieldset fxFlex=\\\"100%\\\" *ngIf=\\\"MaBN != null\\\">\\n        <legend>THÔNG TIN HÀNH CHÍNH</legend>\\n        <div fxFlex=\\\"100%\\\" >\\n            <ul class=\\\"inline\\\">\\n                <li>Mã NB:\\n                    \\n                    <strong>{{MaBN}}</strong>\\n                </li>\\n                <li>Họ tên:\\n                    <strong>{{data.HoTen}}</strong>\\n                </li>\\n                <li>Giới tính:\\n                    <strong>{{data.GioiTinhHienThi}}</strong>\\n                </li>\\n                <li>Năm sinh:\\n                    <strong>{{data.NamSinh}}</strong>\\n                </li>\\n                <li>Địa chỉ:\\n                    <strong>{{data.DiaChiDayDu}}</strong>\\n                </li>\\n               \\n                <li>SĐT:\\n                    <strong>{{data.SoDienThoai}}</strong>\\n                </li>\\n                <li>Email:\\n                    <strong>{{data.Email}}</strong>\\n                </li>\\n               \\n            </ul>\\n        </div>\\n    </fieldset>\\n</div>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div>{{Title}}</div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close('No answer',1)\\\" tabindex=\\\"-1\\\" >\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n\\n<mat-dialog-content>\\n    <app-grid\\n    [gridColumns]=\\\"gridChildColumns2\\\" [documentType]=\\\"documentType\\\" [useAddDeault]=\\\"false\\\" [gridDataSource]=\\\"data\\\"\\n    [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\" [lazyLoadPage]=\\\"true\\\"\\n     [autoHeight]=\\\"true\\\" [pageable]=\\\"false\\\" [detailTemplate]=\\\"detailTemplate\\\">\\n    </app-grid>\\n    <ng-template #actionTemplate let-dataItem>\\n        <div class=\\\"text-center\\\" kendoTooltip>\\n            <button type=\\\"button\\\"  color=\\\"primary\\\" mat-raised-button (click)=\\\"close(dataItem,2)\\\" tabindex=\\\"-1\\\">\\n                Chọn\\n            </button>\\n        </div>\\n    </ng-template>\\n    <ng-template #detailTemplate let-dataItem>\\n        <app-grid baseRoute=\\\"\\\"\\n                        [gridColumns]=\\\"gridChild\\\" [documentType]=\\\"documentType\\\" [useAddDeault]=\\\"false\\\"\\n                        [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\" [lazyLoadPage]=\\\"true\\\"\\n                        [urlGetData]=\\\"urlGetDataChild\\\" [additionalSearchString]=\\\"dataItem.Id + '-' +dataItem.DateStart + '-' + dataItem.DateEnd\\\"\\n                        [autoHeight]=\\\"true\\\" [pageable]=\\\"false\\\"  >\\n                    </app-grid>\\n    </ng-template>\\n    <ng-template #nhomGroupHeaderTemplate let-value=\\\"value\\\">\\n        <strong>{{value}}</strong>\\n    </ng-template>\\n    <ng-template #templatePrint let-dataItem >\\n        <span *ngIf=\\\"dataItem.DonThuocBacSiKeToa == false\\\">\\n            <button  kendoTooltip title=\\\"In phiếu\\\"\\n            (click)=\\\"PrinAllDonThuocBenhNhan(dataItem.DonThuocThanhToanId)\\\" mat-icon-button type=\\\"button\\\">\\n            <mat-icon [icIcon]=\\\"icPrint\\\"></mat-icon>\\n        </button>\\n        </span>\\n    </ng-template>\\n    <ng-template #SoTienThuoctemplate let-dataItem>\\n        <span style=\\\"color:red\\\"> {{dataItem.SoTienDisPlay}}</span>\\n    </ng-template>\\n    <ng-template #TinhTrangThuoctemplate let-dataItem>\\n        <span style=\\\"color:red\\\" *ngIf=\\\"dataItem.TinhTrang =='Chưa xuất thuốc' || dataItem.TinhTrang =='Chưa thanh toán'\\\"> {{dataItem.TinhTrang}}</span>\\n        <span style=\\\"color:blue\\\" *ngIf=\\\"dataItem.TinhTrang =='Đã thanh toán'\\\"> {{dataItem.TinhTrang}}</span>\\n    </ng-template>\\n</mat-dialog-content>\\n\"","export default \"<fieldset class=\\\"m-0\\\">\\n    <legend>TÌM NGƯỜI BỆNH</legend>\\n    <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n        <div fxFlex=\\\"300px\\\" fxFlex.sm=\\\"20%\\\" style=\\\"position: relative;\\\">\\n            <div style=\\\"background-color: rgba(0, 0, 0, 0.04);height: 100%;\\n            width: 100% !important;\\n            border-radius: 4px 4px 0 0;\\n            padding: 0.75em 0.75em 0 0.75em;\\n            border-bottom: 1px solid rgba(82, 63, 105, 0.42);\\\">\\n                <app-checkbox name=\\\"dang-thanh-toan\\\" (modelChange)=\\\"checkTrangThai($event,1)\\\" fxFlex=\\\"150px\\\"\\n                    fxFlex.lt-md=\\\"auto\\\" fxHide.xs fxLayout=\\\"row\\\" fxLayoutAlign=\\\"start center\\\"\\n                    [(model)]=\\\"kiemTraDanhSachThanhToan\\\" value=\\\"dangthanhtoan\\\" label=\\\"Chờ thanh toán\\\">\\n                </app-checkbox>\\n                <app-checkbox name=\\\"da-thanh-toan\\\" (modelChange)=\\\"checkTrangThai($event,2)\\\"\\n                    [(model)]=\\\"kiemTraDanhSachDaThanhToan\\\" value=\\\"dathanhtoan\\\" fxFlex=\\\"150px\\\" fxFlex.lt-md=\\\"auto\\\"\\n                    fxHide.xs fxLayout=\\\"row\\\" fxLayoutAlign=\\\"start center\\\" label=\\\"Đã thanh toán\\\">\\n                </app-checkbox>\\n            </div>\\n        </div>\\n        <div fxFlex=\\\"10%\\\" fxFlex.sm=\\\"10%\\\" style=\\\"position: relative;\\\">\\n            <app-textbox id=\\\"SoTheBHYT\\\" fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Mã NB\\\" [(model)]=\\\"timKiem.MaBenhNhan\\\"\\n                (keyup)=\\\"onKey($event)\\\" [isAutoFocus]=\\\"true\\\" (blurChange)=\\\"blurChange($event, true)\\\"\\n                (modelChange)=\\\"searchChangeMaBN($event)\\\">\\n            </app-textbox>\\n            <button style=\\\"position: absolute;right: 21px;margin-top: 10px;\\\" (click)=\\\"QuetMaQRCodeClick()\\\"\\n                color=\\\"primary\\\" mat-mini-fab type=\\\"button\\\" kendoTooltip title=\\\"Quét mã vạch thẻ BHYT\\\">\\n                <img src=\\\"assets/img/barcode.png\\\" alt=\\\"Scan barcode\\\" />\\n            </button>\\n\\n        </div>\\n        <!-- <app-textbox id=\\\"MaBN\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"40%\\\" maxlength=\\\"4000\\\" [(model)]=\\\"timKiem.MaBenhNhan\\\"\\n            label=\\\"Mã NB\\\" [validationerror]=\\\"'MaBN' | validationerror:validationErrors\\\">\\n        </app-textbox> -->\\n        <app-textbox id=\\\"MaTN\\\" fxFlex=\\\"10%\\\" fxFlex.sm=\\\"15%\\\" maxlength=\\\"4000\\\" [(model)]=\\\"timKiem.MaTiepNhan\\\"\\n            style=\\\"padding-left: 10px;\\\" (keyup)=\\\"onKey($event)\\\" label=\\\"Mã TN\\\"\\n            (modelChange)=\\\"searchChangeMaTN($event)\\\" [validationerror]=\\\"'MaTN' | validationerror:validationErrors\\\">\\n        </app-textbox>\\n        <app-textbox id=\\\"HoTen\\\" fxFlex=\\\"15%\\\" fxFlex.sm=\\\"15%\\\" maxlength=\\\"4000\\\" [(model)]=\\\"timKiem.HoTen\\\"\\n            style=\\\"padding-left: 10px;\\\" (keyup)=\\\"onKey($event)\\\" label=\\\"Họ Tên\\\"\\n            [validationerror]=\\\"'HoTen' | validationerror:validationErrors\\\">\\n        </app-textbox>\\n        <!-- <app-textbox id=\\\"DienThoai\\\" fxFlex=\\\"10%\\\" fxFlex.sm=\\\"10%\\\" maxlength=\\\"4000\\\" [(model)]=\\\"timKiem.SoDienThoai\\\"\\n            style=\\\"padding-left: 10px;\\\" (keyup)=\\\"onKey($event)\\\" label=\\\"Điện thoại\\\"\\n            [validationerror]=\\\"'DienThoai' | validationerror:validationErrors\\\">\\n        </app-textbox> -->\\n        <app-textboxmask id=\\\"SoDienThoai\\\" onlynumber=\\\"true\\\" fxFlex=\\\"10%\\\" fxFlex.sm=\\\"10%\\\" label=\\\"Số điện thoại\\\" (keyup)=\\\"onKey($event)\\\"\\n                                maxlength=\\\"10\\\" [(model)]=\\\"timKiem.SoDienThoai\\\" mask=\\\"000 000 0000\\\">\\n        </app-textboxmask>\\n        <app-daterangepicker id=\\\"Daterange\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"20%\\\" (blur)=\\\"blur($event)\\\"\\n            [(model)]=\\\"timKiem.RangeDate\\\" label=\\\"Từ ngày - Đến ngày\\\" (keyup)=\\\"onKey3($event)\\\"\\n            (modelChange)=\\\"changRange($event)\\\">\\n        </app-daterangepicker>\\n        <div fxFlex=\\\"209px\\\">\\n            <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button class=\\\"mr-1 mt-5\\\" (click)=\\\"TimKiem(true)\\\">Tìm\\n                kiếm</button>\\n            <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"exportExcel()\\\">Xuất Excel</button>\\n\\n        </div>\\n        <app-barcode [(model)]=\\\"modelQRCode\\\" (modelChange)=\\\"changeQR($event)\\\" style=\\\"display: none;\\\"></app-barcode>\\n    </div>\\n</fieldset>\"","export default \"<vex-page-layout>\\n    <vex-page-layout-header class=\\\"pb-16\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center start\\\">\\n        <div [class.px-gutter]=\\\"true\\\" class=\\\"w-full flex justify-between\\\">\\n            <vex-breadcrumbs [crumbs]=\\\"\\n                    [\\n                    {Title:'Nhà Thuốc',Path:'/nha-thuoc'},\\n                    {Title:'Mua Toa Cũ ',Path:'',Active:true}\\n                    ]\\\">\\n            </vex-breadcrumbs>\\n        </div>\\n    </vex-page-layout-header>\\n\\n    <vex-page-layout-content [class.px-gutter]=\\\"true\\\" class=\\\"-mt-6\\\">\\n        <div class=\\\"-mt-16\\\">\\n            <div fxLayout=\\\"row\\\" fxLayout.lt-md=\\\"column\\\" fxLayoutGap=\\\"20px\\\">\\n                <div class=\\\"card\\\" fxFlex=\\\"auto\\\">\\n                    <div class=\\\"card\\\" fxFlex=\\\"auto\\\">\\n                        <div class=\\\"px-6 py-4\\\" fxLayout=\\\"column\\\" style=\\\"position: relative;\\\">\\n                            <app-quay-thuoc-thong-tin-hanh-chinh [MaBN]=\\\"id\\\"></app-quay-thuoc-thong-tin-hanh-chinh>\\n                            <h4 class=\\\"sub-title\\\" fxFlex=\\\"100%\\\" style=\\\"font-weight: bold;\\\">Toa Thuốc Cũ</h4>\\n                            <app-grid [headerTemplate]=\\\"headerTemplate\\\" [useHeaderDefault]=\\\"false\\\"\\n                                [urlGetData]=\\\"urlGetDataGridChild\\\" [urlGetTotalPage]=\\\"urlGetTotalPageGridChild\\\"\\n                                [gridColumns]=\\\"gridColumns\\\" [useAddDeault]=\\\"false\\\" [useActionDefault]=\\\"false\\\"\\n                                [checkboxAble]=\\\"true\\\" [detailTemplate]=\\\"detailTemplate\\\" [lazyLoadPage]=\\\"true\\\"\\n                                (extCheckboxSelection)=\\\"extCheckboxSelection($event)\\\" heightToolbar=\\\"325\\\">\\n                            </app-grid>\\n\\n                            <ng-template #detailTemplate let-dataItem>\\n                                <app-grid [gridColumns]=\\\"gridChildColumns\\\" [useAddDeault]=\\\"false\\\"\\n                                    [useHeaderDefault]=\\\"false\\\" [useActionDefault]=\\\"false\\\" [checkboxAble]=\\\"false\\\"\\n                                    [lazyLoadPage]=\\\"true\\\" [urlGetData]=\\\"urlGetDataGridChild1\\\"\\n                                    [urlGetTotalPage]=\\\"urlGetTotalPageGridChild1\\\" searchString=\\\"{{dataItem.Id}}\\\"\\n                                    [autoHeight]=\\\"true\\\" [pageable]=\\\"false\\\">\\n                                </app-grid>\\n                            </ng-template>\\n                            <ng-template #detailTemplateCT let-dataItem>\\n                                <span style=\\\"color:red\\\" *ngIf=\\\"dataItem.LaDuocPhamBenhVien ==  false\\\">Dược phẩm ngoài\\n                                    bệnh viện</span>\\n                                <span style=\\\"color:blue\\\" *ngIf=\\\"dataItem.LaDuocPhamBenhVien ==  true\\\">Dược phẩm trong\\n                                    bệnh viện</span>\\n                            </ng-template>\\n                            <ng-template #headerTemplate>\\n                                <div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\"\\n                                    fxLayoutGap.lt-sm=\\\"0\\\" class=\\\"px-2 py-3\\\">\\n                                    <app-textbox id=\\\"DVKhamHienThi\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"40%\\\" maxlength=\\\"4000\\\"\\n                                        [(model)]=\\\"timKiemToaThuocCu.DVKhamHienThi\\\" style=\\\"padding-left: 10px;\\\"\\n                                        label=\\\"DV Khám\\\" (keyup)=\\\"onKey($event)\\\">\\n                                    </app-textbox>\\n                                    <app-textbox id=\\\"ChuanDoan\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"40%\\\" maxlength=\\\"4000\\\"\\n                                        [(model)]=\\\"timKiemToaThuocCu.ChuanDoan\\\" style=\\\"padding-left: 10px;\\\"\\n                                        label=\\\"Chẩn đoán\\\" (keyup)=\\\"onKey($event)\\\">\\n                                    </app-textbox>\\n                                    <app-textbox id=\\\"BSKham\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"40%\\\" maxlength=\\\"4000\\\"\\n                                        [(model)]=\\\"timKiemToaThuocCu.BSKham\\\" style=\\\"padding-left: 10px;\\\"\\n                                        label=\\\"BS Khám\\\" (keyup)=\\\"onKey($event)\\\">\\n                                    </app-textbox>\\n                                   \\n                                    <!-- <app-datepicker id=\\\"NgayKham\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"40%\\\"\\n                                        [(model)]=\\\"timKiemToaThuocCu.NgayKham\\\"  label=\\\"Ngày khám\\\" (keyup)=\\\"onKey($event)\\\">\\n                                    </app-datepicker> -->\\n                                    <app-daterangepicker id=\\\"Daterange\\\" fxFlex=\\\"20%\\\" fxFlex.sm=\\\"20%\\\" [(model)]=\\\"timKiemToaThuocCu.RangeDate\\\"\\n                                        label=\\\"Từ ngày - Đến ngày\\\" (keyup)=\\\"onKey3($event)\\\" (modelChange)=\\\"changRange($event)\\\">\\n                                    </app-daterangepicker>\\n                                    <div fxFlex=\\\"15%\\\" class=\\\"mt-5\\\">\\n                                        <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button class=\\\"mr-1\\\"\\n                                            (click)=\\\"TimKiem()\\\">Tìm kiếm</button>\\n                                    </div>\\n\\n                                </div>\\n                            </ng-template>\\n\\n\\n\\n\\n\\n                            <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"mt-2\\\">\\n                                <button type=\\\"button\\\" mat-raised-button mat-button (click)=\\\"Huy()\\\">\\n                                    Hủy\\n                                </button>\\n                                <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button\\n                                    (click)=\\\"ChonThuoc()\\\">\\n                                    Chọn\\n                                </button>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </vex-page-layout-content>\\n</vex-page-layout>\"","export default \"\\n\\n<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div>{{Title}}</div>\\n</div>\\n<p class=\\\"mb-3\\\"> Thực hiện in phiếu cho NB : </p>\\n<app-checkbox id=\\\"InPhieuThu\\\" [(model)]=\\\"thongTin.InPhieuThu\\\" label=\\\"In phiếu thu\\\" class=\\\"pb-0\\\"></app-checkbox>\\n<app-checkbox id=\\\"InBangKe\\\" [(model)]=\\\"thongTin.InBangKe\\\" label=\\\"In bảng kê thuốc\\\" class=\\\"pb-0\\\"></app-checkbox>\\n<div style=\\\"float: right;\\\">\\n    <button type=\\\"button\\\"  mat-raised-button mat-button class=\\\"mr-1 mt-2\\\"\\n    (click)=\\\"close('No answer')\\\">Không</button>\\n    <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button class=\\\"mr-1 mt-2\\\"\\n    (click)=\\\"close('In')\\\">In</button>\\n</div>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div>{{Title}}</div>\\n</div>\\n<p class=\\\"mb-3\\\" *ngIf=\\\"dataItem.Model != null\\\"> Người bệnh này chưa có phát sinh đơn thuốc nào. Bạn có muốn bán thuốc cho người bệnh này như khách vãng lai hay không?  </p>\\n<p class=\\\"mb-3\\\" *ngIf=\\\"dataItem.Model == null\\\"> Không tìm thấy người bệnh này trong hệ thống. Bạn có muốn bán thuốc cho người bệnh này như khách vãng lai hay không?  </p>\\n<div style=\\\"float: right;\\\">\\n    <button type=\\\"button\\\"  mat-raised-button mat-button class=\\\"mr-1 mt-2\\\"\\n    (click)=\\\"close(1)\\\">Không</button>\\n    <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button class=\\\"mr-1 mt-2\\\"\\n    (click)=\\\"close(2)\\\">Có</button>\\n</div>\\n\\n\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n    <div>{{Title}}</div>\\n    <button type=\\\"button\\\" mat-icon-button (click)=\\\"close('No answer')\\\" tabindex=\\\"-1\\\">\\n        <mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n    </button>\\n</div>\\n<p> Bạn chắc chắn muốn thu của người bệnh <b>{{tenBenhNhan}}</b> với số tiền <b>{{soTien| number:'0.2-2':'vi-VN'}}</b> hay không?\\n</p>\\n<div style=\\\"float: right;\\\">\\n    <button type=\\\"button\\\" mat-raised-button mat-button class=\\\"mr-1 mt-2\\\" (click)=\\\"close('No answer')\\\">Không</button>\\n    <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button mat-button class=\\\"mr-1 mt-2\\\"\\n        (click)=\\\"close('Yes')\\\">Có</button>\\n</div>\"","export default \"<div id=\\\"phieu-thu\\\" fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n\\t<fieldset fxFlex=\\\"100%\\\" style=\\\"padding: 0 !important\\\">\\n\\t\\t<div class=\\\"mt-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t<ul fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t<app-combobox id=\\\"ten-pttt\\\" fxFlex=\\\"30%\\\" fxFlex.sm=\\\"30%\\\" [data]=\\\"dataSoPhieus\\\" label=\\\"Số phiếu\\\"\\n\\t\\t\\t\\t\\t\\t(selectionChange)=\\\"selectionChangeSoPhieu($event)\\\" [autoSelectFirstItem]=\\\"true\\\" [bind]=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t[(model)]=\\\"thongTinSoPhieuDaThu.SoPhieuId\\\" [modelText]=\\\"thongTinSoPhieuDaThu.TenSoPhieu\\\"\\n\\t\\t\\t\\t\\t\\t[template]=\\\"soPhieuTemplate\\\" [templateHeader]=\\\"soPhieuTemplateHeader\\\" [popupSettings]=\\\"null\\\"\\n\\t\\t\\t\\t\\t\\tclass=\\\"pb-0\\\">\\n\\t\\t\\t\\t\\t\\t<ng-template #soPhieuTemplateHeader let-dataItem>\\n\\t\\t\\t\\t\\t\\t\\t<table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"50%\\\">Loại phiếu</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"50%\\\">Tình trạng</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t\\t<ng-template #soPhieuTemplate let-dataItem>\\n\\t\\t\\t\\t\\t\\t\\t<table width=\\\"100%\\\" class=\\\"table-combobox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"50%\\\">{{dataItem.DisplayName}}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"50%\\\" *ngIf=\\\"dataItem.TinhTrang === trangThaiThuTienBenhNhan.Huy \\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong style=\\\"color: red\\\"> {{dataItem.TinhTrang}}</strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"50%\\\" *ngIf=\\\"dataItem.TinhTrang !== trangThaiThuTienBenhNhan.Huy \\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong style=\\\"color: green\\\"> {{dataItem.TinhTrang}}</strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t</app-combobox>\\n\\t\\t\\t\\t\\t<fieldset fxFlex=\\\"100%\\\" fxFlex.sm=\\\"100%\\\" class=\\\"ml-3\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"padding: 13px;flex: 1 1 100%;box-sizing: border-box;max-width: 100%;\\\"\\n\\t\\t\\t\\t\\t\\t*ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu != null\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"mt-1\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"inline\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tLoại phiếu:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.LoaiPhieu}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tTình trạng:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong *ngIf=\\\"thongTinSoPhieuDaThu.TinhTrang === trangThaiThuTienBenhNhan.Huy\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"color: red\\\"> {{thongTinSoPhieuDaThu.TinhTrang}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong *ngIf=\\\"thongTinSoPhieuDaThu.TinhTrang !== trangThaiThuTienBenhNhan.Huy\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"color: green\\\"> {{thongTinSoPhieuDaThu.TinhTrang}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.TinhTrang === trangThaiThuTienBenhNhan.Huy\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tNgười hủy:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NhanVienHuyPhieu}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.TinhTrang === trangThaiThuTienBenhNhan.Huy\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tNgày hủy:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NgayHuyStr}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu != null \\n                                && ((thongTinSoPhieuDaThu.LoaiPhieu === trangThaiThuTienBenhNhan.ThuTheoChiPhi)\\n                                && thongTinSoPhieuDaThu.TinhTrang === trangThaiThuTienBenhNhan.Huy)\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>Thu hồi: </span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong *ngIf=\\\"thongTinSoPhieuDaThu.DaThuHoi\\\"> Rồi </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong *ngIf=\\\"!thongTinSoPhieuDaThu.DaThuHoi\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tChưa\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon [icIcon]=\\\"icEdit\\\" style=\\\"transform: scale(0.8)\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(click)=\\\"huyPhieuThu(thongTinSoPhieuDaThu ,true)\\\"> </mat-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.DaThuHoi\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tNgười thu hồi:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NguoiThuHoi}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.DaThuHoi\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tNgày thu:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NgayThuStr}} </strong>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</div>\\n\\t</fieldset>\\n\\t<fieldset fxFlex=\\\"100%\\\" class=\\\"mb-1\\\">\\n\\t\\t<div class=\\\"mt-1 ml-1\\\">\\n\\t\\t\\t<ul class=\\\"inline\\\" *ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu != null && \\n            thongTinSoPhieuDaThu.LoaiPhieu === trangThaiThuTienBenhNhan.ThuTheoChiPhi\\\">\\n\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu != null\\\">\\n\\t\\t\\t\\t\\tTổng số tiền:\\n\\t\\t\\t\\t\\t<strong style=\\\"color: red\\\"> {{thongTinSoPhieuDaThu.TongChiPhi | number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\tBHYT TT:\\n\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.BHYTThanhToan | number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\tMiễm giảm:\\n\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.MienGiam | number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\tBệnh nhân TT:\\n\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.BenhNhanThanhToan | number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t\\t(<span>Tiền mặt: </span> <strong> {{thongTinSoPhieuDaThu.TienMat| number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t\\t<span>Chuyển khoản: </span> <strong> {{thongTinSoPhieuDaThu.ChuyenKhoan| number:'0.2-2':'vi-VN'}}\\n\\t\\t\\t\\t\\t</strong> <span>POS: </span> <strong> {{thongTinSoPhieuDaThu.Pos| number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t\\t<span>Công nợ: </span> <strong> {{thongTinSoPhieuDaThu.CongNo| number:'0.2-2':'vi-VN'}} </strong>)\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"mt-1 ml-1\\\">\\n\\t\\t\\t<ul class=\\\"inline\\\" *ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu === trangThaiThuTienBenhNhan.ThuTheoChiPhi\\\">\\n\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu != null\\\">\\n\\t\\t\\t\\t\\tSố tiền:\\n\\t\\t\\t\\t\\t<strong style=\\\"color: red\\\"> {{thongTinSoPhieuDaThu.SoTien| number:'0.2-2':'vi-VN'}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.NgayThuStr != null\\\">\\n\\t\\t\\t\\t\\tNgày thu:\\n\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NgayThuStr}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li *ngIf=\\\"thongTinSoPhieuDaThu.NoiDungThu != null\\\">\\n\\t\\t\\t\\t\\tNội dung thu:\\n\\t\\t\\t\\t\\t<strong> {{thongTinSoPhieuDaThu.NoiDungThu}} </strong>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</div>\\n\\t</fieldset>\\n\\n\\t<fieldset fxFlex=\\\"100%\\\" class=\\\"mb-1\\\"\\n\\t\\t*ngIf=\\\"thongTinSoPhieuDaThu.LoaiPhieu === trangThaiThuTienBenhNhan.ThuTheoChiPhi\\\">\\n\\t\\t<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"0\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n\\t\\t\\t<kendo-grid [data]=\\\"thongTinSoPhieuDaThu.DanhSachThuPhis\\\" [resizable]=\\\"true\\\"\\n\\t\\t\\t\\t[selectable]=\\\"{enabled: true, checkboxOnly: true}\\\" class=\\\"grid-custom\\\" id=\\\"danhSachDaThuTienGrid\\\"\\n\\t\\t\\t\\theight=\\\"500\\\">\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"\\\" title=\\\"\\\" width=\\\"25\\\" [style]=\\\"{'text-align': 'center'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'center'}\\\"> </kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"\\\" title=\\\"#\\\" width=\\\"15\\\" [style]=\\\"{'text-align': 'center'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'center'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\"> {{rowIndex + 1}}\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\t\\t\\t\\t\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"Nhom\\\" title=\\\"Nhóm\\\" width=\\\"50\\\" [hidden]=\\\"true\\\" [style]=\\\"{'text-align': 'left'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'center'}\\\" class=\\\"k-grouping-row p\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupHeaderTemplate let-group let-field=\\\"field\\\" let-value=\\\"value\\\"> {{value}}\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"TenDichVu\\\" title=\\\"Tên Dịch Vụ\\\" width=\\\"100\\\" [style]=\\\"{'text-align': 'left'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'center'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n\\t\\t\\t\\t\\t\\t<span kendoTooltip title=\\\"{{dataItem.TenDichVu}}\\\"> {{dataItem.TenDichVu}} </span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"text-center\\\" style=\\\"font-weight: bold;color:#000;\\\" kendoTooltip\\n\\t\\t\\t\\t\\t\\t\\ttitle=\\\"Tổng cộng DV đang chọn\\\">Tổng cộng:</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"Soluong\\\" title=\\\"Số Lượng\\\" width=\\\"60\\\" [style]=\\\"{'text-align': 'right'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'center'}\\\"> </kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"DonGia\\\" title=\\\"Đơn Giá\\\" width=\\\"90\\\" [style]=\\\"{'text-align': 'right'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{ dataItem.DonGia | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"ThanhTien\\\" title=\\\"Thành Tiền\\\" width=\\\"100\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{ dataItem.ThanhTien | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\" let-aggregates=\\\"aggregates\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{aggregates.ThanhTien.sum | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-align: center\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"float_right\\\">{{total('ThanhTien') | number:'0.2-2':'vi-VN'}}</span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"BHYTThanhToan\\\" title=\\\"BHYT TT\\\" width=\\\"100\\\" [style]=\\\"{'text-align': 'right'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{ dataItem.BHYTThanhToan | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\" let-aggregates=\\\"aggregates\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{aggregates.BHYTThanhToan.sum | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-align: right\\\">\\n\\t\\t\\t\\t\\t\\t<span style=\\\"float: right;\\\">{{total('BHYTThanhToan') | number:'0.2-2':'vi-VN'}}</span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column width=\\\"90\\\" [style]=\\\"{'text-align': 'right'}\\\" title=\\\"Tổng công nợ\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{ dataItem.TongCongNo | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\" let-aggregates=\\\"aggregates\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{aggregates.TongCongNo.sum | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-align: center\\\">\\n\\t\\t\\t\\t\\t\\t<span style=\\\"float:right;\\\">{{total('TongCongNo') | number:'0.2-2':'vi-VN'}}</span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"SoTienMG\\\" title=\\\"Số tiền MG\\\" width=\\\"120\\\" [style]=\\\"{'text-align': 'right'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem=\\\"dataItem\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div inline=\\\"true\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\" class=\\\"mt-2\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tkendoTooltip>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span style=\\\"float:right;\\\">{{ dataItem.SoTienMG | number:'0.2-2':'vi-VN'}}</span>\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\" let-aggregates=\\\"aggregates\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{aggregates.SoTienMG.sum | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-align: center\\\">\\n\\t\\t\\t\\t\\t\\t<span style=\\\"float:right;\\\">{{total('SoTienMG') | number:'0.2-2':'vi-VN'}}</span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-column field=\\\"DaThanhToan\\\" title=\\\"Đã TT\\\" width=\\\"100\\\" [style]=\\\"{'text-align': 'right'}\\\"\\n\\t\\t\\t\\t\\t[headerStyle]=\\\"{'text-align': 'right'}\\\">\\n\\t\\t\\t\\t\\t<ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\\\"rowIndex\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{ dataItem.DaThanhToan | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridGroupFooterTemplate let-group=\\\"group\\\" let-aggregates=\\\"aggregates\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"float_right\\\">{{aggregates.DaThanhToan.sum | number:'0.2-2':'vi-VN'}}</div>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t\\t<ng-template kendoGridFooterTemplate let-column let-columnIndex=\\\"columnIndex\\\">\\n\\t\\t\\t\\t\\t\\t<span style=\\\"float: right;\\\">{{total('DaThanhToan') | number:'0.2-2':'vi-VN'}}</span>\\n\\t\\t\\t\\t\\t</ng-template>\\n\\t\\t\\t\\t</kendo-grid-column>\\n\\t\\t\\t\\t<kendo-grid-messages noRecords=\\\"Không có dữ liệu.\\\" pagerOf=\\\"trong số\\\" pagerItems=\\\"dòng\\\"\\n\\t\\t\\t\\t\\tdetailExpand=\\\"Mở rộng chi tiết\\\" detailCollapse=\\\"Thu gọn chi tiết\\\"> </kendo-grid-messages>\\n\\t\\t\\t</kendo-grid>\\n\\n\\t\\t</div>\\n\\t</fieldset>\\n</div>\\n<div *ngIf=\\\"thongTinSoPhieuDaThu.SoPhieuId != null\\\" class=\\\"sticky-button-action py-3 text-right\\\" kendoTooltip>\\n\\t<button (click)=\\\"phieuIn()\\\" color=\\\"primary\\\" mat-raised-button class=\\\"mr-2\\\">Phiếu in</button>\\n\\t<button style=\\\"margin-top: 10px;\\\"\\n\\t\\t*ngIf=\\\"thongTinSoPhieuDaThu.ConHanHuyPhieuThu && \\n\\t\\t    ((thongTinSoPhieuDaThu.LoaiPhieu === trangThaiThuTienBenhNhan.ThuTheoChiPhi && thongTinSoPhieuDaThu.TinhTrang !== trangThaiThuTienBenhNhan.Huy))\\\"\\n\\t\\ttype=\\\"button\\\" (click)=\\\"huyPhieuThu(thongTinSoPhieuDaThu, false)\\\" color=\\\"warn\\\" mat-raised-button>\\n\\t\\tHủy phiếu thu\\n\\t</button>\\n</div>\"","export default \"<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\">\\n\\t<div style=\\\"text-transform: uppercase\\\">Kết quả phiếu ({{arrFileUrl.length}} file)</div>\\n\\t<button type=\\\"button\\\" mat-icon-button mat-dialog-close tabindex=\\\"-1\\\">\\n\\t\\t<mat-icon [icIcon]=\\\"icClose\\\" [mat-dialog-close]=\\\"null\\\"></mat-icon>\\n\\t</button>\\n</div>\\n<mat-dialog-content style=\\\"height: 550px\\\">\\n\\t<div class=\\\"container-iframe\\\">\\n\\t\\t<ng-container [ngSwitch]=\\\"arrFileUrl.length > 0\\\">\\n\\t\\t\\t<div *ngSwitchCase=\\\"true\\\">\\n\\t\\t\\t\\t<ng-container *ngFor=\\\"let item of arrFileUrl, let i = index\\\">\\n\\t\\t\\t\\t\\t<iframe id=\\\"{{i}}\\\" width=\\\"100%\\\" height=\\\"550px\\\" frameborder=\\\"0\\\" [src]=\\\"item | safe\\\" type=\\\"application/pdf\\\" allowTransparency=\\\"true\\\" background=\\\"transparent\\\" style=\\\"display: none\\\" onload=\\\"this.style.display = 'block';\\\"></iframe>\\n\\t\\t\\t\\t</ng-container>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div *ngSwitchDefault>Không có dữ liệu</div>\\n\\t\\t</ng-container>\\n\\t</div>\\n</mat-dialog-content>\\n<mat-dialog-actions class=\\\"pb-5\\\">\\n\\t<button type=\\\"button\\\" style=\\\"margin-left: auto\\\" [mat-dialog-close]=\\\"null\\\" mat-button class=\\\"mr-1 mt-4\\\"><i class=\\\"ft-arrow-left\\\"></i> Hủy</button>\\n\\t<button type=\\\"button\\\" *ngIf=\\\"arrFilePdf.length > 0\\\" (click)=\\\"downloadAllFile()\\\" mat-stroked-button color=\\\"primary\\\" class=\\\"mr-1 mt-4\\\">Tải tất cả</button>\\n</mat-dialog-actions>\\n\"","export default \"<div>\\n\\t<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\" class=\\\"mb-1\\\">\\n\\t\\t<div>XÁC NHẬN HỦY XUẤT THUỐC</div>\\n\\t\\t<button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n\\t\\t\\t<mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n\\t\\t</button>\\n\\t</div>\\n\\t<mat-dialog-content style=\\\"overflow: hidden\\\"  style=\\\"height: 250px;\\\">\\n\\t\\tBạn chắc chắn muốn hủy xuất thuốc của phiếu thu phải không?\\n\\n\\t\\t<div fxLayoutAlign=\\\"start center\\\" fxLayout=\\\"row\\\" class=\\\"py-1\\\">\\n\\t\\t\\t<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<table class=\\\"table table-border\\\" width=\\\"700px\\\">\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"{{huyXuatThuocTrongNgay.ThuHoiPhieu?'13%':'30%'}}\\\">Nếu phải:</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"{{huyXuatThuocTrongNgay.ThuHoiPhieu?'25%':'100%'}}\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-radio id=\\\"thuhoiphieu\\\" label=\\\"Thu hồi phiếu\\\" required=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t [(model)]=\\\"huyXuatThuocTrongNgay.ThuHoiPhieu\\\" (modelChange)=\\\"modelChangeThuHoiPhieu($event)\\\" \\n\\t\\t\\t\\t\\t\\t\\t\\t [items]=\\\"[{Value:true,Text:'Rồi'},{Value:false,Text:'Chưa'}]\\\" \\n\\t\\t\\t\\t\\t\\t\\t\\t [validationerror]=\\\"'ThuHoiPhieu' | validationerror:validationErrors\\\"> </app-radio>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"30%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-combobox *ngIf=\\\"huyXuatThuocTrongNgay.ThuHoiPhieu\\\" [popupSettings]=\\\"null\\\" id=\\\"nguoithuhoi\\\" label=\\\"Người thu hồi\\\" [(model)]=\\\"huyXuatThuocTrongNgay.NguoiThuHoiId\\\" [(modelText)]=\\\"huyXuatThuocTrongNgay.TenNguoiThuHoi\\\" url=\\\"NhanVien/GetListLookupNhanVien\\\" required=\\\"true\\\" [validationerror]=\\\"'NguoiThuHoiId' | validationerror:validationErrors\\\"> </app-combobox>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"25%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-datetimepicker *ngIf=\\\"huyXuatThuocTrongNgay.ThuHoiPhieu\\\" [(model)]=\\\"huyXuatThuocTrongNgay.ThoiGianThuHoi\\\" id=\\\"thuhoiluc\\\" label=\\\"Thu hồi Lúc\\\" required=\\\"true\\\" [validationerror]=\\\"'ThoiGianThuHoi' | validationerror:validationErrors\\\"> </app-datetimepicker>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<app-textarea max=\\\"4000\\\" [minHeight]=\\\"60\\\" [(model)]=\\\"huyXuatThuocTrongNgay.LyDo\\\" id=\\\"ly-do\\\" class=\\\"item-no-padding\\\" fxFlex=\\\"100%\\\" required=\\\"true\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Lý do\\\" [validationerror]=\\\"'LyDo' | validationerror:validationErrors\\\"> </app-textarea>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</mat-dialog-content>\\n</div>\\n\\n<mat-dialog-actions fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\">\\n\\t<button mat-button mat-dialog-close>Không</button>\\n\\t<button mat-raised-button mat-button (click)=\\\"xacNhanThongTinHuy()\\\" color=\\\"primary\\\" cdkFocusInitial>Có</button>\\n</mat-dialog-actions>\\n\"","export default \"<div *ngIf=\\\"!thuHoiPhieu\\\">\\n\\t<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\" class=\\\"mb-1\\\">\\n\\t\\t<div>XÁC NHẬN HỦY PHIẾU THU</div>\\n\\t\\t<button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n\\t\\t\\t<mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n\\t\\t</button>\\n\\t</div>\\n\\t<mat-dialog-content style=\\\"overflow: hidden\\\"  style=\\\"height: 250px;\\\">\\n\\t\\tBạn chắc chắn muốn hủy phiếu thu {{thongTinHuyPhieu.TenSoPhieu}} phải không?\\n\\t\\t<div fxLayoutAlign=\\\"start center\\\" fxLayout=\\\"row\\\" class=\\\"py-1\\\">\\n\\t\\t\\t<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<table class=\\\"table table-border\\\" width=\\\"700px\\\">\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"{{thongTinHuyPhieu.ThuHoiPhieu?'13%':'30%'}}\\\">Nếu phải:</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"{{thongTinHuyPhieu.ThuHoiPhieu?'25%':'100%'}}\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-radio id=\\\"thuhoiphieu\\\" label=\\\"Thu hồi phiếu\\\" required=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t [(model)]=\\\"thongTinHuyPhieu.ThuHoiPhieu\\\" (modelChange)=\\\"modelChangeThuHoiPhieu($event)\\\" \\n\\t\\t\\t\\t\\t\\t\\t\\t [items]=\\\"[{Value:true,Text:'Rồi'},{Value:false,Text:'Chưa'}]\\\" \\n\\t\\t\\t\\t\\t\\t\\t\\t [validationerror]=\\\"'ThuHoiPhieu' | validationerror:validationErrors\\\"> </app-radio>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"30%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-combobox *ngIf=\\\"thongTinHuyPhieu.ThuHoiPhieu\\\" [popupSettings]=\\\"null\\\" id=\\\"nguoithuhoi\\\" label=\\\"Người thu hồi\\\" [(model)]=\\\"thongTinHuyPhieu.NguoiThuHoiId\\\" [(modelText)]=\\\"thongTinHuyPhieu.TenNguoiThuHoi\\\" url=\\\"NhanVien/GetListLookupNhanVien\\\" required=\\\"true\\\" [validationerror]=\\\"'NguoiThuHoiId' | validationerror:validationErrors\\\"> </app-combobox>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"25%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-datetimepicker *ngIf=\\\"thongTinHuyPhieu.ThuHoiPhieu\\\" [(model)]=\\\"thongTinHuyPhieu.ThoiGianThuHoi\\\" id=\\\"thuhoiluc\\\" label=\\\"Thu hồi Lúc\\\" required=\\\"true\\\" [validationerror]=\\\"'ThoiGianThuHoi' | validationerror:validationErrors\\\"> </app-datetimepicker>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<app-textarea max=\\\"4000\\\" [minHeight]=\\\"60\\\" [(model)]=\\\"thongTinHuyPhieu.LyDo\\\" id=\\\"ly-do\\\" class=\\\"item-no-padding\\\" fxFlex=\\\"100%\\\" required=\\\"true\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Lý do\\\" [validationerror]=\\\"'LyDo' | validationerror:validationErrors\\\"> </app-textarea>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</mat-dialog-content>\\n</div>\\n\\n<div *ngIf=\\\"thuHoiPhieu\\\">\\n\\t<div mat-dialog-title fxLayout=\\\"row\\\" fxLayoutAlign=\\\"space-between center\\\" class=\\\"mb-1\\\">\\n\\t\\t<div>CẬP NHẬT THU HỒI PHIẾU THU</div>\\n\\t\\t<button type=\\\"button\\\" mat-icon-button (click)=\\\"close()\\\" tabindex=\\\"-1\\\">\\n\\t\\t\\t<mat-icon [icIcon]=\\\"icClose\\\"></mat-icon>\\n\\t\\t</button>\\n\\t</div>\\n\\t<mat-dialog-content style=\\\"overflow: hidden\\\"  style=\\\"height: 250px;\\\">\\n\\t\\t<div fxLayoutAlign=\\\"start center\\\" fxLayout=\\\"row\\\" class=\\\"py-1\\\">\\n\\t\\t\\t<div fxLayout=\\\"row wrap\\\" fxLayout.lt-sm=\\\"column\\\" fxLayoutGap=\\\"16px grid\\\" fxLayoutGap.lt-sm=\\\"0\\\">\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<table class=\\\"table table-border\\\" width=\\\"700px\\\">\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"30%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-combobox [popupSettings]=\\\"null\\\" id=\\\"nguoithuhoi\\\" label=\\\"Người thu hồi\\\" [(model)]=\\\"thongTinHuyPhieu.NguoiThuHoiId\\\" [(modelText)]=\\\"thongTinHuyPhieu.TenNguoiThuHoi\\\" url=\\\"NhanVien/GetListLookupNhanVien\\\" required=\\\"true\\\" [validationerror]=\\\"'NguoiThuHoiId' | validationerror:validationErrors\\\"> </app-combobox>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t<td width=\\\"25%\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<app-datetimepicker [(model)]=\\\"thongTinHuyPhieu.ThoiGianThuHoi\\\" id=\\\"thuhoiluc\\\" label=\\\"Thu hồi Lúc\\\" required=\\\"true\\\" [validationerror]=\\\"'ThoiGianThuHoi' | validationerror:validationErrors\\\"> </app-datetimepicker>\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t<fieldset class=\\\"row ml-1\\\" fxFlex=\\\"100%\\\">\\n\\t\\t\\t\\t\\t<app-textarea max=\\\"4000\\\" [minHeight]=\\\"60\\\"  [(model)]=\\\"thongTinHuyPhieu.LyDo\\\" id=\\\"ly-do\\\" class=\\\"item-no-padding\\\" fxFlex=\\\"100%\\\" required=\\\"true\\\" fxFlex.sm=\\\"100%\\\" label=\\\"Lý do\\\" [validationerror]=\\\"'LyDo' | validationerror:validationErrors\\\"> </app-textarea>\\n\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</mat-dialog-content>\\n</div>\\n\\n<mat-dialog-actions fxLayoutAlign=\\\"end center\\\" fxLayoutGap=\\\"8px\\\">\\n\\t<button mat-button mat-dialog-close>Không</button>\\n\\t<button mat-raised-button mat-button (click)=\\\"xacNhanThongTinHuy()\\\" color=\\\"primary\\\" cdkFocusInitial>Có</button>\\n</mat-dialog-actions>\\n\"","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 0;\\n  padding-bottom: 100%;\\n  background: #ebeced;\\n}\\n\\n.container-iframe iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nheight_table {\\n  height: 60px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvYXAtZHVuZy1taWVtLWdpYW0tY2hvLXR1bmctbG9haS10aHVvYy1wb3B1cC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXGFwLWR1bmctbWllbS1naWFtLWNoby10dW5nLWxvYWktdGh1b2MtcG9wdXBcXGFwLWR1bmctbWllbS1naWFtLWNoby10dW5nLWxvYWktdGh1b2MtcG9wdXAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2FwLWR1bmctbWllbS1naWFtLWNoby10dW5nLWxvYWktdGh1b2MtcG9wdXAvYXAtZHVuZy1taWVtLWdpYW0tY2hvLXR1bmctbG9haS10aHVvYy1wb3B1cC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNDRjs7QURFQTtFQUNFLHVCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL21haW4vcXVheS10aHVvYy9hcC1kdW5nLW1pZW0tZ2lhbS1jaG8tdHVuZy1sb2FpLXRodW9jLXBvcHVwL2FwLWR1bmctbWllbS1naWFtLWNoby10dW5nLWxvYWktdGh1b2MtcG9wdXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyLWlmcmFtZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMDtcbiAgcGFkZGluZy1ib3R0b206IDEwMCU7XG4gIGJhY2tncm91bmQ6ICNlYmVjZWQ7XG59XG5cbi5jb250YWluZXItaWZyYW1lIGlmcmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG5oZWlnaHRfdGFibGUge1xuICBoZWlnaHQ6IDYwcHggIWltcG9ydGFudDtcbn0iLCIuY29udGFpbmVyLWlmcmFtZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMDtcbiAgcGFkZGluZy1ib3R0b206IDEwMCU7XG4gIGJhY2tncm91bmQ6ICNlYmVjZWQ7XG59XG5cbi5jb250YWluZXItaWZyYW1lIGlmcmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG5oZWlnaHRfdGFibGUge1xuICBoZWlnaHQ6IDYwcHggIWltcG9ydGFudDtcbn0iXX0= */\"","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from \"@angular/material\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport icClose from \"@iconify/icons-ic/twotone-close\";\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { ThongTinDuocPham,DanhSachMienGiamVo, LoaiChietKhau, LoaiMienGiam } from \"../quay-thuoc.model\";\n\nimport * as _ from 'underscore';\n\n@Component({\n  selector: 'app-ap-dung-miem-giam-cho-tung-loai-thuoc-popup',\n  templateUrl: './ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component.html',\n  styleUrls: ['./ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component.scss']\n})\nexport class ApDungMiemGiamChoTungLoaiThuocPopupComponent implements OnInit {\n\n  icClose = icClose;\n  maxSoTienMiemGiamThem: number = 0;\n  maxPhanTramMiemGiamThem: number = 0;\n  disablePhanTram: boolean = false;\n  disableSoTien: boolean = false;\n  disableInputPhanTram: boolean = false;\n  disableInputSoTien: boolean = false;\n\n  tenDichVu: string = null;\n  tongTienTungDichVu: number = 0;\n  tongSoTienDuocMiemGiam: number = 0;\n  loaiMienGiam = new LoaiMienGiam;\n  loaiChietKhau = new LoaiChietKhau;\n  tongTatCaSoTienMg: number = 0;\n  danhSachMienGiamVos: DanhSachMienGiamVo[] = [];\n  danhSachTam: any;\n  public isView: boolean = false;\n  validationErrors: any;\n\n  format: string = 'n2';\n  public tiLeBanDau: number = 0;\n  public soTienBanDau: number = 0;\n  public kiemTraThayDoiSoTienTiLe: boolean = false;\n  public firstApDungDauTien: boolean = false;\n\n  public danhSachChiPhi: ThongTinDuocPham;\n  tamdanhSachChiPhi = {} as ThongTinDuocPham;\n  constructor(@Inject(MAT_DIALOG_DATA) public data: any,\n    public sanitizer: DomSanitizer,\n    private notificationService: NotificationService,\n    private dialogRef: MatDialogRef<any>,\n    private cdRef: ChangeDetectorRef,\n  ) {\n  }\n  ngOnInit() {\n \n    this.tamdanhSachChiPhi = JSON.parse(JSON.stringify(this.data.dataItem));\n    this.danhSachChiPhi = { ...this.data.dataItem };\n    \n    this.bindCheckboxMienGiamThem(this.data.dataItem);\n    this.danhSachTam = JSON.parse(JSON.stringify(this.data.dataItem));;\n    this.tongTienTungDichVu = this.soTienTruocKhiMiemGiam();\n    this.tongTienTungDichVu = this.tongTienTungDichVu < 0 ? 0 : this.tongTienTungDichVu;\n    if(this.danhSachChiPhi.DanhSachMienGiamVos != null)\n    {\n      this.tinhSoTienMiemGiam(this.danhSachChiPhi);\n    }\n    this.tenDichVu = this.data.dataItem.TenDichVu;\n  }\n\n  resetLaiTongSoTienMG() {\n    this.data.dataItem.DanhSachMienGiamVos.forEach(\n      (item) => {\n        item.TongTienMiemGiam = 0;\n      });\n  }\n\n  soTienTruocKhiMiemGiam() {\n    let thanhTien = this.data.dataItem.DonGia * this.data.dataItem.SoLuongMua;\n    let soTienCongNo = 0;\n    if (this.data.dataItem.DanhSachCongNoChoThus != undefined && this.data.dataItem.DanhSachCongNoChoThus.length > 0) {\n      this.data.dataItem.DanhSachCongNoChoThus.forEach(item => {\n        soTienCongNo = soTienCongNo + item.SoTienCongNoChoThu;\n      });\n    }\n    return thanhTien - soTienCongNo;\n  }\n\n  changePhanTram(ev: any, item: any) {\n    if (ev != undefined && ev != null) {\n      item.TiLe = ev;\n    } else {\n      item.TiLe = 0;\n      item.TongTienMiemGiam = 0;\n    }\n    this.tinhSoTienMiemGiamTiLe(this.danhSachChiPhi);\n  }\n\n  changeTien: boolean = false;\n  changeSoTien(ev: any, item: any) {\n    if (ev != undefined && ev != null) {\n      item.SoTien = ev;\n    } else {\n      item.SoTien = 0;\n      item.TongTienMiemGiam = 0;\n    }\n    this.tinhSoTienMiemGiamSoTienMGT(this.danhSachChiPhi);\n  }\n\n  kiemTraTiLeVaSoTien() {\n    this.data.dataItem.DanhSachMienGiamVos.forEach(element => {\n      if (element.LoaiMienGiam === 3) {\n        if (this.firstApDungDauTien && element.TiLe === this.tiLeBanDau && element.SoTien === this.soTienBanDau) {\n          this.kiemTraThayDoiSoTienTiLe = true;\n        }\n      }\n    });\n  }\n\n  apDungPhanTram(ev: any, item: any) {\n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n    this.disableInputPhanTram = ev;\n    this.firstApDungDauTien = true;\n    this.kiemTraTiLeVaSoTien();\n    this.data.dataItem = { ...this.danhSachChiPhi };  \n    if (!ev) {\n      item.TiLe = 0;\n      item.TongTienMiemGiam = 0;\n    }\n    this.tinhSoTienMiemGiamTiLe(this.danhSachChiPhi);\n  }\n\n  apDungSoTien(ev: any, item: any) {\n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n    this.disableInputSoTien = ev;\n    this.firstApDungDauTien = true;\n    this.kiemTraTiLeVaSoTien();\n    this.data.dataItem = { ...this.danhSachChiPhi };  \n\n    if (!ev) {\n      item.SoTien = 0;\n      item.TongTienMiemGiam = 0;\n    }\n    \n    this.tinhSoTienMiemGiamSoTienMGT(this.danhSachChiPhi);\n  }\n\n  resetPhanTram() {\n    this.data.dataItem.DanhSachMienGiamVos.forEach(element => {\n      if (element.LoaiMienGiam === 3 && element.LoaiChietKhau == 1) {\n        element.TiLe = 0;\n        element.TongTienMiemGiam = 0;\n      }\n    });\n  }\n\n  resetSoTien() {\n    this.data.dataItem.DanhSachMienGiamVos.forEach(element => {\n      if (element.LoaiMienGiam === 3 && element.LoaiChietKhau == 2) {\n        element.SoTien = 0;\n        element.TongTienMiemGiam = 0;\n      }\n    });\n  }\n\n  replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, \"g\"), replace);\n  }\n\n  resetMGT() {\n    this.data.dataItem.DanhSachMienGiamVos.forEach(element => {\n      if (element.LoaiMienGiam === 3 && element.LoaiChietKhau == 1) {\n        element.TiLe = 0;\n        element.TongTienMiemGiam = 0;\n      }\n      if (element.LoaiMienGiam === 3 && element.LoaiChietKhau == 2) {\n        element.SoTien = 0;\n        element.TongTieMiemGiam = 0;\n      }\n    });\n  }\n\n  close() {\n    this.tamdanhSachChiPhi.apdungMGTThanhCong = false;\n    this.dialogRef.close(this.tamdanhSachChiPhi);\n  }\n\n  HuyApDungMGT() {\n    this.tamdanhSachChiPhi.apdungMGTThanhCong = false;\n    this.dialogRef.close(this.tamdanhSachChiPhi);\n  }\n\n  ApDungMGT() {\n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n\n    this.data.dataItem.DanhSachMienGiamVos.forEach(element => {\n      if (this.disableInputPhanTram && element.LoaiMienGiam === 3 && element.LoaiChietKhau == 1 && (element.TiLe === undefined || element.TiLe === null || element.TiLe === 0)) {\n        this.validationErrors.push({\n          Message: \"Vui lòng nhập tỉ lệ miễn giảm.\",\n          Field: \"TiLe\",\n        });\n      }\n      if (this.disableInputSoTien && element.LoaiMienGiam === 3 && element.LoaiChietKhau == 2 && (element.SoTien === undefined || element.SoTien === null || element.SoTien === 0)) {\n        this.validationErrors.push({\n          Message: \"Vui lòng nhập số tiền miễn giảm.\",\n          Field: \"SoTien\",\n        });\n      }\n    });\n\n    if (this.validationErrors.length > 0) {\n      return false;\n    }\n    else {\n      if (this.disableInputPhanTram || this.disableInputSoTien || this.kiemTraThayDoiSoTienTiLe) {\n        this.data.dataItem.apdungMGTThanhCong = true;\n      }\n      else {\n        this.data.dataItem.apdungMGTThanhCong = false;\n      }\n      if (this.tongTatCaSoTienMg > this.tongTienTungDichVu) {\n        this.notificationService.showError(\"Tổng số tiền miễn giảm lớn hơn số tiền miễn giảm thực tế.\");\n      } else {\n        this.dialogRef.close(this.data.dataItem);\n      }\n    }\n  }\n\n  tinhSoTienMiemGiamTiLe(dataItem: ThongTinDuocPham) {\n    this.tongTatCaSoTienMg = 0;\n    var tiLePhanTramConLai = 100;\n    if (this.tongTienTungDichVu !== 0) {\n      var dsMienGiamTheoPhanTram = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 1 && item.TiLe != 0);\n      var dsMienGiamTheoSoTien = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 2 && item.SoTien != 0);\n      dsMienGiamTheoSoTien.forEach(item => {\n        this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n      });\n      if (dsMienGiamTheoPhanTram != null && dsMienGiamTheoPhanTram.length > 0) {\n        //Sắp xếp theo thứ tự:Ưu đãi, Voucher, Miễn giảm thêm\n        dsMienGiamTheoPhanTram = _.sortBy(dsMienGiamTheoPhanTram, 'LoaiMienGiam');\n        dsMienGiamTheoPhanTram.forEach(item => {\n          //Nếu tỉ lệ còn lại sau khi đổ từ trên xuống          \n          item.TongTienMiemGiam = this.tongTienTungDichVu !== 0 ? (item.TiLe * this.tongTienTungDichVu) / 100 : 0;\n          this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n          if (item.TiLe >= tiLePhanTramConLai) {\n            tiLePhanTramConLai = 0;\n          }\n          else {\n            tiLePhanTramConLai = tiLePhanTramConLai - item.TiLe;\n          }\n        });\n      }\n    }\n\n  }\n\n\n  tinhSoTienMiemGiamSoTienMGT(dataItem: ThongTinDuocPham) {\n    this.tongTatCaSoTienMg = 0;\n    var soTienConLai = this.tongTienTungDichVu;\n    if (this.tongTienTungDichVu !== 0) {\n      var dsMienGiamTheoSoTien = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 2 && item.SoTien != 0);\n      var dsMienGiamTheoPhanTram = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 1 && item.TiLe != 0);\n      dsMienGiamTheoPhanTram.forEach(item => {\n        this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n      });\n      if (dsMienGiamTheoSoTien != null && dsMienGiamTheoSoTien.length > 0) {\n        //miễm giảm sô tiền nhâp thoải mái\n        dsMienGiamTheoSoTien = _.sortBy(dsMienGiamTheoSoTien, 'LoaiMienGiam');\n        dsMienGiamTheoSoTien.forEach(item => {\n          if (item.SoTien >= soTienConLai) {\n            soTienConLai = 0;\n          }\n          else {\n            soTienConLai = soTienConLai - item.SoTien;\n          }\n          item.TongTienMiemGiam = this.tongTienTungDichVu !== 0 ? item.SoTien : 0;\n          this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n        });\n      }\n    }\n  }\n\n  tinhSoTienMiemGiam(dataItem: ThongTinDuocPham) {\n    this.tongTatCaSoTienMg = 0;\n    var tiLePhanTramConLai = 100;\n    var soTienConLai = this.tongTienTungDichVu;  \n    var dsMienGiamTheoPhanTram = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 1 && item.TiLe != 0);\n    var dsMienGiamTheoSoTien = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 2 && item.SoTien != 0);\n    if (dsMienGiamTheoPhanTram != null && dsMienGiamTheoPhanTram.length > 0) {\n      //Sắp xếp theo thứ tự:Ưu đãi, Voucher, Miễn giảm thêm\n      dsMienGiamTheoPhanTram = _.sortBy(dsMienGiamTheoPhanTram, 'LoaiMienGiam');\n      dsMienGiamTheoPhanTram.forEach(item => {\n        //Nếu tỉ lệ còn lại sau khi đổ từ trên xuống\n        if (tiLePhanTramConLai > 0) {\n          item.TiLe = item.TiLe > tiLePhanTramConLai ? tiLePhanTramConLai : item.TiLe;\n        }\n        else {\n          item.TiLe = 0;\n        }\n        item.TongTienMiemGiam = this.tongTienTungDichVu !== 0 ? (item.TiLe * this.tongTienTungDichVu) / 100 : 0;\n        this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n        if (item.TiLe >= tiLePhanTramConLai) {\n          tiLePhanTramConLai = 0;\n        }\n        else {\n          tiLePhanTramConLai = tiLePhanTramConLai - item.TiLe;\n        }\n      });\n    }\n    if (tiLePhanTramConLai > 0 && dsMienGiamTheoSoTien != null && dsMienGiamTheoSoTien.length > 0) {\n      tiLePhanTramConLai = dsMienGiamTheoPhanTram != null && dsMienGiamTheoPhanTram.length > 0 ? tiLePhanTramConLai : 0;\n      soTienConLai = tiLePhanTramConLai != 0 ? ((dataItem.ThanhTien * tiLePhanTramConLai) / 100) : dataItem.ThanhTien;\n      //Sắp xếp theo thứ tự:Ưu đãi, Voucher, Miễn giảm thêm\n      dsMienGiamTheoSoTien = _.sortBy(dsMienGiamTheoSoTien, 'LoaiMienGiam');\n      dsMienGiamTheoSoTien.forEach(item => {\n        //Nếu số tiền còn lại sau khi đổ từ trên xuống\n        if (soTienConLai > 0) {\n          item.SoTien = item.SoTien > soTienConLai ? soTienConLai : item.SoTien;\n        }\n        else {\n          item.SoTien = 0;\n        }\n        item.TongTienMiemGiam = this.tongTienTungDichVu !== 0 ? item.SoTien : 0;\n        this.tongTatCaSoTienMg += item.TongTienMiemGiam;\n        if (item.SoTien >= soTienConLai) {\n          soTienConLai = 0;\n        }\n        else {\n          soTienConLai = soTienConLai - item.SoTien;\n        }\n      });\n    }\n\n  }\n\n  //=====================Xử lý miễn giảm thêm bind giá trị miễm giám thêm và checkbox =================================     \n  bindCheckboxMienGiamThem(dataItem: ThongTinDuocPham) {\n    if(dataItem.DanhSachMienGiamVos != null)\n    {\n      dataItem.DanhSachMienGiamVos.filter(item => item.LoaiMienGiam === 3).forEach(item => {\n        if (item.LoaiChietKhau === this.loaiChietKhau.ChietKhauTheoTiLe) {\n          if (item.TiLe != null && item.TiLe != 0) {\n            this.disablePhanTram = true;\n            this.disableInputPhanTram = true;\n            this.tiLeBanDau = item.TiLe;\n          } else {\n            this.disablePhanTram = false;\n            this.disableInputPhanTram = false;\n            item.TongTienMiemGiam = 0;\n          }\n        }\n        if (item.LoaiChietKhau === this.loaiChietKhau.ChietKhauTheoSoTien) {\n          if (item.SoTien != null && item.SoTien != 0) {\n            this.disableSoTien = true;\n            this.disableInputSoTien = true;\n            this.soTienBanDau = item.SoTien;\n          } else {\n            this.disableSoTien = false;\n            this.disableInputSoTien = false;\n            item.TongTienMiemGiam = 0;\n          }\n        }\n      });\n    }\n  }\n}\n","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 0;\\n  padding-bottom: 100%;\\n  background: #ebeced;\\n}\\n\\n.container-iframe iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvYXAtZHVuZy1taWVtLWdpYW0tdGhlbS1wb3B1cC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXGFwLWR1bmctbWllbS1naWFtLXRoZW0tcG9wdXBcXGFwLWR1bmctbWllbS1naWFtLXRoZW0tcG9wdXAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2FwLWR1bmctbWllbS1naWFtLXRoZW0tcG9wdXAvYXAtZHVuZy1taWVtLWdpYW0tdGhlbS1wb3B1cC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2FwLWR1bmctbWllbS1naWFtLXRoZW0tcG9wdXAvYXAtZHVuZy1taWVtLWdpYW0tdGhlbS1wb3B1cC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXItaWZyYW1lIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAwO1xuICBwYWRkaW5nLWJvdHRvbTogMTAwJTtcbiAgYmFja2dyb3VuZDogI2ViZWNlZDtcbn1cblxuLmNvbnRhaW5lci1pZnJhbWUgaWZyYW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59IiwiLmNvbnRhaW5lci1pZnJhbWUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDA7XG4gIHBhZGRpbmctYm90dG9tOiAxMDAlO1xuICBiYWNrZ3JvdW5kOiAjZWJlY2VkO1xufVxuXG4uY29udGFpbmVyLWlmcmFtZSBpZnJhbWUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn0iXX0= */\"","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from \"@angular/material\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport icClose from \"@iconify/icons-ic/twotone-close\";\nimport { ApDungMiemGiamThem } from \"../quay-thuoc.model\";\n\n@Component({\n  selector: 'app-ap-dung-miem-giam-them-popup',\n  templateUrl: './ap-dung-miem-giam-them-popup.component.html',\n  styleUrls: ['./ap-dung-miem-giam-them-popup.component.scss']\n})\nexport class ApDungMiemGiamThemPopupComponent implements OnInit {\n\n  icClose = icClose;\n  disablePhanTram: boolean = true;\n  disableSoTien: boolean = true;\n  apDungMiemGiamThem = new ApDungMiemGiamThem;\n  validationErrors: any;\n\n  constructor(@Inject(MAT_DIALOG_DATA) public data: any,\n    public sanitizer: DomSanitizer,\n    private cdRef: ChangeDetectorRef,\n    private dialogRef: MatDialogRef<any>\n  ) {\n\n  }\n\n  ngOnInit() {\n  }\n\n  apDungPhanTram(ev: any) {\n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n\n    this.disablePhanTram = !ev;\n    this.apDungMiemGiamThem.TiLe = 0;\n  }\n\n  apDungSoTien(ev: any) {\n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n\n    this.disableSoTien = !ev;\n    this.apDungMiemGiamThem.SoTien = 0;\n  }\n\n  replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, \"g\"), replace);\n  }\n\n  HuyApDungMGT() {\n    this.dialogRef.close(null);\n  }\n  ApDungMGT() {    \n    this.validationErrors = [];\n    this.cdRef.detectChanges();\n    if (this.apDungMiemGiamThem.ChietKhauTheoTiLe && (this.apDungMiemGiamThem.TiLe === undefined || this.apDungMiemGiamThem.TiLe === 0)) {\n      this.validationErrors.push({\n        Message: \"Vui lòng nhập tỉ lệ miễn giảm.\",\n        Field: \"TiLe\",\n      });\n    }\n    if (this.apDungMiemGiamThem.ChietKhauTheoSoTien && (this.apDungMiemGiamThem.SoTien === undefined || this.apDungMiemGiamThem.SoTien === 0)) {\n      this.validationErrors.push({\n        Message: \"Vui lòng nhập số tiền miễn giảm.\",\n        Field: \"SoTien\",\n      });\n    }\n    if (this.validationErrors.length > 0) {\n      return false;\n    }\n    else{\n      this.dialogRef.close(this.apDungMiemGiamThem);\n    }  \n\n    //====================================trường hơp ko chọn gì hết====================================\n    if(!this.apDungMiemGiamThem.ChietKhauTheoTiLe && !this.apDungMiemGiamThem.ChietKhauTheoSoTien){\n      this.dialogRef.close(null);\n    } \n    //=================================================================================================\n    \n  }\n  close() {\n    this.dialogRef.close(null);\n  }\n}\n\n","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 500px;\\n  background: #ebeced;\\n}\\n\\n.container-iframe iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvaW4tYmFuZy10aHUtdGllbi1wb3AtdXAvQzpcXHByb2plY3RcXGZyZWVsYW5jZXJcXGhvc3BpdGFsL3NyY1xcYXBwXFxtb2R1bGVzXFxtYWluXFxxdWF5LXRodW9jXFxpbi1iYW5nLXRodS10aWVuLXBvcC11cFxcaW4tYmFuZy10aHUtdGllbi1wb3AtdXAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2luLWJhbmctdGh1LXRpZW4tcG9wLXVwL2luLWJhbmctdGh1LXRpZW4tcG9wLXVwLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2luLWJhbmctdGh1LXRpZW4tcG9wLXVwL2luLWJhbmctdGh1LXRpZW4tcG9wLXVwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lci1pZnJhbWUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDUwMHB4O1xuICBiYWNrZ3JvdW5kOiAjZWJlY2VkO1xufVxuXG4uY29udGFpbmVyLWlmcmFtZSBpZnJhbWUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn0iLCIuY29udGFpbmVyLWlmcmFtZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNTAwcHg7XG4gIGJhY2tncm91bmQ6ICNlYmVjZWQ7XG59XG5cbi5jb250YWluZXItaWZyYW1lIGlmcmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufSJdfQ== */\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\nimport icClose from '@iconify/icons-ic/twotone-close';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n    // tslint:disable-next-line: component-selector\n    selector: 'app-in-bang-thu-tien-pop-up',\n    templateUrl: './in-bang-thu-tien-pop-up.component.html',\n    styleUrls: ['./in-bang-thu-tien-pop-up.component.scss']\n})\nexport class InBangThuTienPopUpComponent implements OnInit {\n    hostingName: string;\n    src = '';\n    icClose = icClose;\n    InPhieuThu : boolean;\n    InBangKe : boolean;\n    loaiPhieu : any ;\n    kiemtraPhieuInManhinh: boolean = false;\n    constructor(\n        @Inject(MAT_DIALOG_DATA) public data: any,\n        public sanitizer: DomSanitizer,\n        private dialog: MatDialog\n    ) {      \n    }\n    modelPrint: any;\n    ngOnInit() {\n        this.modelPrint = this.data.Model;\n        this.kiemtraPhieuInManhinh = this.data.InDonThuocDanhSachList;\n        this.InPhieuThu = this.data.InPhieuThu;\n        this.InBangKe = this.data.InBangKe;\n        this.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(this.data.Model);\n\n    }\n\n    InPhieu(loaiPhieu){\n        this.loaiPhieu = loaiPhieu;\n        this.getSharedPrintForm();\n    }\n    getSharedPrintForm() {\n        const tmpBangKeThu =\n            '<table id=\\'showHeader\\' style=\\'width: 100%; height: 40px; background: #005dab;color:#fff;\\'> <tr><th rowspan = \\'3\\' style = \\'font-size: 20px;\\'>BẢNG KÊ THU TIỀN THUỐC</th></tr></table>';\n        const tmpPhieuThu =\n            '<table class=\\'showHeader\\' style=\\'width: 100%; height: 40px; background: #005dab;color:#fff;\\'> <tr><th rowspan = \\'3\\' style = \\'font-size: 20px;\\'>PHIẾU THU</th></tr></table>';\n        \n            let data: string;\n            \n        data = this.modelPrint.replace(tmpBangKeThu, '');\n        data = data.replace(tmpPhieuThu, '');\n        // in 2 phieu theo ngang-doc kho a5\n        let dataphieukeThuTienThuoc = data.split('<div class=\\\"pagebreak\\\"></div>');\n\n\n        if(this.loaiPhieu == 1)\n        {\n            return new Promise(resolve => {\n                resolve(dataphieukeThuTienThuoc[0]);\n            });\n        }\n        else{\n            if(dataphieukeThuTienThuoc[1] != undefined || dataphieukeThuTienThuoc[1] != null){\n                return new Promise(resolve => {\n                    resolve(dataphieukeThuTienThuoc[1]);\n                });\n            }\n           else{\n               let message =\"Không có phiếu thu tiền\"\n            return new Promise(resolve => {\n                resolve(message);\n            });\n           }\n        }\n    }\n\n    close() {\n        this.dialog.closeAll();\n    }\n}\n","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 500px;\\n  background: #ebeced;\\n}\\n\\n.container-iframe iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvaW4tZG9uLXRodW9jLXBvcC11cC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXGluLWRvbi10aHVvYy1wb3AtdXBcXGluLWRvbi10aHVvYy1wb3AtdXAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL2luLWRvbi10aHVvYy1wb3AtdXAvaW4tZG9uLXRodW9jLXBvcC11cC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQ0NGOztBREVBO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL21haW4vcXVheS10aHVvYy9pbi1kb24tdGh1b2MtcG9wLXVwL2luLWRvbi10aHVvYy1wb3AtdXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyLWlmcmFtZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNTAwcHg7XG4gIGJhY2tncm91bmQ6ICNlYmVjZWQ7XG59XG5cbi5jb250YWluZXItaWZyYW1lIGlmcmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufSIsIi5jb250YWluZXItaWZyYW1lIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiA1MDBweDtcbiAgYmFja2dyb3VuZDogI2ViZWNlZDtcbn1cblxuLmNvbnRhaW5lci1pZnJhbWUgaWZyYW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59Il19 */\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\nimport icClose from '@iconify/icons-ic/twotone-close';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-in-don-thuoc-pop-up',\n  templateUrl: './in-don-thuoc-pop-up.component.html',\n  styleUrls: ['./in-don-thuoc-pop-up.component.scss']\n})\nexport class InDonThuocPopUpComponent implements OnInit {\n\n  hostingName: string;\n  src = '';\n  icClose = icClose;\n  InPhieuThu : boolean;\n  InBangKe : boolean;\n  loaiPhieu : any ;\n  kiemtraPhieuInManhinh: boolean = false;\n  constructor(\n      @Inject(MAT_DIALOG_DATA) public data: any,\n      public sanitizer: DomSanitizer,\n      private dialog: MatDialog\n  ) {      \n  }\n  modelPrint: any;\n  ngOnInit() {\n      this.modelPrint = this.data.Model;\n      this.kiemtraPhieuInManhinh = this.data.InDonThuocDanhSachList;\n      this.InPhieuThu = this.data.InPhieuThu;\n      this.InBangKe = this.data.InBangKe;\n      this.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(this.data.Model);\n\n  }\n\n  InPhieu(loaiPhieu){\n      this.loaiPhieu = loaiPhieu;\n      this.getSharedPrintForm();\n  }\n  getSharedPrintForm() {\n      const tmpBHYT =\n          \"<p  style='background: #005dab;color:#fff; height:40px; font-size:30px;text-align:center'>\" +\n          \"<th>TOA THUỐC BẢO HIỂM Y TẾ</th>\" +\n          \"</p>\";\n      const tmpKBHYT =\n          \"<p  style='background: #005dab;color:#fff; height:40px; font-size:30px;text-align:center'>\" +\n          \"<th>TOA THUỐC KHÔNG BẢO HIỂM Y TẾ</th>\" +\n          \"</p>\";\n      const tmpTNBV =\n          \"<p  style='background: #005dab;color:#fff; height:40px; font-size:30px;text-align:center'>\" +\n          \"<th>TOA THUỐC NGOÀI BỆNH VIỆN</ th>\" +\n          \"</p>\";\n\n          const tmpTuVan =\n          \"<p  style='background: #005dab;color:#fff; height:40px; font-size:30px;text-align:center'>\" +\n                                 \"<th>ĐƠN TƯ VẤN</ th>\" +\n                                 \"</p>\";\n      let data: string;\n      data = this.modelPrint.replace(tmpBHYT, '');\n      data = data.replace(tmpKBHYT, '');\n      data = data.replace(tmpKBHYT, '');\n      data = data.replace(tmpTuVan, '');\n      data = data.replace(tmpTNBV, '');\n      // in 2 phieu theo ngang-doc kho a5\n      let dataphieukeThuTienThuoc = data.split('<div class=\\\"pagebreak\\\"></div>');\n      if(this.loaiPhieu == 1)\n      {\n          return new Promise(resolve => {\n              resolve(dataphieukeThuTienThuoc[0]);\n          });\n      }\n      else{\n          if(dataphieukeThuTienThuoc[1] != undefined || dataphieukeThuTienThuoc[1] != null){\n              return new Promise(resolve => {\n                  resolve(dataphieukeThuTienThuoc[1]);\n              });\n          }\n         else{\n             let message =\"Không có phiếu thu tiền\"\n          return new Promise(resolve => {\n              resolve(message);\n          });\n         }\n      }\n  }\n\n  close() {\n      this.dialog.closeAll();\n  }\n\n}\n","// export class QuayXuatThuoc {\n//     constructor(\n//         public Id: number = 0,\n//         public MaTN: string = null,\n//         public MaBN: string = null,\n//         public HoTen: string = null,\n//         public SoDon: string = \"\",\n\nimport { Sort } from 'src/app/shared/models/common.model';\n\n//         public ThoiDiemCapPhatThuoc: string = null,\n//         public NgayThuStr: string = null,\n//     ) { }\n\n// }\nexport class QuayXuatThuoc {\n    constructor(\n        public ThoiDiemTiepNhanTuFormat: any = null,\n        public ThoiDiemTiepNhanDenFormat: any = null,\n        public FromDate: any = null,\n        public ToDate: any = null\n    ) { }\n}\nexport class TagItem {\n    constructor(\n        public Key: string = null,\n        public Value: string = null,\n        public ValueDisplay: string = null,\n        public Title: string = null\n    ) { }\n}\nexport class BenhNhanThongTin {\n    constructor(\n        public Id: number = null,\n        public MaBN: string = null,\n        public MaYeuCauTiepNhan: string = null,\n        public HoTen: string = null,\n        public GioiTinh: string = null,\n        public GioiTinhHienThi: string = null,\n        public NamSinh: string = null,\n        public DiaChi: string = null,\n        public DiaChiDayDu: string = null,\n        public SoDienThoai: string = null,\n        public Email: string = null,\n        public SoDuTaiKhoan: number = 0\n    ) { }\n\n}\nexport class DanhSachThuoc {\n    constructor(\n        public Id: number = 0,\n        public ThuocBHYT: any[] = [],\n        public ThuocKhongBHYT: any[] = [],\n\n    ) { }\n}\n\nexport class XacNhanInViewModel {\n    constructor(\n        public TaiKhoanBenhNhanThuId: number = null,\n        public InPhieuThu: boolean = null,\n        public InBangKe: boolean = null,\n        public Hosting: string = null\n    ) { }\n}\n\nexport class XacNhanInThuocViewModel {\n    constructor(\n        public TiepNhanId: number = null,\n        public Hosting: string = null,\n        public IsBhyt: boolean = null,\n    ) { }\n}\nexport class ExportQueryInfoQueryInfo  {\n    constructor(\n        public Skip: number =0,\n        public Take: number =50 ,\n        public PageSize: number =50,\n        public SearchString: string =\"\",\n        public AdditionalSearchString: string =\"\",\n        // public searchTerms: string = \"\",\n        public Sort: Sort[] = []\n    ) { }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtY2hvLXRoYW5oLXRvYW4vcXVheS10aHVvYy1jaG8tdGhhbmgtdG9hbi5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, Input, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { ThongTinBenhNhan } from '../quay-thuoc.model';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent } from '../quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component';\nimport { MatDialog } from '@angular/material';\nimport { QuayThuocListComponent } from 'src/app/modules/main/quay-thuoc/quay-thuoc-list/quay-thuoc-list.component';\nimport { LocalStorageHelper } from 'src/app/core/utilities/local-storage.helper';\nimport { GridComponent } from 'src/app/shared/component/grid/grid.component';\n\n@Component({\n  selector: 'app-quay-thuoc-cho-thanh-toan',\n  templateUrl: './quay-thuoc-cho-thanh-toan.component.html',\n  styleUrls: ['./quay-thuoc-cho-thanh-toan.component.scss']\n})\nexport class QuayThuocChoThanhToanComponent implements OnInit {\n  id: number = 0;\n  benhNhan: ThongTinBenhNhan;\n  typeDanhSachThanhToan: number = 0;\n  xacNhanIn: boolean = false;\n  queryStringSearchUuTien: string;\n  dataQuayThuocSearch: any;\n  hoquerySearch : boolean ;\n  @ViewChild(GridComponent, { static: true }) gridChild: GridComponent;\n  @ViewChild(QuayThuocListComponent, { static: true }) gridQuayThuocList: QuayThuocListComponent;\n  constructor(private router: Router, private route: ActivatedRoute, private cd: ChangeDetectorRef, private dialog: MatDialog) { }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.id = params.page;  // id là đã thanh toán\n      this.hoquerySearch = params.hoQuerysearch;\n    });\n    if (this.id == undefined) {\n      LocalStorageHelper.removeItem(\"additionalSearchStringChiTietNhaThuoc\");\n    }\n    if (this.id == 1) {\n      this.typeDanhSachThanhToan = 1;\n      var searching = LocalStorageHelper.getItem<string>(\"additionalSearchStringChiTietNhaThuoc\");\n      this.queryStringSearchUuTien =searching;\n    }\n    if (this.id == 2) {\n      this.typeDanhSachThanhToan = 2;\n      var searching = LocalStorageHelper.getItem<string>(\"additionalSearchStringChiTietNhaThuoc\");\n      this.queryStringSearchUuTien =searching;\n    }\n    if (this.id == 3) {\n      this.typeDanhSachThanhToan = 3;\n      var searching = LocalStorageHelper.getItem<string>(\"additionalSearchStringChiTietNhaThuoc\");\n      this.queryStringSearchUuTien =searching;\n    }\n    if (this.id == 0) {\n      this.typeDanhSachThanhToan = 0;\n      var searching = LocalStorageHelper.getItem<string>(\"additionalSearchStringChiTietNhaThuoc\");\n      this.queryStringSearchUuTien =searching;\n    }\n\n  }\n\n  getonHaddleDataSearch(event) {\n    this.dataQuayThuocSearch = event;\n  }\n  ToKhachVangLai(typeDanhSachThanhToan: any) {\n    //this.router.navigate(['nha-thuoc'], { queryParams: { page: type} });\n    this.router.navigate(['nha-thuoc/khach-vang-lai'], { queryParams: { page: typeDanhSachThanhToan } });\n  }\n  getkiemTraDonThuocThanhToan(event: any) {\n    this.cd.detectChanges();\n    // this.typeDanhSachThanhToan = event;\n  }\n  getonHaddleUuTienSearch(event: any) {\n    // this.gridQuayThuocList.queryStringSearchUuTien = null;\n    this.queryStringSearchUuTien = event;\n    this.cd.detectChanges();\n  }\n  KiemTraeXportExel(event: any) {\n    this.xacNhanIn = event;\n  }\n  getData(event: any) {\n    this.benhNhan = event;\n    // if (this.benhNhan.YeuCauTiepNhanId > 0) {\n    //   this.router.navigate(['nha-thuoc/mua-thuoc/' + this.benhNhan.YeuCauTiepNhanId + '/' + this.benhNhan.MaBenhNhan + '/' + event.TrangThaiThanhToan + '/'+ this.typeDanhSachThanhToan]);\n    // }\n    // else {\n    //   if(this.benhNhan.)\n    //   this.router.navigate(['nha-thuoc/mua-toa-cu/' + this.benhNhan.MaBenhNhan + '/' + this.typeDanhSachThanhToan]);\n    // }\n    if (event.Id > 0) {\n      // this.router.navigate(['nha-thuoc/mua-thuoc/' + event.Id + '/' + event.MaBN + '/' + event.TrangThaiThanhToan + '/'+ this.typeDanhSachThanhToan]);\n      this.router.navigate(['nha-thuoc/mua-thuoc/' + event.Id + '/' + event.MaBN + '/' + event.TrangThai + '/' + this.typeDanhSachThanhToan]);\n    }\n    else {\n      if (event.DonThuocThanhToanExits == true) {\n        this.router.navigate(['nha-thuoc/mua-toa-cu/' + event.MaBN + '/' + this.typeDanhSachThanhToan]);\n      }\n      else {\n        let dialogRef = this.dialog.open(QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent, {\n          disableClose: true,\n          width: '500px',\n          data: { Model: event, KiemTraThanhToan: this.typeDanhSachThanhToan, Title: \"XÁC NHẬN\" }\n        }).afterClosed().subscribe(result => {\n        });\n      }\n    }\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtY2hvLXh1YXQtdGh1b2MvcXVheS10aHVvYy1jaG8teHVhdC10aHVvYy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, ViewChild, TemplateRef, Input, OnChanges } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { danhSachThuoc } from '../quay-thuoc.model';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { MatDialog } from '@angular/material';\nimport { ConfirmComponent } from 'src/app/shared/component/dialogs/confirm/confirm.component';\nimport { InBangThuTienPopUpComponent } from '../in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\n\n@Component({\n    selector: 'app-quay-thuoc-cho-xuat-thuoc',\n    templateUrl: './quay-thuoc-cho-xuat-thuoc.component.html',\n    styleUrls: ['./quay-thuoc-cho-xuat-thuoc.component.scss']\n})\nexport class QuayThuocChoXuatThuocComponent implements OnInit, OnChanges {\n    id: number = this.route.snapshot.params.id;\n    gridColumns: any[] = [];\n    danhSachThuoc: danhSachThuoc;\n\n    @ViewChild('donGiaTemplate', { static: true }) donGiaTemplate: TemplateRef<any>;\n    @ViewChild('thanhTienTemplate', { static: true }) thanhTienTemplate: TemplateRef<any>;\n    @Input() flagOnce: boolean;\n    @Input() trangThaiXuatThuoc: number;\n    @Input() ttcheck: number;\n    dataSourcedanhsachThuocBHYT: any = {\n        data: [],\n        total: 0\n    };\n    dataSourcedanhsachThuocKhongBHYT: any = {\n        data: [],\n        total: 0\n    };\n    constructor(private route: ActivatedRoute, private dialog: MatDialog, private apiService: ApiService, private router: Router, private notificationService: NotificationService) { }\n\n    ngOnInit() {\n        this.danhSachThuoc = new danhSachThuoc();\n        this.GetThongTinDonThuoc(this.id);\n        this.gridColumns = [\n            { Field: \"STT\", Title: \"#\", Width: 40, Sortable: false },\n            { Field: \"TenDuocPham\", Title: \"Tên Thuốc\", Width: 190, Sortable: false },\n            { Field: \"NongDoVaHamLuong\", Title: \"Nồng độ / hàm lượng\", Width: 185, Sortable: false },\n            { Field: \"MaHoatChat\", Title: \"Hoạt chất\", Width: 185, Sortable: false },\n            { Field: \"DonViTinh\", Title: \"ĐVT\", Width: 94, Sortable: false },\n            { Field: \"SoLuongMua\", Title: \"SL Mua\", Width: 110, Sortable: false },\n            { Field: \"DonGia\", Title: \"Đơn giá\", Width: 129, Sortable: false, Template: this.donGiaTemplate },\n            { Field: \"ThanhTien\", Title: \"Thành tiền\", Width: 147, Sortable: false, Template: this.thanhTienTemplate },\n            { Field: \"Solo\", Title: \"Số lô\", Width: 109, Sortable: false },\n            { Field: \"HanSuDungHientThi\", Title: \"Hạn sử dụng\", Width: 146, Sortable: false },\n        ];\n    }\n\n    ngOnChanges() {\n        if (this.flagOnce == false) {\n            this.GetThongTinDonThuoc(this.id);\n            this.flagOnce = true;\n        }\n    }\n    loadingPage() {\n        var self = this;\n        var dialogRef = self.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '200px',\n            height: '90px',\n            data: { Title: \"Đang tải dữ liệu...\" }\n        });\n    }\n    GetThongTinDonThuoc(id: number) {\n        var self = this;\n        var dialogRef = self.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '200px',\n            height: '90px',\n            data: { Title: \"Đang tải dữ liệu...\" }\n        });\n        // this.apiService.post<Array<any>>(\"QuayThuoc/GetDanhSachXuatThuocBHYT?tiepNhanId=\" + id).subscribe(\n        //     resultData => {\n        //         this.dataSourcedanhsachThuocBHYT.data = resultData;\n        //         let index = 1;\n        //         this.dataSourcedanhsachThuocBHYT.data.forEach(x => {\n        //             x.STT = index;\n        //             index++;\n        //         });\n        //         this.danhSachThuoc.ThuocBHYT = [...this.dataSourcedanhsachThuocBHYT.data]\n        //     },\n        //     () => { });\n        this.apiService.post<Array<any>>(\"QuayThuoc/GetDanhSachXuatThuocKhongBHYT?tiepNhanId=\" + id).subscribe(\n            resultData => {\n                this.dataSourcedanhsachThuocKhongBHYT.data = resultData;\n                let index = 1;\n                this.dataSourcedanhsachThuocKhongBHYT.data.forEach(x => {\n                    x.STT = index;\n                    index++;\n                });\n                this.danhSachThuoc.ThuocKhongBHYT = [...this.dataSourcedanhsachThuocKhongBHYT.data]\n            },\n            () => { });\n            dialogRef.close();\n    }\n    GuiData() {\n        this.danhSachThuoc.Id = this.id;\n        this.dialog.open(ConfirmComponent, {\n            disableClose: false,\n            width: '400px',\n            data: { Title: \"Xác nhận\", Message: \"Bạn chắc chắn muốn xuất đơn thuốc này?\" }\n        }).afterClosed().subscribe(result => {/* result is a string:Yes,No,No answer*/\n            if (result == \"Yes\") {\n                this.apiService.post<any>(\"QuayThuoc/XuatDonThuocBHYT\", this.danhSachThuoc).subscribe(\n                    resultData => {\n                        if (resultData != null && resultData != undefined && resultData != \"\") {\n                            this.notificationService.showError(resultData);\n                        } else {\n                            if (this.ttcheck == 1) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck ,hoQuerysearch:false} });\n                            }\n                            if (this.ttcheck == 2) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck ,hoQuerysearch:false} });\n                            }\n                            if (this.ttcheck == 3) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck,hoQuerysearch:false } });\n                            }\n                            if (this.ttcheck == 0) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck,hoQuerysearch:false } });\n                            }\n                        }\n                    },\n                    (err: any) => {\n\n                    });\n            }\n        });\n    }\n\n    KeThuoc() {\n        this.showPopupLoadingIn();\n        var data = {\n            Hosting: null,\n            TiepNhanId: this.id\n        }\n        \n        data.Hosting  = window.location.protocol + '//' + window.location.host;\n        this.apiService.postExportPdf<any>(\"QuayThuoc/XacNhanInThuocCoBhyt\", data).subscribe(\n            (resultData) => {               \n                if(resultData !=undefined && resultData != null)\n                {\n                    this.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                        disableClose: true,\n                        width: '1000px',\n                        data: { Model: resultData }\n                    }).afterClosed().subscribe(() => { \n                        this.closePopupLoadingData();\n                    });\n                }\n\n            }, (err: ApiError) => {\n                if (err.Message !== 'Validation Failed') {\n                  this.notificationService.showError(err.Message);\n                }\n                this.closePopupLoadingData();\n              });\n    }\n    showPopupLoadingIn() {\n        this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '250px',\n            height: '90px',\n            data: { Title: 'Đang loading...' },\n        });\n    }\n\n    closePopupLoadingData() {\n        this.dialog.closeAll();\n    }\n}\n","export default \"#SoLuongTon input {\\n  font-weight: bold;\\n  color: green;\\n}\\n\\n.color-red {\\n  color: red;\\n}\\n\\n.reverse-ellipsis.r {\\n  text-align: right;\\n  direction: inherit;\\n}\\n\\n.mat-icon {\\n  font-size: 16px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1oaW5oLXRodWMtdGhhbmgtdG9hbi9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHF1YXktdGh1b2MtaGluaC10aHVjLXRoYW5oLXRvYW5cXHF1YXktdGh1b2MtaGluaC10aHVjLXRoYW5oLXRvYW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtaGluaC10aHVjLXRoYW5oLXRvYW4vcXVheS10aHVvYy1oaW5oLXRodWMtdGhhbmgtdG9hbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsWUFBQTtBQ0NGOztBREVBO0VBQ0UsVUFBQTtBQ0NGOztBREVBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtBQ0NGOztBREVBO0VBQ0UsMEJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtaGluaC10aHVjLXRoYW5oLXRvYW4vcXVheS10aHVvYy1oaW5oLXRodWMtdGhhbmgtdG9hbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNTb0x1b25nVG9uIGlucHV0IHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiBncmVlbjtcbn1cblxuLmNvbG9yLXJlZCB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5yZXZlcnNlLWVsbGlwc2lzLnIge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgZGlyZWN0aW9uOiBpbmhlcml0O1xufVxuXG4ubWF0LWljb24ge1xuICBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDtcbn0iLCIjU29MdW9uZ1RvbiBpbnB1dCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogZ3JlZW47XG59XG5cbi5jb2xvci1yZWQge1xuICBjb2xvcjogcmVkO1xufVxuXG4ucmV2ZXJzZS1lbGxpcHNpcy5yIHtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGRpcmVjdGlvbjogaW5oZXJpdDtcbn1cblxuLm1hdC1pY29uIHtcbiAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7XG59Il19 */\"","import { Component, OnInit, OnChanges, Input, EventEmitter, Output, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport {\n    ThemDuocPham, ThongTinDuocPham, ThongTinDonThuoc, BenhNhanThongTin,\n    DanhSachCongNoChoThu, CongNoChoThu, CongNoVo,\n    ApDungMiemGiamThem, DanhSachMienGiamVo,\n    LoaiMienGiam, LoaiChietKhau,  NguoiDungKhongMuaDonThuoc\n} from '../quay-thuoc.model';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { MatDialog } from '@angular/material';\nimport icDelete from '@iconify/icons-ic/delete';\nimport { QuayThuocXacNhanInPopUpComponent } from '../quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component';\nimport { SelectAllCheckboxState } from '@progress/kendo-angular-grid';\nimport { process, State } from '@progress/kendo-data-query';\ndeclare var jQuery: any;\nimport icInfo from '@iconify/icons-ic/twotone-info';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { ConfirmComponent } from 'src/app/shared/component/dialogs/confirm/confirm.component';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\nimport { ComboboxComponent } from 'src/app/shared/component/dropdowns/combobox/combobox.component';\nimport icRoundEdit from '@iconify/icons-ic/edit';\nimport { ApDungMiemGiamThemPopupComponent } from '../ap-dung-miem-giam-them-popup/ap-dung-miem-giam-them-popup.component';\nimport { ApDungMiemGiamChoTungLoaiThuocPopupComponent } from '../ap-dung-miem-giam-cho-tung-loai-thuoc-popup/ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component';\nimport * as _ from 'underscore';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { SecurityOperation } from 'src/app/shared/enum/security-operation.enum';\nimport { CommonService } from 'src/app/core/utilities/common.helper';\nimport { SystemMessage } from 'src/app/shared/configdata/system-message';\nimport { AuthService } from 'src/app/core/services/auth.service';\n\n@Component({\n    // tslint:disable-next-line: component-selector\n    selector: 'app-quay-thuoc-hinh-thuc-thanh-toan',\n    templateUrl: './quay-thuoc-hinh-thuc-thanh-toan.component.html',\n    styleUrls: ['./quay-thuoc-hinh-thuc-thanh-toan.component.scss']\n})\nexport class QuayThuocHinhThucThanhToanComponent implements OnInit, OnChanges {\n    icInfo = icInfo;\n    icRoundEdit = icRoundEdit;\n    validationErrors: any[] = [];\n    validationThuThuocErrors: any[] = [];\n    id = 0;\n    idSub = 0;\n    tongTien = 0;\n    tongTienGrid = 0;\n    thongtinDonThuoc: ThongTinDonThuoc;\n    icDelete = icDelete;\n    themDuocPham: ThemDuocPham;\n    documentType: DocumentType;\n    lstthongTinDonThuoc: Array<ThongTinDuocPham>;\n    flagCheckSeletedTienMat = false;\n    flagCheckSeletedChuyenKhoan = false;\n    flagCheckSeletedPos = false;\n    flagCheckSeletedSoTienCongNo = false;\n    format: string = 'n2';\n    selectItem: number[] = [];\n    deleteItem: Array<ThongTinDuocPham>;\n    isSelectingItem: boolean = false;\n    public showCanhBaoSoTienNhap: boolean = false;\n\n    public hinhThucThanhToan: any = [\n        { KeyId: 1, DisplayName: \"Tiền mặt\", Selected: false, Change: false },\n        { KeyId: 2, DisplayName: \"Chuyển khoản\", Selected: false, Change: false },\n        { KeyId: 3, DisplayName: \"Pos\", Selected: false, Change: false },\n        { KeyId: 4, DisplayName: \"Công nợ\", Selected: false, Change: false },\n    ];\n\n    public setDefeautTienMat: any = [1];\n\n    constructor(private route: ActivatedRoute, private apiService: ApiService, private notificationService: NotificationService,\n        private dialog: MatDialog, private cdRef: ChangeDetectorRef, private authService: AuthService,private router: Router) { }\n    lstDonThuocMoiThem = Array<ThongTinDuocPham>();\n    public danhSachCongNoChoThus: DanhSachCongNoChoThu[] = [];\n    dataSourcedanhsachThuoc: any = {\n        data: [],\n        total: 0\n    };\n    maYCTNId = 0;\n    public keySelectBy = 'Id';\n    public mySelection: number[] = [];\n    public mySelectionInPage: number[] = [];\n    public selectAllState: SelectAllCheckboxState = 'unchecked';\n\n    public selectMoneyTienBNDua: any[] = null;\n    public selectMoneyTienMat: any[] = null;\n    public selectMoneyTienChuyenKhoan: any[] = null;\n    public selectMoneyTienPos: any[] = null;\n    public selectMoneySoTienCongNo: any[] = null;\n\n    @Output() danhSachChuaThanhToan = new EventEmitter<any>();\n\n    @Input() benhnhanThongTin: BenhNhanThongTin;\n    @Input() apDungCongNoThuoc = false;\n    @Input() apDungMienGiam = false;\n    @Input() thongTinTam: any = [];\n    @Input() viTri: number;\n    @Input() thongTinMienGiamVos: any;\n\n    @Output() afterChangedCongNo = new EventEmitter<any>();\n    @Output() afterChangedMg = new EventEmitter<any>();\n    @Output() changeTab = new EventEmitter<any>();\n    @ViewChild('duocPhamCombobox', { static: false }) duocPhamCombobox: ComboboxComponent;\n    public state: State = {};\n    public gridData: any = process(this.dataSourcedanhsachThuoc.data, this.state);\n    public apDungCNAndMiemGiam = false;\n\n    arrayThanhToans: any[] = [];\n    arrayThanhToanstmp: any[] = [];\n    confirm: any = null;\n\n    checkSeletedTienMat = false;\n    checkSeletedChuyenKhoan = false;\n    checkSeletedPos = false;\n    checkSeletedSoTienCongNo = false;\n\n    loaiYeuCauTiepNhanKhachVangLai: boolean = false;\n\n    closedialog: any;\n\n    public total(field: any) {\n        switch (field) {\n            case 'BNConPhaiThanhToan':\n                return this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n                    .reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0);\n            case 'SoTienMG':\n                return this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n                    .reduce((sum, item) => sum + item.SoTienMG, 0);\n            case 'ThanhTienHienThi':\n                return this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n                    .reduce((sum, item) => sum + item.ThanhTienHienThi, 0);\n            case 'BNConPhaiThanhToanHienThi':\n                return this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n                    .reduce((sum, item) => sum + item.BNConPhaiThanhToanHienThi, 0);\n            case 'ThanhTien':\n                return this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n                    .reduce((sum, item) => sum + item.ThanhTien, 0);\n        }\n    }\n\n    // update 28/12/2020\n    public apDungMGT = new ApDungMiemGiamThem;\n    confrim: any = null;\n    public danhSachMienGiamVo = new DanhSachMienGiamVo;\n    public loaiMienGiam = new LoaiMienGiam;\n    public loaiChietKhau = new LoaiChietKhau;\n\n    ngOnInit() {\n        this.documentType = DocumentType.QuayThuoc;\n        this.closedialog = this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '200px',\n            height: '90px',\n            data: {}\n        });\n        const tiepNhanId: number = this.route.snapshot.params.id;\n        this.maYCTNId = tiepNhanId;\n        const id: number = this.route.snapshot.params.id;\n        this.id = id;\n\n\n\n        this.idSub = this.route.snapshot.params.idsub;\n        this.thongtinDonThuoc = new ThongTinDonThuoc();\n        this.GetTenBenhNhan(this.idSub);\n        this.checkLoaiYCTN(tiepNhanId);\n        this.lstDonThuocMoiThem = new Array<ThongTinDuocPham>();\n        this.themDuocPham = new ThemDuocPham();\n        this.deleteItem = new Array<ThongTinDuocPham>();\n\n        if (this.benhnhanThongTin == null) {\n            this.benhnhanThongTin = new BenhNhanThongTin();\n        }\n        this.selectItem = [1];\n        this.checkSeletedTienMat = true;\n        this.flagCheckSeletedTienMat = true;\n        this.thongtinDonThuoc.NgayThu = new Date();\n        this.thongtinDonThuoc.NoiDungThu = 'Thu tiền thuốc';\n\n        this.hinhThucThanhToan = [\n            { KeyId: 1, DisplayName: \"Tiền mặt\", Selected: true, Change: false },\n            { KeyId: 2, DisplayName: \"Chuyển khoản\", Selected: false, Change: false },\n            { KeyId: 3, DisplayName: \"Pos\", Selected: false, Change: false },\n            { KeyId: 4, DisplayName: \"Công nợ\", Selected: false, Change: false },\n        ];;\n    }\n\n    checkLoaiYCTN(tiepNhanId: number) { // kiểm tra loại yêu cầu tiếp nhận  => nếu yctn là khách vãng lai grid => hidden miển giảm\n        this.apiService.post<any>('QuayThuoc/CheckLoaiYCTN?tiepNhanId=' + tiepNhanId).subscribe(\n            resultData => {\n                this.loaiYeuCauTiepNhanKhachVangLai = resultData;\n            });\n    }\n\n    ngOnChanges() {\n        if (this.apDungCongNoThuoc === true) {\n            this.apDungCNAndMiemGiam = true;\n            this.bindChiaTienCongNo();\n            const soTienCongNoApply = this.thongTinTam[this.viTri].SoTien;\n            const soTienTongHienTai = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n            if (soTienCongNoApply > soTienTongHienTai) {\n                this.notificationService.showError('Áp dụng công nợ thất bại.');\n            } else {\n                this.notificationService.showSuccess('Áp dụng công nợ thành công.');\n            }\n            this.afterChangedCongNo.emit();\n        }\n\n        if (this.apDungMienGiam === true) {\n            this.apDungCNAndMiemGiam = false;\n            this.getThongTinMienGiam(this.maYCTNId);\n        }\n    }\n\n    bindChiaPhanTramDoiTuongUuDai() {\n        if (this.danhSachCongNoChoThus.length > 0) {\n            this.bindChiaTienCongNo();\n            this.cdRef.detectChanges();\n        }\n\n        if (this.dataSourcedanhsachThuoc.data.length > 0) {\n            if (this.thongTinTam.length === 0) {\n                for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                    if (dsChiPhiKhamChuaBenh.CheckedDefault === true) {\n                        dsChiPhiKhamChuaBenh.TLMG = 0;\n                        dsChiPhiKhamChuaBenh.SoTienMG = 0;\n                        dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = dsChiPhiKhamChuaBenh.ThanhTien;\n                    }\n                }\n            }\n            //tiền miễn giảm số lẻ làm tròn xuống Math.floor , tiền Người bệnh Thanh toán làm tròn lên Math.round\n            if (this.thongTinMienGiamVos != undefined && this.thongTinMienGiamVos != null) {\n                // Case 3: Áp dụng voucher\n                if (this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo !== null &&\n                    Object.entries(this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo).length !== 0) {\n                    if (this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo.LoaiVoucher === 2) {\n                        let soTienMiemGiamThemConLaiVoucherCase = this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo.SoTienVoucherMiemGiam;\n                        let soTienMiemGiamThemConLaiTamVoucherCase = 0;\n                        for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                            const totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n                            if (dsChiPhiKhamChuaBenh.CheckedDefault === true) {\n                                if (dsChiPhiKhamChuaBenh.BNConPhaiThanhToan !== 0\n                                    && dsChiPhiKhamChuaBenh.BNConPhaiThanhToan < soTienMiemGiamThemConLaiVoucherCase) {\n                                    soTienMiemGiamThemConLaiTamVoucherCase = dsChiPhiKhamChuaBenh.BNConPhaiThanhToan;\n                                    dsChiPhiKhamChuaBenh.SoTienMG = Math.floor(dsChiPhiKhamChuaBenh.SoTienMG +\n                                        dsChiPhiKhamChuaBenh.BNConPhaiThanhToan);\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = (dsChiPhiKhamChuaBenh.ThanhTien -\n                                        totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG);\n                                    soTienMiemGiamThemConLaiVoucherCase = soTienMiemGiamThemConLaiVoucherCase -\n                                        dsChiPhiKhamChuaBenh.BNConPhaiThanhToan - soTienMiemGiamThemConLaiTamVoucherCase;\n                                }\n                                if (soTienMiemGiamThemConLaiVoucherCase > 0 &&\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan > soTienMiemGiamThemConLaiVoucherCase) {\n                                    dsChiPhiKhamChuaBenh.SoTienMG = dsChiPhiKhamChuaBenh.SoTienMG + soTienMiemGiamThemConLaiVoucherCase;\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = dsChiPhiKhamChuaBenh.ThanhTien - totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG;\n                                    soTienMiemGiamThemConLaiVoucherCase = 0;\n                                }\n                            }\n                        }\n                    }\n\n                    if (this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo.LoaiVoucher === 1) {\n                        // Case 2: Áp dụng voucher rãi đều % theo tông sô tiền SoTienVoucherMiemGiam\n                        let soTienVoucherConLai = this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo.SoTienVoucherMiemGiam;\n                        this.thongTinMienGiamVos.ThongTinMienGiamVoucherVo.DuocPhamMienGiamTheoTiLes.forEach(element => {\n                            for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                                if (dsChiPhiKhamChuaBenh.CheckedDefault === true) {\n                                    const totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n                                    if (dsChiPhiKhamChuaBenh.DuocPhamId === element.DuocPhamId) {\n                                        dsChiPhiKhamChuaBenh.TLMG = dsChiPhiKhamChuaBenh.TLMG + element.TiLe;\n                                        dsChiPhiKhamChuaBenh.SoTienMG = Math.floor(\n                                            ((dsChiPhiKhamChuaBenh.SoLuongMua * dsChiPhiKhamChuaBenh.DonGia - totalCongNo) *\n                                                element.TiLe) / 100);\n\n                                        if (dsChiPhiKhamChuaBenh.SoTienMG > dsChiPhiKhamChuaBenh.SoLuongMua\n                                            * dsChiPhiKhamChuaBenh.DonGia - totalCongNo) {\n                                            dsChiPhiKhamChuaBenh.SoTienMG = dsChiPhiKhamChuaBenh.SoLuongMua\n                                                * dsChiPhiKhamChuaBenh.DonGia - totalCongNo;\n                                        }\n\n                                        if (soTienVoucherConLai < dsChiPhiKhamChuaBenh.SoTienMG) {\n                                            dsChiPhiKhamChuaBenh.SoTienMG = soTienVoucherConLai;\n                                        }\n                                        soTienVoucherConLai = soTienVoucherConLai - dsChiPhiKhamChuaBenh.SoTienMG;\n                                        dsChiPhiKhamChuaBenh.BNConPhaiThanhToan =\n                                            (dsChiPhiKhamChuaBenh.SoLuongMua * dsChiPhiKhamChuaBenh.DonGia - totalCongNo)\n                                            - dsChiPhiKhamChuaBenh.SoTienMG;\n                                    }\n                                }\n                            }\n\n                        });\n                    }\n                }\n\n                // Case 2: Áp dụng ThongTinMienGiamThemVo\n                if (this.thongTinMienGiamVos.ThongTinMienGiamThemVo != undefined && this.thongTinMienGiamVos.ThongTinMienGiamThemVo != null &&\n                    Object.entries(this.thongTinMienGiamVos.ThongTinMienGiamThemVo).length !== 0) {\n                    if (this.thongTinMienGiamVos.ThongTinMienGiamThemVo.LoaiMienGiamThem === 1) {\n                        let soTienMiemGiamThemConLai = this.thongTinMienGiamVos.ThongTinMienGiamThemVo.SoTienMGConLai;\n                        let soTienMiemGiamThemConLaiTam = 0;\n                        for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                            const totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n                            if (dsChiPhiKhamChuaBenh.CheckedDefault === true) {\n                                if (dsChiPhiKhamChuaBenh.BNConPhaiThanhToan !== 0\n                                    && dsChiPhiKhamChuaBenh.BNConPhaiThanhToan <= soTienMiemGiamThemConLai) {\n                                    soTienMiemGiamThemConLaiTam = dsChiPhiKhamChuaBenh.BNConPhaiThanhToan;\n                                    dsChiPhiKhamChuaBenh.SoTienMG = Math.floor(dsChiPhiKhamChuaBenh.SoTienMG\n                                        + dsChiPhiKhamChuaBenh.BNConPhaiThanhToan);\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = dsChiPhiKhamChuaBenh.ThanhTien\n                                        - totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG;\n                                    soTienMiemGiamThemConLai = soTienMiemGiamThemConLai -\n                                        dsChiPhiKhamChuaBenh.BNConPhaiThanhToan - soTienMiemGiamThemConLaiTam;\n                                }\n                                if (soTienMiemGiamThemConLai > 0 && dsChiPhiKhamChuaBenh.BNConPhaiThanhToan > soTienMiemGiamThemConLai) {\n                                    dsChiPhiKhamChuaBenh.SoTienMG = dsChiPhiKhamChuaBenh.SoTienMG + soTienMiemGiamThemConLai;\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = dsChiPhiKhamChuaBenh.ThanhTien - totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG;\n                                    soTienMiemGiamThemConLai = 0;\n                                }\n                            }\n                        }\n                    } else {\n                        // Case 2: Áp dụng ThongTinMienGiamThemVo tỉ lệ miễm giảm\n                        let isApDungDichVuId = false;\n                        const tiLeMienGiam = this.thongTinMienGiamVos.ThongTinMienGiamThemVo.TiLeMienGiam;\n                        for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                            const totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n                            if (dsChiPhiKhamChuaBenh.CheckedDefault === true) {\n                                isApDungDichVuId = true;\n                                dsChiPhiKhamChuaBenh.TLMG = dsChiPhiKhamChuaBenh.TLMG + tiLeMienGiam;\n                                dsChiPhiKhamChuaBenh.SoTienMGThem = dsChiPhiKhamChuaBenh.SoTienMG;\n                                dsChiPhiKhamChuaBenh.SoTienMG = Math.floor(\n                                    ((dsChiPhiKhamChuaBenh.SoLuongMua * dsChiPhiKhamChuaBenh.DonGia - totalCongNo) *\n                                        dsChiPhiKhamChuaBenh.TLMG) / 100);\n                                dsChiPhiKhamChuaBenh.BNConPhaiThanhToan =\n                                    dsChiPhiKhamChuaBenh.ThanhTien - totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG;\n                            }\n                        }\n\n                        if (isApDungDichVuId) {\n                            for (const dsChiPhiKhamChuaBenh of this.dataSourcedanhsachThuoc.data) {\n                                if (dsChiPhiKhamChuaBenh.CheckedDefault === true && dsChiPhiKhamChuaBenh.SoTienMGThem !== undefined) {\n                                    const totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n                                    dsChiPhiKhamChuaBenh.SoTienMG = dsChiPhiKhamChuaBenh.SoTienMG + dsChiPhiKhamChuaBenh.SoTienMGThem;\n                                    if (dsChiPhiKhamChuaBenh.SoTienMG > (dsChiPhiKhamChuaBenh.SoLuongMua\n                                        * dsChiPhiKhamChuaBenh.DonGia - totalCongNo)) {\n                                        dsChiPhiKhamChuaBenh.SoTienMG = (dsChiPhiKhamChuaBenh.SoLuongMua\n                                            * dsChiPhiKhamChuaBenh.DonGia - totalCongNo);\n                                    }\n                                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan =\n                                        (dsChiPhiKhamChuaBenh.SoLuongMua * dsChiPhiKhamChuaBenh.DonGia - totalCongNo)\n                                        - dsChiPhiKhamChuaBenh.SoTienMG;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n\n        if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n            this.thongtinDonThuoc.TienMat = this.tongTien;\n\n            if (this.thongtinDonThuoc.BenhNhanDua > 0 && this.apDungMienGiam === true) {\n                this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n            }\n        }\n        this.gridData = this.dataSourcedanhsachThuoc.data;\n        this.myDanhSachChuaThanhToan();\n    }\n\n    itemTotalCongNo(danhSachCongNoChoThus: any): number {\n        let toatalCongNo = 0;\n        if (danhSachCongNoChoThus != null) {\n            danhSachCongNoChoThus.forEach(cn => {\n                toatalCongNo += cn.SoTienCongNoChoThu;\n            });\n        }\n        return toatalCongNo;\n    }\n\n    selectDataDanhSachDaChon(): number {\n        let totalThanhTien = 0;\n        this.dataSourcedanhsachThuoc.data.forEach(element => {\n            if (element.CheckedDefault === true) {\n                totalThanhTien += element.ThanhTien;\n            }\n        });\n        return totalThanhTien;\n    }\n\n    totalCongNoPrivate(): number {\n        let totalCongNoThanhToan = 0;\n        if (this.thongTinTam.length !== 0) {\n            // tslint:disable-next-line: prefer-for-of\n            for (let index = 0; index < this.thongTinTam.length; index++) {\n                totalCongNoThanhToan += this.thongTinTam[index].SoTien;\n            }\n        }\n        return totalCongNoThanhToan;\n    }\n\n    tinhTienCongNo(itemThanhTien, congNoId, totalTT): number {\n        let totalCongNo = 0;\n        // kiểm tra công nợ được áp dụng tiền\n        // tslint:disable-next-line: prefer-for-of\n        for (let index = 0; index < this.thongTinTam.length; index++) {\n            if (this.thongTinTam[index].CongNoId === congNoId) {\n                totalCongNo = this.thongTinTam[index].SoTien;\n            }\n        }\n        // const itemSoTienCongNo = Math.floor(parseFloat(((totalCongNo / totalTT) * itemThanhTien).toPrecision(15)));\n        // return itemSoTienCongNo;\n        var itemSoTienCongNo = Math.round(parseFloat(((totalCongNo / totalTT) * (itemThanhTien)).toPrecision(15)) * 100) / 100;\n        return itemSoTienCongNo;\n    }\n\n    tinhTiLeMiemGiamInGrid(data: any) {\n        const tongCongNoItem = this.itemTotalCongNo(data.DanhSachCongNoChoThus);\n        const sumSoTienBenhNhanTra = (data.ThanhTien - tongCongNoItem);\n        if (sumSoTienBenhNhanTra === 0) {\n            return 0;\n        }\n        return Math.round((data.SoTienMG / sumSoTienBenhNhanTra) * 100);\n    }\n\n\n    bindChiaTienCongNo() {\n        const totalTT = this.selectDataDanhSachDaChon();\n        const totalCongNo = this.totalCongNoPrivate();\n\n        if (totalCongNo > totalTT) {\n            this.notificationService.showError('Số tiền thanh toán công nợ không hợp lệ');\n            return;\n        }\n\n        if (this.danhSachCongNoChoThus[0].CongNoChoThus.length !== 0) {\n            this.danhSachCongNoChoThus[0].CongNoChoThus.forEach(congNo => {\n                if (congNo.ViTri === this.viTri) {\n                    if (this.thongTinTam.length !== 0) {\n                        congNo.SoTienCongNoChoThu = this.thongTinTam[this.viTri].SoTien;\n                    }\n                }\n            });\n        }\n\n        // mỗi lần cập nhật công nợ thông tin tạm thì sẽ luôn cập nhập thông tin đơn thuốc danh sách công nợ (dùng cho việc thu tiền)\n        this.thongTinTam.forEach(element => {\n            this.thongtinDonThuoc.DanhSachCongNos.forEach(congNoDonThuoc => {\n                if (element.CongNoId === congNoDonThuoc.CongTyCongNoId) {\n                    congNoDonThuoc.SoTienCongNo = element.SoTien;\n                }\n            });\n        });\n\n        if (this.thongTinTam.length > 0) {\n            const danhSachCongNoChoThu = new DanhSachCongNoChoThu();\n            for (let index = 0; index < this.thongTinTam.length; index++) {\n                const congNo = new CongNoChoThu();\n                congNo.ViTri = index;\n                congNo.CongNoId = this.thongTinTam[index].CongNoId;\n                congNo.TenCongTy = this.thongTinTam[index].TenCongTy;\n                congNo.SoTienCongNoChoThu = 0;\n                danhSachCongNoChoThu.CongNoChoThus.push(congNo);\n            }\n\n            const lastItem = this.findLast();\n            let tongCongNo = 0;\n\n            for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n                if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                    if (this.viTri !== -1) {\n                        this.dataSourcedanhsachThuoc.data[index].TLMG = 0;\n                        this.dataSourcedanhsachThuoc.data[index].SoTienMG = 0;\n                        this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan =\n                            (this.dataSourcedanhsachThuoc.data[index].SoLuongMua * this.dataSourcedanhsachThuoc.data[index].DonGia)\n                            - ((this.dataSourcedanhsachThuoc.data[index].SoLuongMua *\n                                this.dataSourcedanhsachThuoc.data[index].DonGia) * this.dataSourcedanhsachThuoc.data[index].TLMG / 100);  // to do Math.round\n                        if (index === lastItem) {\n                            this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri]\n                                .SoTienCongNoChoThu = this.apDungCNAndMiemGiam ?\n                                    this.thongTinTam[this.viTri].SoTien - tongCongNo :\n                                    this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri].SoTienCongNoChoThu;\n                        }\n\n                        if (index !== lastItem) {\n                            if (this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.length > 0) {\n                                this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri].SoTienCongNoChoThu =\n                                    danhSachCongNoChoThu.CongNoChoThus[this.viTri].SoTienCongNoChoThu = this.apDungCNAndMiemGiam ?\n                                        this.tinhTienCongNo(this.dataSourcedanhsachThuoc.data[index].ThanhTien,\n                                            danhSachCongNoChoThu.CongNoChoThus[this.viTri].CongNoId,\n                                            totalTT) :\n                                        this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri].SoTienCongNoChoThu;\n                                tongCongNo += this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri].SoTienCongNoChoThu;\n                            }\n                        }\n\n                        this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu =\n                            this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                    }\n                } else {\n                    if (this.viTri !== -1) {\n                        this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[this.viTri].SoTienCongNoChoThu =\n                            danhSachCongNoChoThu.CongNoChoThus[this.viTri].SoTienCongNoChoThu = 0;\n                    }\n                }\n            }\n\n            this.dataSourcedanhsachThuoc.data.forEach(element => {\n                let totalCongNoEle = 0;\n                element.DanhSachCongNoChoThus.forEach(elementCongNo => {\n                    totalCongNoEle += elementCongNo.SoTienCongNoChoThu;\n                });\n                let soTienMG = this.tinhSoTienMiemGiam(element);\n                element.SoTienMG = soTienMG;\n                return element.BNConPhaiThanhToan = element.ThanhTien - totalCongNoEle - element.SoTienMG;\n            });\n        }\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n\n        this.myDanhSachChuaThanhToan();\n        this.cdRef.detectChanges();\n    }\n\n    findLast() {\n        for (let index = this.dataSourcedanhsachThuoc.data.length - 1; index >= 0; index--) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                return index;\n            }\n        }\n        return -1;\n    }\n\n    myDanhSachChuaThanhToan() {\n        const danhSachChuaThanhToans: any = [];\n        this.dataSourcedanhsachThuoc.data.forEach(element => {\n            let totalCongNoEle = 0;\n            if (element.CheckedDefault) {\n                element.SoTienMG = this.tinhSoTienMiemGiam(element);\n                element.DanhSachCongNoChoThus.forEach(elementCongNo => {\n                    totalCongNoEle += elementCongNo.SoTienCongNoChoThu;\n                });\n                let soTienMG = this.tinhSoTienMiemGiam(element);\n                element.SoTienMG = soTienMG;\n                element.BNConPhaiThanhToan = element.ThanhTien - totalCongNoEle - element.SoTienMG;\n                danhSachChuaThanhToans.push(element);\n            }\n        });\n\n        this.danhSachXemTruocBangKeThuocVaVatTu(danhSachChuaThanhToans);\n    }\n\n    danhSachXemTruocBangKeThuocVaVatTu(danhSachChuaThanhToans: any) {\n        // lý do trả về danhSachChuaThanhToan cho quay-thuoc-mua-thuoc.component\n        // để xem trước bảng kê\n        this.danhSachChuaThanhToan.emit(danhSachChuaThanhToans);\n    }\n\n    setSelectAll() {\n        setTimeout(function () {\n            if (!jQuery('#selectAllCheckboxId').prop('checked')) {\n                jQuery('#selectAllCheckboxId').trigger('click');\n            }\n        }, 1000);\n    }\n\n    chuyenDen(event: any) {\n        if (event.index === 0) {\n            this.cdRef.detectChanges();\n            this.clearHinhThucThanhToan();\n            this.defeautSoTien();\n\n            this.setDefeautTienMat = [1];\n            this.checkSeletedTienMat = true;\n            this.flagCheckSeletedTienMat = true;\n\n            this.GetThongTinDonThuoc(this.maYCTNId);\n            this.getDanhSachBHTN();\n\n            let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n            if (items != null && items.length > 0) {\n                this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n            }\n        }\n    }\n\n    onSelectChangeCheckbox(e: any, val: any) {\n        this.unCheckedBindSoTienMG(val);\n        this.mySelection = [];\n        if (e.target.checked) {\n            this.mySelectionInPage.push(val);\n        }\n        else {\n            this.mySelectionInPage.splice(this.mySelectionInPage.indexOf(val), 1);\n        }\n        var allData = this.dataSourcedanhsachThuoc.data;\n        const len = this.mySelectionInPage.length;\n        this.mySelection = this.mySelection.concat(this.mySelectionInPage);\n\n        if (len === 0) {\n            this.selectAllState = 'unchecked';\n        } else if (len > 0 && len < allData\n            .filter(obj => obj.HideCheckbox == null || (obj.HideCheckbox != undefined && obj.HideCheckbox == false))\n            .length) {\n            this.selectAllState = 'indeterminate';\n        } else {\n            this.selectAllState = 'checked';\n        }\n\n        this.extCheckboxSelection(this.mySelection);\n    }\n\n    onSelectDuocPham(event) {\n        let loai = 0;\n        if (event == undefined || event == null) {\n            // this.notificationService.showError('Bạn chưa chọn thuốc.');\n            this.themDuocPham.SoLuongTon = null;\n        } else {\n            this.apiService.post<Array<any>>('QuayThuoc/GetThongTinDuocPham?duocPhamId=' + event.KeyId + \"&LoaiDuocPhamHoacVatTu=\" + event.LoaiDuocPhamHoacVatTu).subscribe(\n                resultData => {\n                    let soLuongTon = 0;\n                    this.lstthongTinDonThuoc = resultData;\n                    if (this.lstDonThuocMoiThem.length > 0) {\n                        this.lstDonThuocMoiThem.forEach(x => {\n                            if (x.DuocPhamId === this.themDuocPham.DuocPhamId) {\n                                soLuongTon = soLuongTon + x.SoLuongMua;\n                            }\n                        });\n                    }\n                    this.themDuocPham.SoLuongTon = resultData.reduce((sum, item) => sum + item.SoLuongTon, 0) - soLuongTon;\n                },\n                () => {\n                });\n        }\n    }\n\n    unCheckedBindSoTienMG(id: any) {\n        // tslint:disable-next-line: prefer-for-of\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === false) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === id) {\n                    this.dataSourcedanhsachThuoc.data[index].SoTienMG = 0;\n                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan =\n                        this.dataSourcedanhsachThuoc.data[index].ThanhTien - this.dataSourcedanhsachThuoc.data[index].TongCongNo; // to do Math.round\n                }\n            }\n        }\n        this.gridData = process(this.dataSourcedanhsachThuoc.data, this.state);\n    }\n\n    delete(event: any) {\n        if (event != undefined && event != null) {\n            this.dialog.open(ConfirmComponent, {\n                disableClose: false,\n                width: \"500px\",\n                data: {\n                    Title: \"Xác nhận\",\n                    Message: \"Bạn có muốn xóa thuốc/vật tư này không ?\",\n                },\n            }).afterClosed().subscribe((res) => {\n                if (res == \"Yes\") {\n                    this.notificationService.showSuccess(\n                        \"Xóa thành công\"\n                    );\n                    let i = 0;\n                    let stt = event.STT;\n                    for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n                        if (this.dataSourcedanhsachThuoc.data[index].STT === event.STT) {\n                            i = index;\n                        }\n                    }\n\n                    this.dataSourcedanhsachThuoc.data[i].HighLightClass = null;\n                    this.deleteItem.push(this.dataSourcedanhsachThuoc.data[i]);\n\n                    if (this.lstthongTinDonThuoc === undefined) {\n                        this.lstthongTinDonThuoc = [];\n                    }\n\n                    this.lstthongTinDonThuoc.push(this.dataSourcedanhsachThuoc.data[i]);\n                    this.dataSourcedanhsachThuoc.data.splice(i, 1);\n\n                    this.lstDonThuocMoiThem = new Array<ThongTinDuocPham>();\n\n                    for (let index0 = 0; index0 < i; index0++) {\n                        this.lstDonThuocMoiThem.push(this.dataSourcedanhsachThuoc.data[index0]);\n                    }\n\n                    for (let index1 = i; index1 < this.dataSourcedanhsachThuoc.data.length; index1++) {\n                        this.dataSourcedanhsachThuoc.data[index1].STT = stt;\n                        this.lstDonThuocMoiThem.push(this.dataSourcedanhsachThuoc.data[index1]);\n                        stt++;\n                    }\n\n                    this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n                    this.tongTien = this.tongTienGrid;\n\n                    if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n                        if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                            this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n                        } else {\n                            this.tongTien = 0;\n                        }\n                    }\n                    // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                    //     this.thongtinDonThuoc.TienMat = this.tongTien;\n                    // }\n                    let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n                    if (items != null && items.length > 0) {\n                        this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n                    }\n                }\n            });\n        }\n\n    }\n\n    clearHinhThucThanhToan() {\n        this.flagCheckSeletedTienMat = false;\n        this.flagCheckSeletedChuyenKhoan = false;\n        this.flagCheckSeletedPos = false;\n        this.flagCheckSeletedSoTienCongNo = false;\n        this.checkSeletedTienMat = false;\n        this.checkSeletedChuyenKhoan = false;\n        this.checkSeletedPos = false;\n        this.checkSeletedSoTienCongNo = false;\n    }\n\n    GetTenBenhNhan(id: number) {\n        this.apiService.post<any>('QuayThuoc/GetTenBenhNhan?benhNhanId=' + id).subscribe(\n            resultData => {\n                this.thongtinDonThuoc.HoTenBenhNhan = resultData;\n                this.GetThongTinDonThuoc(this.id);\n            },\n            () => {\n            });\n    }\n\n    onSelectAllChange(checkedState: SelectAllCheckboxState) {\n        var allData = this.dataSourcedanhsachThuoc.data;\n        if (allData == undefined)\n            allData = [];\n        this.mySelection = [];\n        if (checkedState === 'checked') {\n            this.mySelectionInPage = allData\n                .filter(obj => obj.HideCheckbox == null || (obj.HideCheckbox != undefined && obj.HideCheckbox == false)).map((item) =>\n                    item[this.keySelectBy]\n                )\n            this.mySelection = this.mySelection.concat(this.mySelectionInPage);\n            this.selectAllState = 'checked';\n        } else {\n            var mySelectionRemove = allData\n                .filter(obj => obj.HideCheckbox == null || (obj.HideCheckbox != undefined && obj.HideCheckbox == false)).map((item) =>\n                    item[this.keySelectBy]\n                );\n            if (mySelectionRemove != null && mySelectionRemove.length > 0) {\n                mySelectionRemove.forEach(obj => {\n                    this.mySelection.splice(this.mySelection.indexOf(obj), 1);\n                });\n            }\n            this.mySelectionInPage = [];\n            this.selectAllState = 'unchecked';\n        }\n        this.extCheckboxSelection(this.mySelection);\n    }\n\n    GetThongTinDonThuoc(id: number) {\n        this.apiService.post<Array<any>>('QuayThuoc/GetDataDonThuoc?tiepNhanId=' + id).subscribe(\n            resultData => {\n                this.dataSourcedanhsachThuoc.data = resultData;\n                let index = 1;\n                this.dataSourcedanhsachThuoc.data.forEach(x => {\n                    x.STT = index;\n                    index++;\n                    x.KiemTraTienSoTienItemDichVu = false;\n                });\n\n                this.myDanhSachChuaThanhToan();\n                this.getSoDuTaiKhoanBenhNhan(id);\n                this.closedialog.close();\n            },\n            () => {\n            });\n    }\n\n    getSoDuTaiKhoanBenhNhan(id: number) {\n        this.apiService.get<number>('ThuNgan/SoDuTaiKhoanBenhNhan/' + id).subscribe(resultData => {\n            if (resultData !== null && resultData !== undefined) {\n                // số dư tài khoản bằng 0 vi đã tra chô thu ngân\n                this.benhnhanThongTin.SoDuTaiKhoan = 0;\n                this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n                this.tongTien = this.tongTienGrid;\n                if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n                    if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                        this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n                    } else {\n                        this.tongTien = 0;\n                    }\n                }\n                this.thongtinDonThuoc.TienMat = this.tongTien;\n                this.thongtinDonThuoc.HinhThucThanhToan = [1];\n                this.getDanhSachBHTN();\n            }\n        });\n    }\n\n    getDanhSachBHTN() {\n        this.apiService.get<any>('QuayThuoc/GetListCongTyBaoHiemTuNhans?tiepNhanId=' + this.maYCTNId).subscribe(\n            resultData => {\n                if (resultData.length > 0) {\n                    const danhSachCongNoChoThu = new DanhSachCongNoChoThu();\n                    for (let index = 0; index < resultData.length; index++) {\n                        const congNo = new CongNoChoThu();\n                        congNo.ViTri = index;\n                        congNo.CongNoId = resultData[index].CongNoId;\n                        congNo.TenCongTy = resultData[index].TenCongTy;\n                        congNo.SoTienCongNoChoThu = 0;\n                        danhSachCongNoChoThu.CongNoChoThus.push(congNo);\n                    }\n\n                    // tslint:disable-next-line: prefer-for-of\n                    for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n                        this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus = [];\n                    }\n                    this.danhSachCongNoChoThus = [];\n\n\n                    // tslint:disable-next-line: prefer-for-of\n                    for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n                        // tslint:disable-next-line: prefer-for-of\n                        for (let subIndex = 0; subIndex < danhSachCongNoChoThu.CongNoChoThus.length; subIndex++) {\n                            const congNoItem = new CongNoChoThu();\n                            congNoItem.CongNoId = danhSachCongNoChoThu.CongNoChoThus[subIndex].CongNoId;\n                            congNoItem.SoTienCongNoChoThu = danhSachCongNoChoThu.CongNoChoThus[subIndex].SoTienCongNoChoThu;\n                            congNoItem.TenCongTy = danhSachCongNoChoThu.CongNoChoThus[subIndex].TenCongTy;\n                            congNoItem.ViTri = danhSachCongNoChoThu.CongNoChoThus[subIndex].ViTri;\n\n                            this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.push(congNoItem);\n                        }\n\n                        const totalCongNo = this.itemTotalCongNo(this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus);\n                        this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan =\n                            this.dataSourcedanhsachThuoc.data[index].ThanhTien - totalCongNo - this.dataSourcedanhsachThuoc.data[index].SoTienMG;\n                    }\n\n                    this.danhSachCongNoChoThus.push(danhSachCongNoChoThu);\n                    this.danhSachCongNoChoThus[0].CongNoChoThus.forEach(element => {\n                        const congNo = new CongNoVo();\n                        congNo.CongTyCongNoId = element.CongNoId;\n                        congNo.SoTienCongNo = element.SoTienCongNoChoThu;\n                        this.thongtinDonThuoc.DanhSachCongNos.push(congNo);\n                    });\n                }\n                this.gridData = this.dataSourcedanhsachThuoc.data;\n                this.setSelectAll();\n                // this.getThongTinMienGiam(this.maYCTNId);  // to do\n            });\n    }\n\n    public totalCongno(field: any) {\n        let sumCongNoItem = 0;\n        this.dataSourcedanhsachThuoc.data.forEach(element => {\n            if (element.DanhSachCongNoChoThus[field] !== undefined) {\n                sumCongNoItem += element.DanhSachCongNoChoThus[field].SoTienCongNoChoThu;\n            }\n        });\n        return sumCongNoItem;\n    }\n\n    GuiVaXuatThuocData(data: any) {\n        this.apiService.post<any>('QuayThuoc/ThuTienVaXuatThuoc', data).subscribe(\n            resultData => {\n                if (resultData.ThanhCong === false) {\n                    this.notificationService.showError(resultData.Error);\n\n                    if (resultData.DanhSachDuocPhamVuotTonKho != null) {\n                        // tslint:disable-next-line: prefer-for-of\n                        for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                            // tslint:disable-next-line: prefer-for-of\n                            for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt === this.dataSourcedanhsachThuoc.data[j].STT) {\n                                    this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                    this.dataSourcedanhsachThuoc.data[j].SoLuongDung =\n                                        resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                }\n\n                            }\n                        }\n                    }\n                } else if (resultData.ThanhCong === true) {\n                    this.dataSourcedanhsachThuoc.data = [];\n                    this.lstDonThuocMoiThem = [];\n                    this.cdRef.detectChanges();\n                    this.gridData = process(this.dataSourcedanhsachThuoc.data, this.state);\n                    this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                        disableClose: true,\n                        width: '500px',\n                        data: { Model: resultData, Title: 'XÁC NHẬN' }\n                    }).afterClosed().subscribe(result => {\n\n                        if (result.Response !== 'No answer') {\n                            this.changeTab.emit(2);\n                            this.tongTien = 0;\n                            this.getSoDuTaiKhoanBenhNhan(data.Id);\n                            this.thongtinDonThuoc.TienMat = 0;\n                            this.thongtinDonThuoc.ChuyenKhoan = 0;\n                            this.thongtinDonThuoc.BenhNhanDua = 0;\n                            this.thongtinDonThuoc.TienTraLai = 0;\n                            this.XacNhanIn(result);\n                        }\n                        else {\n                            this.changeTab.emit(2);\n                            this.getSoDuTaiKhoanBenhNhan(data.Id);\n                            this.tongTien = 0;\n                            this.thongtinDonThuoc.TienMat = 0;\n                            this.thongtinDonThuoc.ChuyenKhoan = 0;\n                            this.thongtinDonThuoc.BenhNhanDua = 0;\n                            this.thongtinDonThuoc.TienTraLai = 0;\n                        }\n                    });\n                }\n            });\n    }\n\n    GuiData(data: any) {\n        this.apiService.post<any>('QuayThuoc/ThemThanhToanDonThuoc', data).subscribe(\n            resultData => {\n                if (resultData.ThanhCong === false) {\n                    this.notificationService.showError(resultData.Error);\n\n                    if (resultData.DanhSachDuocPhamVuotTonKho != null) {\n                        // tslint:disable-next-line: prefer-for-of\n                        for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                            // tslint:disable-next-line: prefer-for-of\n                            for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt === this.dataSourcedanhsachThuoc.data[j].STT) {\n                                    this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                    this.dataSourcedanhsachThuoc.data[j].SoLuongDung =\n                                        resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                }\n\n                            }\n                        }\n                    }\n                } else if (resultData.ThanhCong === true) {\n                    this.dataSourcedanhsachThuoc.data = [];\n                    this.lstDonThuocMoiThem = [];\n                    this.cdRef.detectChanges();\n                    this.gridData = process(this.dataSourcedanhsachThuoc.data, this.state);\n                    this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                        disableClose: true,\n                        width: '500px',\n                        data: { Model: resultData, Title: 'XÁC NHẬN' }\n                    }).afterClosed().subscribe(result => {\n\n                        if (result.Response !== 'No answer') {\n                            this.changeTab.emit(2);\n                            this.tongTien = 0;\n                            this.getSoDuTaiKhoanBenhNhan(data.Id);\n                            this.thongtinDonThuoc.TienMat = 0;\n                            this.thongtinDonThuoc.ChuyenKhoan = 0;\n                            this.thongtinDonThuoc.BenhNhanDua = 0;\n                            this.thongtinDonThuoc.TienTraLai = 0;\n                            this.XacNhanIn(result);\n                        }\n                        else {\n                            this.changeTab.emit(2);\n                            this.getSoDuTaiKhoanBenhNhan(data.Id);\n                            this.tongTien = 0;\n                            this.thongtinDonThuoc.TienMat = 0;\n                            this.thongtinDonThuoc.ChuyenKhoan = 0;\n                            this.thongtinDonThuoc.BenhNhanDua = 0;\n                            this.thongtinDonThuoc.TienTraLai = 0;\n                        }\n                    });\n                }\n            });\n    }\n\n    XacNhanIn(data: any) {\n        this.showPopupLoadingIn();\n        data.Hosting = window.location.protocol + '//' + window.location.host;\n        this.apiService.postExportPdf<any>('QuayThuoc/XacNhanIn', data).subscribe(\n            resultData => {\n                if (resultData != undefined && resultData != null) {\n                    if (data.InBangKe == false && data.InPhieuThu == false) {\n                        this.notificationService.showError('Không có phiếu in được chọn.');\n                        this.closePopupLoadingData();\n                    }\n                    else {\n                        this.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                            disableClose: true,\n                            width: '1000px',\n                            data: { Model: resultData }\n                        }).afterClosed().subscribe(() => {\n                            this.closePopupLoadingData();\n                        });\n\n                    }\n                }\n            },\n            (err: ApiError) => {\n                this.closePopupLoadingData();\n                this.validationErrors = err.ValidationErrors;\n                if (err.Message != \"Validation Failed\") {\n                    this.notificationService.showError(err.Message);\n                }\n            });\n\n    }\n\n    shareData() {\n        this.thongtinDonThuoc.DanhSachDonThuocs = [...this.dataSourcedanhsachThuoc.data];\n        this.thongtinDonThuoc.Id = this.id;\n        for (let index = 0; index < this.thongtinDonThuoc.DanhSachDonThuocs.length; index++) {\n            this.thongtinDonThuoc.DanhSachDonThuocs[index].HighLightClass = null;\n            if (this.thongtinDonThuoc.DanhSachDonThuocs[index].CheckedDefault === false) {\n                this.thongtinDonThuoc.DanhSachDonThuocs.splice(index, 1);\n                index = -1;\n            }\n        }\n        return this.thongtinDonThuoc;\n    }\n\n    kiemTraNhapSoTienTra(dataThuTien: any) {\n        const soTienNhapTra = dataThuTien.ChuyenKhoan + dataThuTien.POS + dataThuTien.TienMat + dataThuTien.SoTienCongNo;\n        if (this.tongTien !== soTienNhapTra) {\n            return true;\n        }\n        return false;\n    }\n\n    // ======= Begin Thu tiền và xuất thuốc \n    ThuTienVaXuatThuoc() {\n        let checkTien = true;\n        if (this.validationErrors !== undefined) {\n            this.validationThuThuocErrors = [];\n        }\n        this.cdRef.detectChanges();\n        if (this.setDefeautTienMat.length === 0) {\n            this.validationThuThuocErrors.push({\n                Message: \"Vui lòng chọn hình thức thanh toán.\",\n                Field: \"HinhThucThanhToan\",\n            });\n            return true;\n        }\n\n        if (this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault).length === 0) {\n            this.notificationService.showError('Người bệnh này không có thuốc nào để thanh toán');\n            checkTien = false;\n        }\n\n        if (this.thongtinDonThuoc.HinhThucThanhToan.length !== 0 && this.kiemTraNhapSoTienTra(this.thongtinDonThuoc)) {\n            this.notificationService.showError('Số tiền nhập không đúng.');\n            checkTien = false;\n        }\n        if (this.dataSourcedanhsachThuoc.length != 0) {\n            this.dataSourcedanhsachThuoc.data.forEach(element => {\n                if (element.KiemTraTienSoTienItemDichVu === true) {\n                    this.notificationService.showError('Thanh toán không hợp lệ');\n                    checkTien = false;\n                }\n            });\n        }\n\n        this.thongtinDonThuoc.TongTien = this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo;\n\n        if (this.thongtinDonThuoc.Id == null) {\n            this.thongtinDonThuoc.Id = this.id;\n        }\n\n        this.thongtinDonThuoc.DanhSachDonThuocs = this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault);\n        this.apiService.post<any>('QuayThuoc/CheckValidationForQuayThuoc', this.thongtinDonThuoc).subscribe(\n            () => {\n                if (checkTien === true) {\n                    if (this.confirm != null) {\n                        // this.dialog.closeAll();\n                        this.confirm = null;\n                    }\n                    this.confirm = this.dialog.open(ConfirmComponent, {\n                        disableClose: true,\n                        width: '700px',\n                        data: {\n                            Title: 'Xác nhận', Message: 'Bạn chắc chắn muốn thu của người bệnh ' +\n                                this.benhnhanThongTin.HoTen.bold() + ' với số tiền là ' +\n                                this.tongTien.toLocaleString('vi-VI').bold() + ' đồng hay không?'\n                        }\n                    }).afterClosed().subscribe(result => {\n                        if (result === 'Yes') {\n                            this.GuiVaXuatThuocData(this.thongtinDonThuoc);\n                            this.setDefeautTienMat = [1];\n                            this.checkSeletedTienMat = true;\n                            this.defeautSoTien();\n                        }\n                    });\n                }\n            }, (err: ApiError) => {\n                this.validationThuThuocErrors = err.ValidationErrors;\n            });\n    }\n    // ======= End Thu tiền và xuất thuốc \n\n    ThuTien() {\n        let checkTien = true;\n\n        if (this.validationErrors !== undefined) {\n            this.validationThuThuocErrors = [];\n        }\n        this.cdRef.detectChanges();\n        if (this.setDefeautTienMat.length === 0) {\n            this.validationThuThuocErrors.push({\n                Message: \"Vui lòng chọn hình thức thanh toán.\",\n                Field: \"HinhThucThanhToan\",\n            });\n            return true;\n        }\n\n        if (this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault).length === 0) {\n            this.notificationService.showError('Người bệnh này không có thuốc nào để thanh toán');\n            checkTien = false;\n        }\n\n        if (this.thongtinDonThuoc.HinhThucThanhToan.length !== 0 && this.kiemTraNhapSoTienTra(this.thongtinDonThuoc)) {\n            this.notificationService.showError('Số tiền nhập không đúng.');\n            checkTien = false;\n        }\n        if (this.dataSourcedanhsachThuoc.length != 0) {\n            this.dataSourcedanhsachThuoc.data.forEach(element => {\n                if (element.KiemTraTienSoTienItemDichVu === true) {\n                    this.notificationService.showError('Thanh toán không hợp lệ');\n                    checkTien = false;\n                }\n            });\n        }\n\n        this.thongtinDonThuoc.TongTien = this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo;\n\n        if (this.thongtinDonThuoc.Id == null) {\n            this.thongtinDonThuoc.Id = this.id;\n        }\n        console.log(\"thongtindonthuoc\", this.thongtinDonThuoc)\n\n        this.thongtinDonThuoc.DanhSachDonThuocs = this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault);\n        this.apiService.post<any>('QuayThuoc/CheckValidationForQuayThuoc', this.thongtinDonThuoc).subscribe(\n            () => {\n                if (checkTien === true) {\n                    if (this.confirm != null) {\n                        // this.dialog.closeAll();\n                        this.confirm = null;\n                    }\n                    this.confirm = this.dialog.open(ConfirmComponent, {\n                        disableClose: true,\n                        width: '700px',\n                        data: {\n                            Title: 'Xác nhận', Message: 'Bạn chắc chắn muốn thu của người bệnh ' +\n                                this.benhnhanThongTin.HoTen.bold() + ' với số tiền là ' +\n                                this.tongTien.toLocaleString('vi-VI').bold() + ' đồng hay không?'\n                        }\n                    }).afterClosed().subscribe(result => {\n                        if (result === 'Yes') {\n                            this.GuiData(this.thongtinDonThuoc);\n                            this.setDefeautTienMat = [1];\n                            this.checkSeletedTienMat = true;\n                            this.defeautSoTien();\n                        }\n                    });\n                }\n            }, (err: ApiError) => {\n                this.validationThuThuocErrors = err.ValidationErrors;\n            });\n    }\n\n    extCheckboxSelection(event: any[]) {\n        this.dataSourcedanhsachThuoc.data.forEach(element => {\n            element.CheckedDefault = false;\n        });\n        if (event.length > 0) {\n            // tslint:disable-next-line: prefer-for-of\n            for (let index = 0; index < event.length; index++) {\n                this.dataSourcedanhsachThuoc.data.forEach(element => {\n                    let soTienMG = this.tinhSoTienMiemGiam(element);\n                    element.SoTienMG = soTienMG;\n                    // số tiền người bệnh phải trả đã trừ số tiền miễn giảm\n                    let soTienCN = this.soTienCongNoChoTungDichVu(element);\n                    if (element.BNConPhaiThanhToan >= element.SoTienMG) {\n                        element.BNConPhaiThanhToan = ((element.DonGia * element.SoLuongMua)) - soTienCN - element.SoTienMG;\n                    }\n                    if (element.Id === event[index]) {\n                        return element.CheckedDefault = true;\n                    }\n                });\n            }\n        }\n\n\n\n        this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.filter(x => x.CheckedDefault)\n            .reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0));\n        this.thongtinDonThuoc.BenhNhanDua = 0;\n        this.thongtinDonThuoc.TienTraLai = 0;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n        // var items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        //let pos = this.thongtinDonThuoc.ChuyenKhoan;\n\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        //     this.thongtinDonThuoc.POS = 0;\n        //     this.thongtinDonThuoc.SoTienCongNo = 0;\n        //     this.thongtinDonThuoc.ChuyenKhoan = 0;\n        // }\n\n        this.clearHinhThucThanhToan();\n        this.defeautSoTien();\n\n        this.setDefeautTienMat = [1];\n        this.checkSeletedTienMat = true;\n        this.flagCheckSeletedTienMat = true;\n        this.thongtinDonThuoc.TienMat = this.tongTien;\n\n        this.resetGiaTienCongNo();\n        this.myDanhSachChuaThanhToan();\n\n    }\n\n    resetGiaTienCongNo() {\n        this.dataSourcedanhsachThuoc.data.forEach(element => {\n            if (element.CheckedDefault !== true) {\n                if (element.DanhSachCongNoChoThus != null && element.DanhSachCongNoChoThus.length !== 0) {\n                    element.DanhSachCongNoChoThus.forEach(congNo => {\n                        congNo.SoTienCongNoChoThu = 0;\n                    });\n                }\n            }\n        });\n    }\n\n    themThuoc() {\n        this.validationErrors = [];\n        this.cdRef.detectChanges();\n        if (this.themDuocPham.DuocPhamId == null) {\n            this.validationErrors.push({ Message: 'Dược phẩm yêu cầu nhập', Field: 'DuocPhamId' });\n        }\n        if (this.themDuocPham.SoLuong == null || this.themDuocPham.SoLuong === 0) {\n            this.validationErrors.push({ Message: 'Số lượng yêu cầu nhập', Field: 'SoLuong' });\n        }\n        if (this.themDuocPham.SoLuongTon < this.themDuocPham.SoLuong) {\n            this.validationErrors.push({ Message: 'Số lượng phải nhỏ hơn tồn kho', Field: 'SoLuong' });\n        }\n        if (this.validationErrors.length > 0) {\n            return;\n        }\n\n        let soLuongDaMua = 0;\n        if (this.lstDonThuocMoiThem.length > 0) {\n            this.lstDonThuocMoiThem.forEach(x => {\n                if (x.DuocPhamId === this.themDuocPham.DuocPhamId) {\n                    soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                }\n            });\n        }\n        if (this.themDuocPham.SoLuongTon >= this.themDuocPham.SoLuong) {\n            let stt = 1;\n            let idNew = 1;\n            if (this.dataSourcedanhsachThuoc.data.length > 0) {\n                stt = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].STT + 1;\n                idNew = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].Id + 1;\n            }\n\n            let count = this.themDuocPham.SoLuong;\n            let tamp = this.lstthongTinDonThuoc;\n            if (this.lstDonThuocMoiThem != undefined || this.lstDonThuocMoiThem != null) {\n\n                for (let jisoo = 0; jisoo < this.lstDonThuocMoiThem.length; jisoo++) {\n                    for (let jihoo = 0; jihoo < this.lstthongTinDonThuoc.length; jihoo++) {\n                        if (this.lstDonThuocMoiThem[jisoo].Solo == this.lstthongTinDonThuoc[jihoo].Solo) {\n                            this.lstthongTinDonThuoc[jihoo].SoLuongTon = this.lstthongTinDonThuoc[jihoo].SoLuongTon - this.lstDonThuocMoiThem[jisoo].SoLuongMua;\n                            tamp = this.lstthongTinDonThuoc;\n                        }\n                    }\n                }\n            }\n            let dsMGThem1 = new DanhSachMienGiamVo();\n            let dsMGThem2 = new DanhSachMienGiamVo();\n            let danhSachMienGiamVos = new Array<DanhSachMienGiamVo>();\n            dsMGThem1.DoiTuongUuDai = null;\n            dsMGThem1.DoiTuongUuDaiId = null;\n            dsMGThem1.LoaiChietKhau = 1;\n            dsMGThem1.LoaiMienGiam = 3;\n            dsMGThem1.MaTheVoucher = null;\n            dsMGThem1.SoTien = 0;\n            dsMGThem1.TheVoucherId = null;\n            dsMGThem1.TiLe = 0;\n            danhSachMienGiamVos.push(dsMGThem1);\n            dsMGThem2.DoiTuongUuDai = null;\n            dsMGThem2.DoiTuongUuDaiId = null;\n            dsMGThem2.LoaiChietKhau = 2;\n            dsMGThem2.LoaiMienGiam = 3;\n            dsMGThem2.MaTheVoucher = null;\n            dsMGThem2.SoTien = 0;\n            dsMGThem2.TheVoucherId = null;\n            dsMGThem2.TiLe = 0;\n            danhSachMienGiamVos.push(dsMGThem2);\n            for (let index = 0; index < tamp.length; index++) { // tmp don thuuoc\n                if (tamp[index].SoLuongTon > 0) {\n                    if (count !== 0) {\n                        let item = new ThongTinDuocPham();\n                        if (count <= this.lstthongTinDonThuoc[index].SoLuongTon) {\n                            item = Object.assign({}, this.lstthongTinDonThuoc[index]);\n                            item.SoLuongMua = count;\n                            item.STT = stt;\n                            item.Id = idNew;\n                            item.CheckedDefault = true;\n                            item.isNew = true;\n                            item.BacSiKeToa = 'Nhà Thuốc';\n                            item.ThanhTien = item.SoLuongMua * item.DonGia;\n                            item.BNConPhaiThanhToan = item.ThanhTien;\n                            item.ThanhTienHienThi = Math.round(item.ThanhTien);\n                            item.DonGiaHienThi = Math.round(item.DonGia);\n                            item.BNConPhaiThanhToanHienThi = Math.round(item.ThanhTien);\n                            item.DanhSachCongNoChoThus = [];\n                            item.DanhSachMienGiamVos = danhSachMienGiamVos;\n                            if (this.danhSachCongNoChoThus.length > 0) {\n                                if (this.danhSachCongNoChoThus[0].CongNoChoThus.length !== 0 ||\n                                    this.danhSachCongNoChoThus == null || this.danhSachCongNoChoThus === undefined) {\n                                    for (let i = 0; i < this.danhSachCongNoChoThus[0].CongNoChoThus.length; i++) {\n                                        const congNo = new CongNoChoThu();\n                                        congNo.ViTri = i;\n                                        congNo.CongNoId = this.danhSachCongNoChoThus[0].CongNoChoThus[i].CongNoId;\n                                        congNo.TenCongTy = this.danhSachCongNoChoThus[0].CongNoChoThus[i].TenCongTy;\n                                        congNo.SoTienCongNoChoThu = 0;\n                                        item.DanhSachCongNoChoThus.push(congNo);\n                                    }\n                                }\n                            }\n\n                            this.lstDonThuocMoiThem.push(item);\n                            this.mySelectionInPage.push(idNew);\n                            this.mySelection = this.mySelection.concat(this.mySelectionInPage);\n                            this.lstthongTinDonThuoc[index].SoLuongTon = this.lstthongTinDonThuoc[index].SoLuongTon - count;\n                            this.dataSourcedanhsachThuoc.data.push(item);\n                            this.duocPhamCombobox.focusManual();\n                            count = 0;\n                        } else {\n                            item = Object.assign({}, this.lstthongTinDonThuoc[index]);\n                            item.SoLuongMua = this.lstthongTinDonThuoc[index].SoLuongTon;\n                            item.ThanhTien = item.SoLuongMua * item.DonGia;\n                            item.BNConPhaiThanhToan = Math.round(item.ThanhTien);\n                            item.ThanhTienHienThi = Math.round(item.ThanhTien);\n                            item.DonGiaHienThi = Math.round(item.DonGia);\n                            item.BNConPhaiThanhToanHienThi = Math.round(item.ThanhTien);\n                            item.STT = stt;\n                            item.Id = idNew;\n                            item.isNew = true;\n                            item.CheckedDefault = true;\n                            item.BacSiKeToa = 'Nhà Thuốc';\n                            count = count - this.lstthongTinDonThuoc[index].SoLuongTon;\n                            item.DanhSachCongNoChoThus = [];\n                            item.DanhSachMienGiamVos = danhSachMienGiamVos;\n                            if (this.danhSachCongNoChoThus.length > 0) {\n                                if (this.danhSachCongNoChoThus[0].CongNoChoThus.length !== 0 ||\n                                    this.danhSachCongNoChoThus == null || this.danhSachCongNoChoThus === undefined) {\n                                    // tslint:disable-next-line: prefer-for-of\n                                    for (let i = 0; i < this.danhSachCongNoChoThus[0].CongNoChoThus.length; i++) {\n                                        const congNo = new CongNoChoThu();\n                                        congNo.ViTri = i;\n                                        congNo.CongNoId = this.danhSachCongNoChoThus[0].CongNoChoThus[i].CongNoId;\n                                        congNo.TenCongTy = this.danhSachCongNoChoThus[0].CongNoChoThus[i].TenCongTy;\n                                        congNo.SoTienCongNoChoThu = 0;\n                                        item.DanhSachCongNoChoThus.push(congNo);\n                                    }\n                                }\n                            }\n\n                            this.lstDonThuocMoiThem.push(item);\n                            this.mySelectionInPage.push(idNew);\n                            this.mySelection = this.mySelection.concat(this.mySelectionInPage);\n                            this.dataSourcedanhsachThuoc.data.push(item);\n                            this.duocPhamCombobox.focusManual();\n                            this.lstthongTinDonThuoc.splice(index, 1);\n                            index = -1;\n                        }\n                        idNew++;\n                        stt++;\n                    } else {\n                        break;\n                    }\n                }\n\n            }\n            if (this.lstDonThuocMoiThem.length > 0) {\n                this.lstDonThuocMoiThem.forEach(x => {\n                    if (x.DuocPhamId === this.themDuocPham.DuocPhamId) {\n                        soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                    }\n                });\n            }\n            this.themDuocPham.SoLuongTon = this.themDuocPham.SoLuongTon - this.themDuocPham.SoLuong;\n\n            this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n            this.tongTien = this.tongTienGrid;\n            if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n                if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                    this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n                } else {\n                    this.tongTien = 0;\n                }\n            }\n            // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n            //     this.thongtinDonThuoc.TienMat = this.tongTien;\n            // }\n\n            let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n            if (items != null && items.length > 0) {\n                this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n            }\n\n            this.themDuocPham = new ThemDuocPham();\n        } else {\n            this.notificationService.showError('Số lượng bạn nhập lớn hơn số lượng tồn');\n        }\n\n        this.gridData = this.dataSourcedanhsachThuoc.data;\n        this.setSelectAll();\n\n        this.danhSachXemTruocBangKeThuocVaVatTu(this.dataSourcedanhsachThuoc.data);\n    }\n\n    // change số lượng mua trả các giá trị về bằng 0\n    modelChangeSoLuongMua(ev: any, dsQuayThuocs: any) {\n        // tslint:disable-next-line: prefer-for-of\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === dsQuayThuocs.Id) {\n                    this.dataSourcedanhsachThuoc.data[index].SoLuongMua = ev;\n                    let soTienMGiam = this.tinhSoTienMiemGiam(this.dataSourcedanhsachThuoc.data[index]);\n                    this.dataSourcedanhsachThuoc.data[index].SoTienMG = soTienMGiam;\n                    this.dataSourcedanhsachThuoc.data[index].ThanhTien = ev * this.dataSourcedanhsachThuoc.data[index].DonGia;\n                    this.changeInputSoTienMGBindGrid(this.dataSourcedanhsachThuoc.data[index]);\n                    // this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan = this.dataSourcedanhsachThuoc.data[index].ThanhTien;\n                    if (this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus != null) {\n                        if (this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.length > 0) {\n                            // tslint:disable-next-line: prefer-for-of\n                            for (let i = 0; i < this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.length; i++) {\n                                this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[i].SoTienCongNoChoThu = 0;\n                                this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu =\n                                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                            }\n                        }\n                    }\n                }\n            }\n\n        }\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n    }\n\n    modelChangeSoTienMg(ev: any, data: any) {\n        data.SoTienMG = ev;\n        this.changeInputSoTienMgBindGrid(data);\n        this.myDanhSachChuaThanhToan();\n    }\n\n    changeInputSoTienMgBindGrid(data: any) {\n        const totalCongNo = this.itemTotalCongNo(data.DanhSachCongNoChoThus);\n        // tslint:disable-next-line: prefer-for-of\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === data.Id) {\n                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan =\n                        this.dataSourcedanhsachThuoc.data[index].ThanhTien - totalCongNo - data.SoTienMG;\n\n                    this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu =\n                        this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                }\n            }\n        }\n\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n    }\n\n    getThongTinMienGiam(id: number) {\n        this.apiService.get<any>('ThuNgan/GetThongTinMienGiam?yeuCauTiepNhanId=' + id).subscribe(resultData => {\n            if (resultData !== null && resultData !== undefined) {\n                this.thongTinMienGiamVos = resultData;\n                this.bindChiaPhanTramDoiTuongUuDai();\n\n                if (this.apDungMienGiam === true) {\n                    this.notificationService.showSuccess('Áp dụng miễn giảm thành công.');\n                }\n\n                this.afterChangedMg.emit();\n            }\n        });\n        this.cdRef.detectChanges();\n    }\n\n    modelChangeCongNo(ev: any, data: any, vtri: number) {\n        data.DanhSachCongNoChoThus[vtri].SoTienCongNoChoThu = ev;\n        data.SoTienMG = 0;\n        this.changeInputCongNoBindGrid(data);\n        this.myDanhSachChuaThanhToan();\n    }\n\n    changeInputCongNoBindGrid(data: any) {\n        const totalCongNo = this.itemTotalCongNo(data.DanhSachCongNoChoThus);\n\n        // tslint:disable-next-line: prefer-for-\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === data.Id) {\n                    this.dataSourcedanhsachThuoc.data[index].SoTienMG = this.tinhSoTienMiemGiam(this.dataSourcedanhsachThuoc.data[index]);\n                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan =\n                        this.dataSourcedanhsachThuoc.data[index].ThanhTien - totalCongNo - this.dataSourcedanhsachThuoc.data[index].SoTienMG;\n                    this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu =\n                        this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                }\n            }\n        }\n\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n    }\n\n    modelChangePos(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.SoTienCongNo) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienPos = [total, 0];\n\n        this.thongtinDonThuoc.POS = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeChuyenKhoan(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo) !== 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienChuyenKhoan = [total, 0];\n        this.thongtinDonThuoc.ChuyenKhoan = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeTienMat(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienMat = [total, 0];\n\n        this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n        this.thongtinDonThuoc.TienMat = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeSoTienCongNo(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.TienMat) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.TienMat);\n        this.selectMoneySoTienCongNo = [total, 0];\n\n        this.thongtinDonThuoc.SoTienCongNo = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeTienBNDua(input: any) {\n        this.selectMoneyTienBNDua = [this.tongTien, 100000000];\n        this.thongtinDonThuoc.TienTraLai = input - this.thongtinDonThuoc.TienMat;\n\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n\n    onChangeBenhNhanDua() {\n        this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n\n    // Begin pttt và công nợ cho quầy thuốc 21/08/2020\n    defeautSoTien() {\n        this.thongtinDonThuoc.TienMat = 0;\n        this.thongtinDonThuoc.POS = 0;\n        this.thongtinDonThuoc.SoTienCongNo = 0;\n        this.thongtinDonThuoc.ChuyenKhoan = 0;\n        this.thongtinDonThuoc.BenhNhanDua = 0;\n        this.thongtinDonThuoc.TienTraLai = 0;\n    }\n\n    tinhTienChoPhuongThucThanhToan(item: any) {\n        switch (item) {\n            case 1:\n                this.thongtinDonThuoc.TienMat = this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.TienMat < 0) {\n                    this.thongtinDonThuoc.TienMat = 0;\n                }\n                break;\n            case 2:\n                this.thongtinDonThuoc.ChuyenKhoan = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.ChuyenKhoan < 0) {\n                    this.thongtinDonThuoc.ChuyenKhoan = 0;\n                }\n                break;\n            case 3:\n                this.thongtinDonThuoc.POS = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.POS < 0) {\n                    this.thongtinDonThuoc.POS = 0;\n                }\n                break;\n            case 4:\n                this.thongtinDonThuoc.SoTienCongNo = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS;\n                if (this.thongtinDonThuoc.SoTienCongNo < 0) {\n                    this.thongtinDonThuoc.SoTienCongNo = 0;\n                }\n                break;\n        }\n    }\n\n    ChangeHinhThucThanhToan(event: any) {\n        this.clearHinhThucThanhToan();\n        this.defeautSoTien();\n        this.showCanhBaoSoTienNhap = false;\n        var items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n\n        if (items != null && items.length === 1) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n\n        event.forEach((element) => {\n            switch (element) {\n                case 1:\n                    this.flagCheckSeletedTienMat = true;\n                    break;\n                case 2:\n                    this.flagCheckSeletedChuyenKhoan = true;\n                    break;\n                case 3:\n                    this.flagCheckSeletedPos = true;\n                    break;\n                case 4:\n                    this.flagCheckSeletedSoTienCongNo = true;\n                    break;\n            }\n        });\n\n        this.hinhThucThanhToan.forEach(item => { item.Change = false; });\n        this.hinhThucThanhToan.forEach(item => {\n            if (event.filter(o => o == item.KeyId).length > 0) {\n                item.Selected = true;\n                if (event.length == 1) {\n                    switch (item.KeyId) {\n                        case 1:\n                            this.thongtinDonThuoc.TienMat = this.tongTien;\n                            break;\n                        case 2:\n                            this.thongtinDonThuoc.ChuyenKhoan = this.tongTien;\n                            break;\n                        case 3:\n                            this.thongtinDonThuoc.POS = this.tongTien;\n                            break;\n                        case 4:\n                            this.thongtinDonThuoc.SoTienCongNo = this.tongTien;\n                            break;\n                    }\n                }\n            }\n            else {\n                item.Selected = false;\n            }\n        });\n\n        this.cdRef.detectChanges();\n    }\n\n    onValueChange(event: any, type: number) {\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n        this.hinhThucThanhToan.forEach(item => {\n            if (item.KeyId == type) {\n                item.Change = true;\n            }\n        });\n        var itemNotChanges = this.hinhThucThanhToan.filter(o => o.Selected == true && o.Change == false);\n        if (itemNotChanges.length == 1) {\n            this.changeSoTien(itemNotChanges[0].KeyId);\n        }\n        else {\n            if (itemNotChanges.length == 0 && this.hinhThucThanhToan.filter(o => o.Selected == true).length == 2) {\n                var items = this.hinhThucThanhToan.filter(o => o.Selected == true && o.KeyId != type);\n                this.changeSoTien(items[0].KeyId);\n            }\n        }\n        if (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo != this.tongTien) {\n            this.showCanhBaoSoTienNhap = true;\n        }\n        else {\n\n            this.showCanhBaoSoTienNhap = false;\n        }\n        this.changeTienTraLaiBenhNhan();\n    }\n\n    changeSoTien(items: any) {\n        switch (items) {\n            case 1:\n                this.thongtinDonThuoc.TienMat = (this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 2:\n                this.thongtinDonThuoc.ChuyenKhoan = (this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 3:\n                this.thongtinDonThuoc.POS = (this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 4:\n                this.thongtinDonThuoc.SoTienCongNo = (this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS;\n                break;\n        }\n    }\n\n    changeTienTraLaiBenhNhan() {\n        if (this.thongtinDonThuoc.BenhNhanDua > this.thongtinDonThuoc.TienMat) {\n            this.thongtinDonThuoc.TienTraLai =\n                this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        } else {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n    // End pttt và công nợ cho quầy thuốc 21/08/2020\n    onKeyEnterAddItem(event: any) {\n        if (event.key == \"Enter\" && !this.isSelectingItem) {\n            if (this.isSelectingItem != true) {\n\n                this.themThuoc();\n            }\n            else {\n                this.isSelectingItem = false;\n            }\n        }\n    }\n\n    openCombobox(event: any) {\n        if (event) {\n            this.isSelectingItem = true;\n        }\n        else {\n            this.isSelectingItem = false;\n        }\n    }\n    onKey(event: any) {\n        if (event.key == \"Enter\" && !this.isSelectingItem) {\n            if (this.isSelectingItem != true) {\n\n                this.themThuoc();\n            }\n            else {\n                this.isSelectingItem = false;\n            }\n        }\n    }\n    apDungMiemGiamThem() {\n        let dataMGT = new ApDungMiemGiamThem;\n        if (this.confrim != null) {\n            this.dialog.closeAll();\n            this.confrim = null;\n        }\n        this.confrim = this.dialog.open(ApDungMiemGiamThemPopupComponent, {\n            disableClose: true,\n            width: \"500px\",\n            data: { dataMGT }\n        }).afterClosed().subscribe((result) => {\n            if (result != null) {\n                // this.dataSourcedanhsachThuoc.data.forEach(element => {\n                //     if(element.DanhSachMienGiamVos != null)\n                //     {\n                //         for (const danhSachMienGiam of element.DanhSachMienGiamVos.filter(x => x.LoaiMienGiam === this.loaiMienGiam.MienGiamThem)) {\n                //             element.DanhSachMienGiamVos.splice(element.DanhSachMienGiamVos.indexOf(danhSachMienGiam), 1);\n                //         }\n                //     }\n                // });\n\n                this.dataSourcedanhsachThuoc.data.forEach(element => {\n                    element.GhiChuMienGiamThem = result.GhiChu;\n                    element.DanhSachMienGiamVos = new Array<DanhSachMienGiamVo>();\n                    if (result.TiLe != undefined && result.TiLe != null) {\n                        let dsMiemGiamThem = new DanhSachMienGiamVo();\n                        dsMiemGiamThem.LoaiMienGiam = this.loaiMienGiam.MienGiamThem;\n                        dsMiemGiamThem.LoaiChietKhau = this.loaiChietKhau.ChietKhauTheoTiLe;\n                        dsMiemGiamThem.TiLe = result.TiLe;\n                        element.DanhSachMienGiamVos.push(dsMiemGiamThem);\n                    }\n                    if (result.SoTien != undefined && result.SoTien != null) {\n                        let dsMiemGiamThem = new DanhSachMienGiamVo();\n                        dsMiemGiamThem.LoaiMienGiam = this.loaiMienGiam.MienGiamThem;\n                        dsMiemGiamThem.LoaiChietKhau = this.loaiChietKhau.ChietKhauTheoSoTien;\n                        dsMiemGiamThem.SoTien = result.SoTien;\n                        dsMiemGiamThem.SoTienMiemGiamTatCa = result.SoTien;\n                        element.DanhSachMienGiamVos.push(dsMiemGiamThem);\n                    }\n                });\n                console.log(result)\n\n                // console.log(\"data miễn giảm\",this.dataSourcedanhsachThuoc.data);\n                this.dataSourcedanhsachThuoc.data.forEach(element => {\n                    element.SoTienMG = this.tinhSoTienMiemGiam(element);\n                    if (element.SoTienMG > element.BNConPhaiThanhToan) {\n                        this.notificationService.showSuccess('Số tiền áp dụng lớn hơn số tiền cần thanh toán.');\n                    }\n                    // số tiền người bệnh phải trả đã trừ số tiền miễn giảm\n                    let soTienCN = this.soTienCongNoChoTungDichVu(element);\n                    if (element.BNConPhaiThanhToan >= element.SoTienMG) {\n                        element.BNConPhaiThanhToan = ((element.DonGia * element.SoLuongMua)) - soTienCN - element.SoTienMG;\n                    }\n                });\n                this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n                this.tongTien = this.tongTienGrid;\n                if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n                    if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                        this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n                    } else {\n                        this.tongTien = 0;\n                    }\n                }\n                // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                //     this.thongtinDonThuoc.TienMat = this.tongTien;\n                // }\n                let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n                if (items != null && items.length > 0) {\n                    this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n                }\n                this.notificationService.showSuccess(\"Áp dụng miễn giảm thành công.\");\n            }\n        });\n    }\n\n    public tongTatCaSoTienMg: any;\n\n    tinhSoTienMiemGiam(dataItem: any) {\n        let tongTatCaSoTienMg = 0;\n        var tiLePhanTramConLai = 100;\n        let tongTienTungDichVu = ((dataItem.DonGia * dataItem.SoLuongMua)) - this.soTienCongNoChoTungDichVu(dataItem);\n\n        var soTienConLai = tongTienTungDichVu;\n        if (tongTienTungDichVu > 0) {\n            var dsMienGiamTheoPhanTram = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 1 && item.TiLe != 0);\n            var dsMienGiamTheoSoTien = dataItem.DanhSachMienGiamVos.filter(item => item.LoaiChietKhau == 2 && item.SoTien != 0);\n            if (dsMienGiamTheoPhanTram != null && dsMienGiamTheoPhanTram.length > 0) {\n                //Sắp xếp theo thứ tự:Ưu đãi, Voucher, Miễn giảm thêm\n                dsMienGiamTheoPhanTram = _.sortBy(dsMienGiamTheoPhanTram, 'LoaiMienGiam');\n                dsMienGiamTheoPhanTram.forEach(item => {\n                    //Nếu tỉ lệ còn lại sau khi đổ từ trên xuống\n                    if (tiLePhanTramConLai > 0) {\n                        item.TiLe = item.TiLe > tiLePhanTramConLai ? tiLePhanTramConLai : item.TiLe;\n                    }\n                    else {\n                        item.TiLe = 0;\n                    }\n                    item.TongTienMiemGiam = (item.TiLe * tongTienTungDichVu) / 100;\n                    tongTatCaSoTienMg += item.TongTienMiemGiam;\n                    if (item.TiLe >= tiLePhanTramConLai) {\n                        tiLePhanTramConLai = 0;\n                    }\n                    else {\n                        tiLePhanTramConLai = tiLePhanTramConLai - item.TiLe;\n                    }\n                });\n            }\n            if (tiLePhanTramConLai > 0 && dsMienGiamTheoSoTien != null && dsMienGiamTheoSoTien.length > 0) {\n                tiLePhanTramConLai = dsMienGiamTheoPhanTram != null && dsMienGiamTheoPhanTram.length > 0 ? tiLePhanTramConLai : 0;\n                soTienConLai = tiLePhanTramConLai != 0 ? (((dataItem.ThanhTien - this.soTienCongNoChoTungDichVu(dataItem)) * tiLePhanTramConLai) / 100) : dataItem.ThanhTien - this.soTienCongNoChoTungDichVu(dataItem);\n                //Sắp xếp theo thứ tự:Ưu đãi, Voucher, Miễn giảm thêm\n                dsMienGiamTheoSoTien = _.sortBy(dsMienGiamTheoSoTien, 'LoaiMienGiam');\n                dsMienGiamTheoSoTien.forEach(item => {\n                    //Nếu số tiền còn lại sau khi đổ từ trên xuống\n                    if (soTienConLai > 0) {\n                        item.SoTien = item.SoTien > soTienConLai ? soTienConLai : item.SoTien;\n                    }\n                    else {\n                        item.SoTien = 0;\n                    }\n                    item.TongTienMiemGiam = item.SoTien;\n                    tongTatCaSoTienMg += item.TongTienMiemGiam;\n                    if (item.SoTien >= soTienConLai) {\n                        soTienConLai = 0;\n                    }\n                    else {\n                        soTienConLai = soTienConLai - item.SoTien;\n                    }\n                });\n            } else {\n                dsMienGiamTheoSoTien = _.sortBy(dsMienGiamTheoSoTien, 'LoaiMienGiam');\n                dsMienGiamTheoSoTien.forEach(item => {\n                    //NẾU PHẦN TRĂM MÀ SÀI HẾT THÌ BIND TIỀN TẤT CẢ CON LẠI BẰNG 0\n                    item.SoTien = 0;\n                });\n            }\n        }\n        return tongTatCaSoTienMg < 0 ? 0 : tongTatCaSoTienMg;\n\n    }\n\n    soTienCongNoChoTungDichVu(dataItem: any) {\n        let soTienCongNo = 0;\n        if (dataItem.DanhSachCongNoChoThus != null) {\n            dataItem.DanhSachCongNoChoThus.forEach(element => {\n                soTienCongNo = soTienCongNo + element.SoTienCongNoChoThu;\n            });\n        }\n        return soTienCongNo;\n    }\n\n    apDungMiemGiamChoTungDichVu(dataItem: any) {\n        // this.dataSourcedanhsachThuoc.data = this.danhSachChiPhiKhamChuaBenh;\n        let isView = true;\n        if (this.confrim != null) {\n            this.dialog.closeAll();\n            this.confrim = null;\n        }\n        this.confrim = this.dialog.open(ApDungMiemGiamChoTungLoaiThuocPopupComponent, {\n            disableClose: true,\n            width: \"500px\",\n            data: { dataItem, isView },\n        }).afterClosed().subscribe((result) => {\n            if (result != null) {\n                //tính số tiền miễm giam tren grid                \n                if (result.apdungMGTThanhCong) {\n\n                    this.dataSourcedanhsachThuoc.data.forEach(element => {\n                        if (element.Id === result.Id) {\n                            element.GhiChuMienGiamThem = result.GhiChuMienGiamThem;\n                            element.SoTienMG = this.tinhSoTienMiemGiam(element);\n                            this.modelChangeSoTienMG(element);\n                        }\n                    });\n                    console.log(\"data\", this.dataSourcedanhsachThuoc.data)\n                    this.notificationService.showSuccess(\"Áp dụng miễn giảm thành công.\");\n                }\n                else {\n                    this.dataSourcedanhsachThuoc.data.forEach(element => {\n                        if (element.Id === result.Id) {\n                            if (element.DanhSachMienGiamVos != null) {\n                                element.DanhSachMienGiamVos.forEach(item => {\n                                    result.DanhSachMienGiamVos.forEach(item1 => {\n                                        if (item1.LoaiMienGiam === item.LoaiMienGiam && item1.LoaiChietKhau === 1) {\n                                            { item.TiLe = item1.TiLe; item.TongTienMiemGiam = 0; item.DaSuDung = false }\n                                        }\n                                        if (item1.LoaiMienGiam === item.LoaiMienGiam && item1.LoaiChietKhau === 2) {\n                                            { item.SoTien = item1.SoTien; item.TongTienMiemGiam = 0; item.DaSuDung = false }\n                                        }\n                                    });\n                                });\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    }\n\n    modelChangeSoTienMG(data: any) {\n        this.changeInputSoTienMGBindGrid(data);\n        this.myDanhSachChuaThanhToan();\n    }\n\n    changeInputSoTienMGBindGrid(dsChiPhiKhamChuaBenh: any) {\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            let totalCongNo = this.itemTotalCongNo(dsChiPhiKhamChuaBenh.DanhSachCongNoChoThus);\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === dsChiPhiKhamChuaBenh.Id) {\n                    dsChiPhiKhamChuaBenh.BNConPhaiThanhToan = dsChiPhiKhamChuaBenh.ThanhTien - totalCongNo - dsChiPhiKhamChuaBenh.SoTienMG;\n                    this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu = this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                }\n            }\n        }\n        this.gridData = process(this.dataSourcedanhsachThuoc.data, this.state);\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n            if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n                this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n            } else {\n                this.tongTien = 0;\n            }\n        }\n\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n        // this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0));\n        // this.tongTien = this.tongTienGrid;\n        // if (this.benhnhanThongTin.SoDuTaiKhoan > 0) {\n        //     if (this.tongTien > this.benhnhanThongTin.SoDuTaiKhoan) {\n        //         this.tongTien -= this.benhnhanThongTin.SoDuTaiKhoan;\n        //     } else {\n        //         this.tongTien = 0;\n        //     }\n        // }\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n\n    }\n\n    nguoiBenhKhongMuaThuoc() {\n        debugger;\n        var self = this; \n        const yeuCauTiepNhanId: number = this.route.snapshot.params.id;    \n        if (this.dataSourcedanhsachThuoc.data.length > 0) {\n            var nguoiDungKhongMuaDonThuoc = new NguoiDungKhongMuaDonThuoc();         \n            nguoiDungKhongMuaDonThuoc.YeuCauTiepNhanId = yeuCauTiepNhanId;\n            if (self.authService.hasPermission(self.documentType, SecurityOperation.Delete)) {\n                self.dialog.open(ConfirmComponent, {\n                    disableClose: false,\n                    width: '400px',\n                    data: { Title: \"Xác nhận\", Message: \"Người bệnh không muốn mua thuốc này?\"}\n                }).afterClosed().subscribe(result => {\n                    if (result == \"Yes\") {\n                        self.apiService.post(\"QuayThuoc/NguoiBenhKhongMuaDonThuoc\", nguoiDungKhongMuaDonThuoc).subscribe(\n                            () => {\n                                self.notificationService.showSuccess(CommonService.format(SystemMessage.ActionSuccessfully, [\"Xóa\"]));\n                                this.router.navigate(['nha-thuoc']);\n                            },\n                            (err: ApiError) => {\n                                self.validationErrors = err.ValidationErrors;\n                                if (err.Message != \"Validation Failed\") {\n                                    self.notificationService.showError(err.Message);\n                                }\n                            });\n                    }\n                });\n            }\n            else {\n                self.notificationService.showError(SystemMessage.UnAuthorizedMessage);\n            }\n        }\n    }\n\n    showPopupLoadingIn() {\n        this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '250px',\n            height: '90px',\n            data: { Title: 'Đang loading...' },\n        });\n    }\n\n    closePopupLoadingData() {\n        this.dialog.closeAll();\n    }\n}\n","export default \".xac-nhan-ng-template {\\n  display: inline;\\n  white-space: nowrap;\\n}\\n\\n.title {\\n  font-size: 15px;\\n  background: #ebeced;\\n  border: 1px solid #ccc;\\n  padding: 5px;\\n}\\n\\nmat-icon {\\n  cursor: pointer;\\n  margin-top: 8px;\\n}\\n\\n.warning {\\n  margin-bottom: -8px;\\n  margin-top: 0px;\\n  color: #ff5722;\\n}\\n\\n.info {\\n  color: #00bcd4;\\n}\\n\\n.ten-dich-vu-label {\\n  display: inline;\\n  text-overflow: ellipsis;\\n}\\n\\n.tooltip-block {\\n  background: #005dab;\\n  color: #fff;\\n}\\n\\n.tooltip-block * {\\n  font-size: 13px;\\n}\\n\\nsection.check-box-huong-bhyt {\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.color-red {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS1jaG8tdGhhbmgtdG9hbi9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHF1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktY2hvLXRoYW5oLXRvYW5cXHF1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktY2hvLXRoYW5oLXRvYW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktY2hvLXRoYW5oLXRvYW4vcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS1jaG8tdGhhbmgtdG9hbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxtQkFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0VBQ0EsZUFBQTtBQ0NGOztBREVBO0VBQ0UsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQ0NGOztBREVBO0VBQ0UsY0FBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSxtQkFBQTtFQUNBLFdBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7QUNDRjs7QURFQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtBQ0NGOztBREVBO0VBQ0UsVUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS1jaG8tdGhhbmgtdG9hbi9xdWF5LXRodW9jLWtoYWNoLXZhbmctbGFpLWNoby10aGFuaC10b2FuLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnhhYy1uaGFuLW5nLXRlbXBsYXRlIHtcbiAgZGlzcGxheTogaW5saW5lO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4udGl0bGUge1xuICBmb250LXNpemU6IDE1cHg7XG4gIGJhY2tncm91bmQ6ICNlYmVjZWQ7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gIHBhZGRpbmc6IDVweDtcbn1cblxubWF0LWljb24ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1hcmdpbi10b3A6IDhweDtcbn1cblxuLndhcm5pbmcge1xuICBtYXJnaW4tYm90dG9tOiAtOHB4O1xuICBtYXJnaW4tdG9wOiAwcHg7XG4gIGNvbG9yOiAjZmY1NzIyO1xufVxuXG4uaW5mbyB7XG4gIGNvbG9yOiAjMDBiY2Q0O1xufVxuXG4udGVuLWRpY2gtdnUtbGFiZWwge1xuICBkaXNwbGF5OiBpbmxpbmU7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4udG9vbHRpcC1ibG9jayB7XG4gIGJhY2tncm91bmQ6ICMwMDVkYWI7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG4udG9vbHRpcC1ibG9jayAqIHtcbiAgZm9udC1zaXplOiAxM3B4O1xufVxuXG5zZWN0aW9uLmNoZWNrLWJveC1odW9uZy1iaHl0IHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5jb2xvci1yZWQge1xuICBjb2xvcjogcmVkO1xufSIsIi54YWMtbmhhbi1uZy10ZW1wbGF0ZSB7XG4gIGRpc3BsYXk6IGlubGluZTtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLnRpdGxlIHtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBiYWNrZ3JvdW5kOiAjZWJlY2VkO1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBwYWRkaW5nOiA1cHg7XG59XG5cbm1hdC1pY29uIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBtYXJnaW4tdG9wOiA4cHg7XG59XG5cbi53YXJuaW5nIHtcbiAgbWFyZ2luLWJvdHRvbTogLThweDtcbiAgbWFyZ2luLXRvcDogMHB4O1xuICBjb2xvcjogI2ZmNTcyMjtcbn1cblxuLmluZm8ge1xuICBjb2xvcjogIzAwYmNkNDtcbn1cblxuLnRlbi1kaWNoLXZ1LWxhYmVsIHtcbiAgZGlzcGxheTogaW5saW5lO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbn1cblxuLnRvb2x0aXAtYmxvY2sge1xuICBiYWNrZ3JvdW5kOiAjMDA1ZGFiO1xuICBjb2xvcjogI2ZmZjtcbn1cblxuLnRvb2x0aXAtYmxvY2sgKiB7XG4gIGZvbnQtc2l6ZTogMTNweDtcbn1cblxuc2VjdGlvbi5jaGVjay1ib3gtaHVvbmctYmh5dCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uY29sb3ItcmVkIHtcbiAgY29sb3I6IHJlZDtcbn0iXX0= */\"","import { Component, OnInit, ViewChild, TemplateRef, Input, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { ThemDuocPham, ThongTinDuocPham, ThongTinDonThuoc, KhachVangLai, ServiceId } from '../quay-thuoc.model';\nimport icDelete from '@iconify/icons-ic/delete';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { MatDialog } from '@angular/material';\nimport { ConfirmComponent } from 'src/app/shared/component/dialogs/confirm/confirm.component';\nimport { QuayThuocXacNhanInPopUpComponent } from '../quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component';\nimport { InBangThuTienPopUpComponent } from '../in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { GridComponent } from 'src/app/shared/component/grid/grid.component';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { TabStripComponent } from '@progress/kendo-angular-layout';\nimport icInfo from '@iconify/icons-ic/twotone-info';\nimport { ComboboxComponent } from 'src/app/shared/component/dropdowns/combobox/combobox.component';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\n@Component({\n    selector: 'app-quay-thuoc-khach-vang-lai-cho-thanh-toan',\n    templateUrl: './quay-thuoc-khach-vang-lai-cho-thanh-toan.component.html',\n    styleUrls: ['./quay-thuoc-khach-vang-lai-cho-thanh-toan.component.scss']\n})\n\nexport class QuayThuocKhachVangLaiChoThanhToanComponent implements OnInit {\n    tongTien: number = 0;\n    tongTienHienThi: number = 0;\n    thongtinDonThuoc: ThongTinDonThuoc;\n    icDelete = icDelete;\n    documentType: DocumentType;\n    validationErrors: any;\n    validationErrorsThongTin: any;\n    validationThuocErrors: any;\n    themDuocPham: ThemDuocPham;\n    lstthongTinDonThuoc: Array<ThongTinDuocPham>;\n    validationThuThuocErrors: any[] = [];\n\n    flagCheckSeletedTienMat = false;\n    flagCheckSeletedChuyenKhoan = false;\n    flagCheckSeletedPos = false;\n    flagCheckSeletedSoTienCongNo = false;\n\n    deleteItem: Array<ThongTinDuocPham>;\n    snackBarOpen: any;\n    benhNhanResultData: any;\n    soLuongTonTrongKho: number = 0;\n    maBN: number;\n    tenBN: string;\n    icInfo = icInfo;\n    arrayThanhToans: any[] = [];\n    arrayThanhToanstmp: any[] = [];\n    selectItem: number[] = [];\n    checkSeletedTienMat: boolean = false;\n    checkSeletedChuyenKhoan: boolean = false;\n    checkSeletedPos: boolean = false;\n    isSelectingItem: boolean = false;\n\n    public selectMoneyTienBNDua: any[] = null;\n    public selectMoneyTienMat: any[] = null;\n    public selectMoneyTienChuyenKhoan: any[] = null;\n    public selectMoneyTienPos: any[] = null;\n    public selectMoneySoTienCongNo: any[] = null;\n\n    public setDefeautTienMat: any = [1];\n    public showCanhBaoSoTienNhap: boolean = false;\n\n    tongTienGrid = 0;\n\n    @Output() danhSachChuaThanhToan = new EventEmitter<any>();\n    @Output() valueChangeThuTien: EventEmitter<any> = new EventEmitter<any>();\n    @ViewChild('duocphamCombobox', { static: false }) duocPhamCombobox: ComboboxComponent;\n    constructor(\n        private apiService: ApiService,\n        private notificationService: NotificationService,\n        private dialog: MatDialog,\n        private snackBar: MatSnackBar,\n        private cdRef: ChangeDetectorRef,\n        private router: Router) { }\n\n    gridColumns: any[] = [];\n    lstDonThuocMoiThem = Array<ThongTinDuocPham>();\n\n    dataSourcedanhsachThuoc: any = {\n        data: [],\n        total: 0\n    };\n\n    public hinhThucThanhToan: any = [\n        { KeyId: 1, DisplayName: \"Tiền mặt\", Selected: false, Change: false },\n        { KeyId: 2, DisplayName: \"Chuyển khoản\", Selected: false, Change: false },\n        { KeyId: 3, DisplayName: \"Pos\", Selected: false, Change: false },\n        { KeyId: 4, DisplayName: \"Công nợ\", Selected: false, Change: false },\n    ];\n\n    @Input() thongTinKhachVangLai: KhachVangLai;\n    @ViewChild('tabVangLai', { static: true }) tabVangLai: TabStripComponent;\n    @Output() changeTab = new EventEmitter<any>();\n    @Output() MaTiepNhanBenhNhanDaThuTien = new EventEmitter<any>();\n\n    @ViewChild('footerTemplateTongTienDonThuoc', { static: true }) footerTemplateTongTienDonThuoc: TemplateRef<any>;\n    @ViewChild('actionTemplate', { static: true }) actionTemplate: TemplateRef<any>;\n    @ViewChild('footerTemplateDonGia', { static: true }) footerTemplateDonGia: TemplateRef<any>;\n    @ViewChild('donGiaTemplate', { static: true }) donGiaTemplate: TemplateRef<any>;\n    @ViewChild('thanhTienTemplate', { static: true }) thanhTienTemplate: TemplateRef<any>;\n    @ViewChild('gridDanhSachMuaThuoc', { static: true }) gridDanhSachMuaThuoc: GridComponent;\n    @ViewChild('soLuonTemplate', { static: true }) soLuonTemplate: TemplateRef<any>;\n    @Input() donThuocId: ServiceId;\n    @Input() ttCheck: number;\n    donThuocIds: string[] = [];\n\n    ngOnInit() {\n        this.documentType = DocumentType.QuayThuoc;\n        this.thongtinDonThuoc = new ThongTinDonThuoc();\n\n        this.lstDonThuocMoiThem = new Array<ThongTinDuocPham>();\n        this.themDuocPham = new ThemDuocPham();\n        this.deleteItem = new Array<ThongTinDuocPham>();\n        this.gridColumns = [\n            { Field: \"STT\", Title: \"#\", Width: 40, Sortable: false },\n            { Field: \"TenDuocPham\", Title: \"Tên Thuốc-Vật Tư\", Width: 120, Sortable: false },\n            // { Field: \"MaHoatChat\", Title: \"Hoạt Chất\", Width: 120, Sortable: false },\n            { Field: \"DonViTinh\", Title: \"ĐVT\", Width: 60, Sortable: false },\n            { Field: \"ViTri\", Title: \"Vị trí\", Width: 120, Sortable: false },\n            { Field: \"SoLuongMua\", Title: \"SL Mua\", Width: 90, Sortable: false, Template: this.soLuonTemplate },\n            { Field: \"DonGia\", Title: \"Đơn giá\", Width: 100, Sortable: false, Template: this.donGiaTemplate, TemplateFooter: this.footerTemplateDonGia },\n            { Field: \"ThanhTien\", Title: \"Thành tiền\", Width: 100, Sortable: false, Template: this.thanhTienTemplate, TemplateFooter: this.footerTemplateTongTienDonThuoc },\n            { Field: \"Solo\", Title: \"Số lô\", Width: 120, Sortable: false },\n            { Field: \"HanSuDungHientThi\", Title: \"Hạn sử dụng\", Width: 100, Sortable: false },\n            { Field: \"Action\", Title: \"\", Width: 50, Template: this.actionTemplate },\n        ];\n\n        this.flagCheckSeletedTienMat = true;\n        this.thongtinDonThuoc.NgayThu = new Date();\n        this.thongtinDonThuoc.NoiDungThu = \"Thu tiền thuốc\";\n        this.thongtinDonThuoc.HinhThucThanhToan = [1];\n        this.hinhThucThanhToan = [\n            { KeyId: 1, DisplayName: \"Tiền mặt\", Selected: true, Change: false },\n            { KeyId: 2, DisplayName: \"Chuyển khoản\", Selected: false, Change: false },\n            { KeyId: 3, DisplayName: \"Pos\", Selected: false, Change: false },\n            { KeyId: 4, DisplayName: \"Công nợ\", Selected: false, Change: false },\n        ];;\n\n        if (this.donThuocId.ToaThuoc != null) {\n            this.getDonThuocChiTietCu();\n        }\n\n    }\n\n    onSelectDuocPham(event) {\n        if (event !== undefined) {\n            this.apiService.post<Array<any>>('QuayThuoc/GetThongTinDuocPham?duocPhamId=' + event.KeyId + \"&LoaiDuocPhamHoacVatTu=\" + event.LoaiDuocPhamHoacVatTu).subscribe(\n                resultData => {\n                    debugger;\n                    let soLuongTon = 0;\n                    this.lstthongTinDonThuoc = resultData;\n                    if (this.lstDonThuocMoiThem.length > 0) {\n                        this.lstDonThuocMoiThem.forEach(x => {\n                            if (x.DuocPhamId == this.themDuocPham.DuocPhamId) {\n                                soLuongTon = soLuongTon + x.SoLuongMua;\n                            }\n                        });\n                    }\n\n                    debugger;\n                    this.themDuocPham.SoLuongTon = resultData.reduce((sum, item) => sum + item.SoLuongTon, 0) - soLuongTon;\n                });\n\n        } else {\n            this.themDuocPham.SoLuongTon = null;\n        }\n    }\n\n    delete(event: any) {\n        if (event != undefined && event != null) {\n            this.dialog.open(ConfirmComponent, {\n                disableClose: false,\n                width: \"500px\",\n                data: {\n                    Title: \"Xác nhận\",\n                    Message: \"Bạn có muốn xóa thuốc/vật tư này không ?\",\n                },\n            }).afterClosed().subscribe((res) => {\n                if (res == \"Yes\") {\n\n\n                    let i = 0;\n                    let stt = event.STT;\n\n                    for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n                        if (this.dataSourcedanhsachThuoc.data[index].STT == event.STT) {\n                            i = index;\n                            this.soLuongTonTrongKho = this.dataSourcedanhsachThuoc.data[index].SoLuongTon;\n                        }\n                    }\n\n                    this.dataSourcedanhsachThuoc.data[i].SoLuongDung = null;\n                    this.dataSourcedanhsachThuoc.data[i].HighLightClass = null;\n                    this.deleteItem.push(this.dataSourcedanhsachThuoc.data[i])\n                    this.lstthongTinDonThuoc = new Array<ThongTinDuocPham>();\n                    this.lstthongTinDonThuoc.push(this.dataSourcedanhsachThuoc.data[i])\n                    this.dataSourcedanhsachThuoc.data.splice(i, 1);\n                    let soLuongTon = 0;\n                    let tenDuocPhamText = \"\";\n                    let duocPhamId = 0;\n                    if (this.deleteItem.length > 0) {\n                        this.deleteItem.forEach(x => {\n                            soLuongTon = soLuongTon + x.SoLuongMua;\n                            tenDuocPhamText = x.TenDuocPham;\n                            duocPhamId = x.DuocPhamId;\n                        });\n                    }\n\n                    this.thongtinDonThuoc.BenhNhanDua = 0;\n                    this.thongtinDonThuoc.TienTraLai = null;\n\n                    this.lstDonThuocMoiThem = new Array<ThongTinDuocPham>();\n\n                    for (let index0 = 0; index0 < i; index0++) {\n                        this.lstDonThuocMoiThem.push(this.dataSourcedanhsachThuoc.data[index0]);\n                    }\n\n                    for (let index1 = i; index1 < this.dataSourcedanhsachThuoc.data.length; index1++) {\n                        this.dataSourcedanhsachThuoc.data[index1].STT = stt;\n                        this.lstDonThuocMoiThem.push(this.dataSourcedanhsachThuoc.data[index1]);\n                        stt++;\n                    }\n                    this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                    this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n\n                    // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                    //     this.thongtinDonThuoc.TienMat = this.tongTien;\n                    // }\n\n                    let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n                    if (items != null && items.length > 0) {\n                        this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n                    }\n\n                    if (this.themDuocPham.DuocPhamId == duocPhamId) {\n                        this.apiService.post<Array<any>>(\"QuayThuoc/GetThongTinDuocPham?duocPhamId=\" + event.DuocPhamId).subscribe(\n                            resultData => {\n                                let soLuongTon = 0;\n                                if (this.dataSourcedanhsachThuoc.data.length != 0) {\n                                    this.dataSourcedanhsachThuoc.data.forEach(x => {\n                                        if (x.DuocPhamId == event.DuocPhamId) {\n                                            soLuongTon = soLuongTon + x.SoLuongMua;\n                                        }\n                                    });\n                                }\n                                this.themDuocPham.SoLuongTon = resultData.reduce((sum, item) => sum + item.SoLuongTon, 0) - soLuongTon;\n                            });\n                    }\n                    this.notificationService.showSuccess(\n                        \"Xóa thành công\"\n                    );\n                    this.danhSachXemTruocBangKeThuocVaVatTu(this.dataSourcedanhsachThuoc.data);\n                }\n            })\n        };\n    }\n\n    onChangeTienThoi() {\n        if (this.thongtinDonThuoc.BenhNhanDua < this.tongTien) {\n            this.thongtinDonThuoc.TienTraLai = null;\n            return;\n        }\n\n        this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.tongTien;\n    }\n\n    setLastItemDelete() {\n        if (this.arrayThanhToanstmp.length > 1 && this.arrayThanhToanstmp[this.arrayThanhToanstmp.length - 2].length > this.arrayThanhToans.length) {\n            var truoc = this.arrayThanhToanstmp[this.arrayThanhToanstmp.length - 2];\n            var sau = this.arrayThanhToanstmp[this.arrayThanhToanstmp.length - 1];\n            var valRemove = truoc.filter(arr1Item => !sau.includes(arr1Item));\n            let val: number = 0;\n\n            if (valRemove == 3) {\n                val = this.thongtinDonThuoc.POS;\n                this.thongtinDonThuoc.POS = 0;\n            }\n            if (valRemove == 2) {\n                val = this.thongtinDonThuoc.ChuyenKhoan;\n                this.thongtinDonThuoc.ChuyenKhoan = 0;\n            }\n            if (valRemove == 1) {\n                val = this.thongtinDonThuoc.TienMat;\n                this.thongtinDonThuoc.TienMat = 0;\n            }\n            let lastKeCuoi = this.arrayThanhToanstmp[this.arrayThanhToanstmp.length - 1];\n            var kiemTraCuoiCongNoKhong = lastKeCuoi[lastKeCuoi.length - 1];\n\n            if (kiemTraCuoiCongNoKhong === 4) {\n                let kpCongNo = lastKeCuoi[lastKeCuoi.length - 2];\n                if (kpCongNo == 2) {\n                    this.thongtinDonThuoc.ChuyenKhoan += val;\n                }\n                if (kpCongNo == 3) {\n                    this.thongtinDonThuoc.POS += val;\n                }\n                if (kpCongNo == 1) {\n                    this.thongtinDonThuoc.TienMat += val;\n                }\n            }\n            else {\n                let kpCongNo = lastKeCuoi[lastKeCuoi.length - 1];\n                if (kpCongNo == 2) {\n                    this.thongtinDonThuoc.ChuyenKhoan += val;\n                }\n                if (kpCongNo == 3) {\n                    this.thongtinDonThuoc.POS += val;\n                }\n                if (kpCongNo == 1) {\n                    this.thongtinDonThuoc.TienMat += val;\n                }\n            }\n        }\n    }\n\n    clearHinhThucThanhToan() {\n        this.flagCheckSeletedTienMat = false;\n        this.flagCheckSeletedChuyenKhoan = false;\n        this.flagCheckSeletedPos = false;\n        this.checkSeletedTienMat = false;\n        this.checkSeletedChuyenKhoan = false;\n        this.flagCheckSeletedSoTienCongNo = false;\n        this.checkSeletedPos = false;\n    }\n\n    setLastItem() {\n        this.arrayThanhToans.sort();\n        let lastItem = this.arrayThanhToans[this.arrayThanhToans.length - 1];\n        if (lastItem == 1) {\n            this.checkSeletedTienMat = true;\n            this.checkSeletedChuyenKhoan = true;\n            this.thongtinDonThuoc.TienMat = this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS;\n            if (this.thongtinDonThuoc.TienMat < 0) {\n                this.thongtinDonThuoc.TienMat = 0;\n            }\n        }\n        if (lastItem == 2) {\n            this.checkSeletedChuyenKhoan = true;\n\n            this.thongtinDonThuoc.ChuyenKhoan = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS;\n            if (this.thongtinDonThuoc.ChuyenKhoan < 0) {\n                this.thongtinDonThuoc.ChuyenKhoan = 0;\n            }\n        }\n\n        if (lastItem == 3) {\n            this.checkSeletedPos = true;\n\n            this.thongtinDonThuoc.POS = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan;\n            if (this.thongtinDonThuoc.POS < 0) {\n                this.thongtinDonThuoc.POS = 0;\n            }\n        }\n\n        if (lastItem == undefined) {\n            this.thongtinDonThuoc.TienMat = 0;\n            this.thongtinDonThuoc.POS = 0;\n            this.thongtinDonThuoc.ChuyenKhoan = 0;\n        }\n    }\n\n    setLastItemBangTien(input: any) {\n        this.arrayThanhToans.sort();\n        let lastItem = this.arrayThanhToans[this.arrayThanhToans.length - 1];\n        if (lastItem == 1) {\n            this.checkSeletedTienMat = true;\n            this.checkSeletedChuyenKhoan = true;\n            this.thongtinDonThuoc.TienMat = this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS;\n            if (this.thongtinDonThuoc.TienMat < 0) {\n                this.thongtinDonThuoc.TienMat = 0;\n            }\n        }\n        if (lastItem == 2) {\n            this.checkSeletedChuyenKhoan = true;\n\n            this.thongtinDonThuoc.ChuyenKhoan = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS;\n            if (this.thongtinDonThuoc.ChuyenKhoan < 0) {\n                this.thongtinDonThuoc.ChuyenKhoan = 0;\n            }\n        }\n\n        if (lastItem == 3) {\n            this.checkSeletedPos = true;\n\n            this.thongtinDonThuoc.POS = this.tongTien - this.thongtinDonThuoc.TienMat - input;\n            if (this.thongtinDonThuoc.POS < 0) {\n                this.thongtinDonThuoc.POS = 0;\n            }\n        }\n\n        if (lastItem == undefined) {\n            this.thongtinDonThuoc.TienMat = 0;\n            this.thongtinDonThuoc.POS = 0;\n            this.thongtinDonThuoc.ChuyenKhoan = 0;\n        }\n    }\n\n    changeSoTien(items: any) {\n        switch (items) {\n            case 1:\n                this.thongtinDonThuoc.TienMat = (this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 2:\n                this.thongtinDonThuoc.ChuyenKhoan = (this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 3:\n                this.thongtinDonThuoc.POS = (this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.SoTienCongNo) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.SoTienCongNo;\n                break;\n            case 4:\n                this.thongtinDonThuoc.SoTienCongNo = (this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS) < 0 ? 0 :\n                    this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS;\n                break;\n        }\n    }\n\n    onValueChange(event: any, type: number) {\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n        this.hinhThucThanhToan.forEach(item => {\n            if (item.KeyId == type) {\n                item.Change = true;\n            }\n        });\n        var itemNotChanges = this.hinhThucThanhToan.filter(o => o.Selected == true && o.Change == false);\n        if (itemNotChanges.length == 1) {\n            this.changeSoTien(itemNotChanges[0].KeyId);\n        }\n        else {\n            if (itemNotChanges.length == 0 && this.hinhThucThanhToan.filter(o => o.Selected == true).length == 2) {\n                var items = this.hinhThucThanhToan.filter(o => o.Selected == true && o.KeyId != type);\n                this.changeSoTien(items[0].KeyId);\n            }\n        }\n        if (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo != this.tongTien) {\n            this.showCanhBaoSoTienNhap = true;\n        }\n        else {\n\n            this.showCanhBaoSoTienNhap = false;\n        }\n        this.changeTienTraLaiBenhNhan();\n    }\n\n    changeTienTraLaiBenhNhan() {\n        if (this.thongtinDonThuoc.BenhNhanDua > this.thongtinDonThuoc.TienMat) {\n            this.thongtinDonThuoc.TienTraLai =\n                this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        } else {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n\n    modelChangePos(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.SoTienCongNo) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienPos = [total, 0];\n\n        this.thongtinDonThuoc.POS = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeChuyenKhoan(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo) !== 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.TienMat + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienChuyenKhoan = [total, 0];\n        this.thongtinDonThuoc.ChuyenKhoan = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeTienMat(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.SoTienCongNo);\n        this.selectMoneyTienMat = [total, 0];\n\n        this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n        this.thongtinDonThuoc.TienMat = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeSoTienCongNo(ev: any, type: any) {\n        const total = (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.TienMat) === 0 ?\n            this.tongTien : this.tongTien - (this.thongtinDonThuoc.ChuyenKhoan + this.thongtinDonThuoc.POS + this.thongtinDonThuoc.TienMat);\n        this.selectMoneySoTienCongNo = [total, 0];\n\n        this.thongtinDonThuoc.SoTienCongNo = ev;\n        this.onValueChange(ev, type);\n    }\n\n    modelChangeTienBNDua(input: any) {\n        this.selectMoneyTienBNDua = [this.tongTien, 100000000];\n        this.thongtinDonThuoc.TienTraLai = input - this.thongtinDonThuoc.TienMat;\n\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n\n    onChangeBenhNhanDua() {\n        this.thongtinDonThuoc.TienTraLai = this.thongtinDonThuoc.BenhNhanDua - this.thongtinDonThuoc.TienMat;\n        if (this.thongtinDonThuoc.TienTraLai < 0) {\n            this.thongtinDonThuoc.TienTraLai = 0;\n        }\n    }\n\n    XacNhanIn(data: any) {\n        this.showPopupLoadingIn();\n        data.Hosting = window.location.protocol + '//' + window.location.host;\n        this.apiService.postExportExcel<any>('QuayThuoc/XacNhanIn', data).subscribe(\n            resultData => {\n                if (resultData != undefined && resultData != null) {\n                    if (data.InBangKe == false && data.InPhieuThu == false) {\n                        this.notificationService.showError('Không có phiếu in được chọn.');\n                        this.closePopupLoadingData();\n                    }\n                    else {\n                        this.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                            disableClose: true,\n                            width: '1000px',\n                            data: { Model: resultData }\n                        }).afterClosed().subscribe(() => {\n                            this.closePopupLoadingData();\n                        });\n\n                    }\n                }\n            },\n            (err: ApiError) => {\n                this.closePopupLoadingData();\n                this.validationErrors = err.ValidationErrors;\n              if (err.Message != \"Validation Failed\") {\n                this.notificationService.showError(err.Message);\n              }\n            });\n    }\n\n    shareData() {\n        this.thongtinDonThuoc.DanhSachDonThuocs = [...this.dataSourcedanhsachThuoc.data];\n        for (let index = 0; index < this.thongtinDonThuoc.DanhSachDonThuocs.length; index++) {\n            this.thongtinDonThuoc.DanhSachDonThuocs[index].HighLightClass = null;\n            if (this.thongtinDonThuoc.DanhSachDonThuocs[index].CheckedDefault == false) {\n                this.thongtinDonThuoc.DanhSachDonThuocs.splice(index, 1)\n                index = -1;\n            }\n        }\n        return this.thongtinDonThuoc;\n    }\n\n\n    ThuTienVaXuatThuoc() {\n        this.validationErrors = [];\n        this.cdRef.detectChanges();\n\n        if (this.dataSourcedanhsachThuoc.data === [] || this.dataSourcedanhsachThuoc.data.length == 0) {\n            this.notificationService.showError(\"Người bệnh này không có thuốc nào để thanh toán.\");\n            return;\n        }\n        let index = this.dataSourcedanhsachThuoc.data.findIndex(x => x.LoaiDonThuoc == 1)\n        if (index != -1) {\n            this.notificationService.showError(\"Đang có thuốc bảo hiểm trong đơn thuốc.\");\n            return;\n        }\n        let indexHetThuoc = this.dataSourcedanhsachThuoc.data.findIndex(x => x.ThuocTrongKhoExit == true)\n        if (indexHetThuoc != -1) {\n            this.notificationService.showError(\"Thuốc trong kho không còn.\");\n            return;\n        }\n        if (this.thongtinDonThuoc.TienMat === null || this.thongtinDonThuoc.TienMat === undefined) {\n            this.thongtinDonThuoc.TienMat = 0;\n        }\n\n        if (this.thongtinDonThuoc.ChuyenKhoan === null || this.thongtinDonThuoc.ChuyenKhoan === undefined) {\n            this.thongtinDonThuoc.ChuyenKhoan = 0;\n        }\n\n        if (this.thongtinDonThuoc.POS === null || this.thongtinDonThuoc.POS === undefined) {\n            this.thongtinDonThuoc.POS = 0;\n        }\n\n        if (this.thongtinDonThuoc.BenhNhanDua === null || this.thongtinDonThuoc.BenhNhanDua === undefined) {\n            this.thongtinDonThuoc.BenhNhanDua = 0;\n        }\n\n        if (this.thongTinKhachVangLai === undefined) {\n            this.thongTinKhachVangLai = new KhachVangLai();\n        }\n\n        if (this.setDefeautTienMat.length === 0) {\n            this.validationErrors.push({\n                Message: \"Vui lòng chọn hình thức thanh toán\",\n                Field: \"HinhThucThanhToan\",\n            });\n            return true;\n        }\n\n        var validationCheck = {\n            HoTen: this.thongTinKhachVangLai.HoTen,\n            NamSinh: this.thongTinKhachVangLai.NamSinh,\n            HinhThucThanhToan: this.thongtinDonThuoc.HinhThucThanhToan,\n            TienMat: this.thongtinDonThuoc.TienMat,\n            ChuyenKhoan: this.thongtinDonThuoc.ChuyenKhoan,\n            POS: this.thongtinDonThuoc.POS,\n            SoTienCongNo: this.thongtinDonThuoc.SoTienCongNo,\n            BenhNhanDua: this.thongtinDonThuoc.BenhNhanDua,\n            NgayThu: this.thongtinDonThuoc.NgayThu,\n            NoiDungThu: this.thongtinDonThuoc.NoiDungThu,\n            TongTien: this.tongTien\n        };\n        this.validationErrors = [];\n        this.validationErrorsThongTin = [];\n\n        if (this.donThuocId.maBN != null) {\n            this.maBN = this.donThuocId.maBN;\n            this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhan1?maBN=\" + this.maBN).subscribe(  // to do maBn => benhNhanId\n                (resultData) => {\n                    this.thongTinKhachVangLai.Id = resultData.Id;\n                    this.thongTinKhachVangLai.HoTen = resultData.HoTen;\n                    this.thongTinKhachVangLai.GioiTinh = resultData.GioiTinh;\n                    this.thongTinKhachVangLai.DiaChi = resultData.DiaChi;\n                    this.thongTinKhachVangLai.DiaChiDayDu = resultData.DiaChiDayDu;\n                    this.thongTinKhachVangLai.NamSinh = resultData.NamSinh;\n                    this.thongTinKhachVangLai.PhuongXaId = resultData.PhuongXaId;\n                    this.thongTinKhachVangLai.QuanHuyenId = resultData.QuanHuyenId;\n                    this.thongTinKhachVangLai.SoDienThoai = resultData.SoDienThoai;\n                    this.thongTinKhachVangLai.TinhThanhId = resultData.TinhThanhId;\n                    this.thongTinKhachVangLai.Email = resultData.Email;\n                });\n            this.apiService.post<any>(\"QuayThuoc/GetTenBenhNhan?benhNhanId=\" + this.maBN).subscribe( // to do maBn => benhNhanId\n                resultData => {\n                    this.tenBN = resultData;\n                    validationCheck.HoTen = this.tenBN;\n                    validationCheck.NamSinh = this.thongTinKhachVangLai.NamSinh;\n                    this.thongtinDonThuoc.HoTenBenhNhan = this.tenBN;\n                    this.thongTinKhachVangLai.HoTen = this.tenBN;\n                    this.apiService.post<any>(\"QuayThuoc/CheckValidationForQuayThuocKhachVangLai\", validationCheck).subscribe(\n                        () => {\n                            var khachVangLaiChoThanhToan = {\n                                ThongTinKhach: this.thongTinKhachVangLai,\n                                ThongTinThuChi: this.thongtinDonThuoc,\n                                DanhSachDonThuoc: this.lstDonThuocMoiThem\n                            };\n                            let chuInHoa = this.thongTinKhachVangLai.HoTen.toUpperCase();\n                            this.dialog.open(ConfirmComponent, {\n                                //disableClose: true,\n                                width: '1000px',\n                                data: {\n                                    Title: 'Xác nhận', Message: 'Bạn chắc chắn muốn thu của người bệnh ' +\n                                        chuInHoa.bold() + ' với số tiền là ' +\n                                        this.tongTien.toLocaleString('vi-VI').bold() + ' đồng hay không?'\n                                }\n                            }).afterClosed().subscribe(result => {\n                                if (result == 'Yes') {\n                                    this.apiService.post<any>(\"QuayThuoc/ThuTienKhachVangLaiVaXuatThuoc\", khachVangLaiChoThanhToan).subscribe(\n                                        resultData => {\n                                            khachVangLaiChoThanhToan.DanhSachDonThuoc = [];\n                                            this.lstDonThuocMoiThem = [];\n                                            if (resultData.ThanhCong == false) {\n                                                this.notificationService.showError(resultData.Error);\n                                                for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                                                    for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                                        if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt == this.dataSourcedanhsachThuoc.data[j].STT) {\n                                                            this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                                            this.dataSourcedanhsachThuoc.data[j].SoLuongDung = resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                                        }\n                                                    }\n                                                }\n                                            } else if (resultData.ThanhCong == true) {\n                                                this.dataSourcedanhsachThuoc.data = [];\n\n                                                if (this.gridDanhSachMuaThuoc !== undefined) {\n                                                    this.gridDanhSachMuaThuoc.setDataSource();\n                                                }\n\n                                                this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                                                this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n                                                if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                                                    this.thongtinDonThuoc.TienMat = this.tongTien;\n                                                }\n                                                this.benhNhanResultData = resultData;\n                                                this.apiService.post<any>(\"QuayThuoc/GetBenhNhanForNavigation?taiKhoanThuId=\" + resultData.TaiKhoanBenhNhanThuId).subscribe(\n                                                    result1 => {\n                                                        let dialogRef = this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                                                            disableClose: true,\n                                                            width: '500px',\n                                                            data: { Model: this.benhNhanResultData, Title: \"XÁC NHẬN\" }\n                                                        }).afterClosed().subscribe(result => {\n                                                            if (result.Response != \"No answer\") {\n                                                                this.changeTab.emit(2);\n                                                                this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n\n                                                                this.XacNhanIn(result);\n                                                            }\n                                                            else {\n                                                                this.changeTab.emit(2);\n                                                                this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                            }\n                                                        });\n                                                    });\n                                            }\n                                        });\n                                }\n                            });\n                        },\n                        (err: ApiError) => {\n                            this.validationErrors = err.ValidationErrors;\n                            if (this.validationErrors.length !== 0) {\n                                for (var i = 0; i < this.validationErrors.length; i++) {\n                                    if (this.validationErrors[i].Field === \"HoTen\") {\n                                        this.validationErrorsThongTin.push(this.validationErrors[i]);\n                                    }\n\n                                    if (this.validationErrors[i].Field === \"NamSinh\") {\n                                        this.validationErrorsThongTin.push(this.validationErrors[i]);\n                                    }\n                                }\n                            }\n                            this.valueChangeThuTien.emit(this.validationErrorsThongTin);\n                            return;\n                        });\n                },\n                () => { });\n\n        } else {\n\n            this.apiService.post<any>(\"QuayThuoc/CheckValidationForQuayThuocKhachVangLai\", validationCheck).subscribe(\n                () => {\n                    var khachVangLaiChoThanhToan = {\n                        ThongTinKhach: this.thongTinKhachVangLai,\n                        ThongTinThuChi: this.thongtinDonThuoc,\n                        DanhSachDonThuoc: this.lstDonThuocMoiThem\n                    };\n                    let chuInHoa = this.thongTinKhachVangLai.HoTen.toUpperCase();\n\n                    this.dialog.open(ConfirmComponent, {\n                        width: '1000px',\n                        data: { Title: \"Xác nhận\", Message: \"Bạn chắc chắn muốn thu của người bệnh \" + chuInHoa.bold() + \" với số tiền là \" + this.tongTien.toLocaleString(\"vi-VI\").bold() + \" đồng hay không?\" }\n                    }).afterClosed().subscribe(result => {\n                        if (result == 'Yes') {\n                            this.apiService.post<any>(\"QuayThuoc/ThuTienKhachVangLaiVaXuatThuoc\", khachVangLaiChoThanhToan).subscribe(\n                                resultData => {\n                                    khachVangLaiChoThanhToan.DanhSachDonThuoc = [];\n                                    this.lstDonThuocMoiThem = [];\n                                    if (resultData.ThanhCong == false) {\n                                        this.notificationService.showError(resultData.Error);\n                                        for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                                            for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                                if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt == this.dataSourcedanhsachThuoc.data[j].STT) {\n                                                    this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                                    this.dataSourcedanhsachThuoc.data[j].SoLuongDung = resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                                }\n                                            }\n                                        }\n                                    } else if (resultData.ThanhCong == true) {\n                                        this.reset();\n                                        this.dataSourcedanhsachThuoc.data = [];\n\n                                        if (this.gridDanhSachMuaThuoc !== undefined) {\n                                            this.gridDanhSachMuaThuoc.setDataSource();\n                                        }\n\n                                        this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                                        this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n\n                                        if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                                            this.thongtinDonThuoc.TienMat = this.tongTien;\n                                        }\n\n                                        this.benhNhanResultData = resultData;\n\n                                        this.apiService.post<any>(\"QuayThuoc/GetBenhNhanForNavigation?taiKhoanThuId=\" + resultData.TaiKhoanBenhNhanThuId).subscribe(\n                                            result1 => {\n                                                let dialogRef = this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                                                    disableClose: true,\n                                                    width: '500px',\n                                                    data: { Model: this.benhNhanResultData, Title: \"XÁC NHẬN\" }\n                                                }).afterClosed().subscribe(result => {\n                                                    if (result.Response != \"No answer\") {\n                                                        this.changeTab.emit(2);\n                                                        this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                        this.XacNhanIn(result);\n                                                    }\n                                                    else {\n                                                        this.changeTab.emit(2);\n                                                        this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                    }\n\n                                                });\n\n                                            });\n                                    }\n                                });\n                        }\n                    });\n                },\n                (err: ApiError) => {\n                    this.validationErrors = err.ValidationErrors;\n\n                    if (this.validationErrors.length !== 0) {\n                        for (var i = 0; i < this.validationErrors.length; i++) {\n                            if (this.validationErrors[i].Field === \"HoTen\") {\n                                this.validationErrorsThongTin.push(this.validationErrors[i]);\n                            }\n\n                            if (this.validationErrors[i].Field === \"NamSinh\") {\n                                this.validationErrorsThongTin.push(this.validationErrors[i]);\n                            }\n                        }\n                    }\n                    this.valueChangeThuTien.emit(this.validationErrorsThongTin);\n                    return;\n                });\n        }\n    }\n\n    ThuTien() {\n        this.validationErrors = [];\n        this.cdRef.detectChanges();\n\n        if (this.dataSourcedanhsachThuoc.data === [] || this.dataSourcedanhsachThuoc.data.length == 0) {\n            this.notificationService.showError(\"Người bệnh này không có thuốc nào để thanh toán.\");\n            return;\n        }\n        let index = this.dataSourcedanhsachThuoc.data.findIndex(x => x.LoaiDonThuoc == 1)\n        if (index != -1) {\n            this.notificationService.showError(\"Đang có thuốc bảo hiểm trong đơn thuốc.\");\n            return;\n        }\n        let indexHetThuoc = this.dataSourcedanhsachThuoc.data.findIndex(x => x.ThuocTrongKhoExit == true)\n        if (indexHetThuoc != -1) {\n            this.notificationService.showError(\"Thuốc trong kho không còn.\");\n            return;\n        }\n        if (this.thongtinDonThuoc.TienMat === null || this.thongtinDonThuoc.TienMat === undefined) {\n            this.thongtinDonThuoc.TienMat = 0;\n        }\n\n        if (this.thongtinDonThuoc.ChuyenKhoan === null || this.thongtinDonThuoc.ChuyenKhoan === undefined) {\n            this.thongtinDonThuoc.ChuyenKhoan = 0;\n        }\n\n        if (this.thongtinDonThuoc.POS === null || this.thongtinDonThuoc.POS === undefined) {\n            this.thongtinDonThuoc.POS = 0;\n        }\n\n        if (this.thongtinDonThuoc.BenhNhanDua === null || this.thongtinDonThuoc.BenhNhanDua === undefined) {\n            this.thongtinDonThuoc.BenhNhanDua = 0;\n        }\n\n        if (this.thongTinKhachVangLai === undefined) {\n            this.thongTinKhachVangLai = new KhachVangLai();\n        }\n\n        if (this.setDefeautTienMat.length === 0) {\n            this.validationErrors.push({\n                Message: \"Vui lòng chọn hình thức thanh toán\",\n                Field: \"HinhThucThanhToan\",\n            });\n            return true;\n        }\n\n        var validationCheck = {\n            HoTen: this.thongTinKhachVangLai.HoTen,\n            NamSinh: this.thongTinKhachVangLai.NamSinh,\n            HinhThucThanhToan: this.thongtinDonThuoc.HinhThucThanhToan,\n            TienMat: this.thongtinDonThuoc.TienMat,\n            ChuyenKhoan: this.thongtinDonThuoc.ChuyenKhoan,\n            POS: this.thongtinDonThuoc.POS,\n            SoTienCongNo: this.thongtinDonThuoc.SoTienCongNo,\n            BenhNhanDua: this.thongtinDonThuoc.BenhNhanDua,\n            NgayThu: this.thongtinDonThuoc.NgayThu,\n            NoiDungThu: this.thongtinDonThuoc.NoiDungThu,\n            TongTien: this.tongTien\n        };\n        this.validationErrors = [];\n        this.validationErrorsThongTin = [];\n\n        if (this.donThuocId.maBN != null) {\n            this.maBN = this.donThuocId.maBN;\n            this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhan1?maBN=\" + this.maBN).subscribe(  // to do maBn => benhNhanId\n                (resultData) => {\n                    this.thongTinKhachVangLai.Id = resultData.Id;\n                    this.thongTinKhachVangLai.HoTen = resultData.HoTen;\n                    this.thongTinKhachVangLai.GioiTinh = resultData.GioiTinh;\n                    this.thongTinKhachVangLai.DiaChi = resultData.DiaChi;\n                    this.thongTinKhachVangLai.DiaChiDayDu = resultData.DiaChiDayDu;\n                    this.thongTinKhachVangLai.NamSinh = resultData.NamSinh;\n                    this.thongTinKhachVangLai.PhuongXaId = resultData.PhuongXaId;\n                    this.thongTinKhachVangLai.QuanHuyenId = resultData.QuanHuyenId;\n                    this.thongTinKhachVangLai.SoDienThoai = resultData.SoDienThoai;\n                    this.thongTinKhachVangLai.TinhThanhId = resultData.TinhThanhId;\n                    this.thongTinKhachVangLai.Email = resultData.Email;\n                });\n            this.apiService.post<any>(\"QuayThuoc/GetTenBenhNhan?benhNhanId=\" + this.maBN).subscribe( // to do maBn => benhNhanId\n                resultData => {\n                    this.tenBN = resultData;\n                    validationCheck.HoTen = this.tenBN;\n                    validationCheck.NamSinh = this.thongTinKhachVangLai.NamSinh;\n                    this.thongtinDonThuoc.HoTenBenhNhan = this.tenBN;\n                    this.thongTinKhachVangLai.HoTen = this.tenBN;\n                    this.apiService.post<any>(\"QuayThuoc/CheckValidationForQuayThuocKhachVangLai\", validationCheck).subscribe(\n                        () => {\n                            var khachVangLaiChoThanhToan = {\n                                ThongTinKhach: this.thongTinKhachVangLai,\n                                ThongTinThuChi: this.thongtinDonThuoc,\n                                DanhSachDonThuoc: this.lstDonThuocMoiThem\n                            };\n                            let chuInHoa = this.thongTinKhachVangLai.HoTen.toUpperCase();\n                            this.dialog.open(ConfirmComponent, {\n                                //disableClose: true,\n                                width: '1000px',\n                                data: {\n                                    Title: 'Xác nhận', Message: 'Bạn chắc chắn muốn thu của người bệnh ' +\n                                        chuInHoa.bold() + ' với số tiền là ' +\n                                        this.tongTien.toLocaleString('vi-VI').bold() + ' đồng hay không?'\n                                }\n                            }).afterClosed().subscribe(result => {\n                                if (result == 'Yes') {\n                                    this.apiService.post<any>(\"QuayThuoc/ThuTienKhachVangLai\", khachVangLaiChoThanhToan).subscribe(\n                                        resultData => {\n                                            khachVangLaiChoThanhToan.DanhSachDonThuoc = [];\n                                            this.lstDonThuocMoiThem = [];\n                                            if (resultData.ThanhCong == false) {\n                                                this.notificationService.showError(resultData.Error);\n                                                for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                                                    for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                                        if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt == this.dataSourcedanhsachThuoc.data[j].STT) {\n                                                            this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                                            this.dataSourcedanhsachThuoc.data[j].SoLuongDung = resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                                        }\n                                                    }\n                                                }\n                                            } else if (resultData.ThanhCong == true) {\n                                                this.dataSourcedanhsachThuoc.data = [];\n\n                                                if (this.gridDanhSachMuaThuoc !== undefined) {\n                                                    this.gridDanhSachMuaThuoc.setDataSource();\n                                                }\n\n                                                this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                                                this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n                                                if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                                                    this.thongtinDonThuoc.TienMat = this.tongTien;\n                                                }\n                                                this.benhNhanResultData = resultData;\n                                                this.apiService.post<any>(\"QuayThuoc/GetBenhNhanForNavigation?taiKhoanThuId=\" + resultData.TaiKhoanBenhNhanThuId).subscribe(\n                                                    result1 => {\n                                                        let dialogRef = this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                                                            disableClose: true,\n                                                            width: '500px',\n                                                            data: { Model: this.benhNhanResultData, Title: \"XÁC NHẬN\" }\n                                                        }).afterClosed().subscribe(result => {\n                                                            if (result.Response != \"No answer\") {\n                                                                this.changeTab.emit(2);\n                                                                this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                                this.XacNhanIn(result);\n                                                            }\n                                                            else {\n                                                                this.changeTab.emit(2);\n                                                                this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                            }\n                                                        });\n                                                    });\n                                            }\n                                        });\n                                }\n                            });\n                        },\n                        (err: ApiError) => {\n                            this.validationErrors = err.ValidationErrors;\n                            if (this.validationErrors.length !== 0) {\n                                for (var i = 0; i < this.validationErrors.length; i++) {\n                                    if (this.validationErrors[i].Field === \"HoTen\") {\n                                        this.validationErrorsThongTin.push(this.validationErrors[i]);\n                                    }\n\n                                    if (this.validationErrors[i].Field === \"NamSinh\") {\n                                        this.validationErrorsThongTin.push(this.validationErrors[i]);\n                                    }\n                                }\n                            }\n                            this.valueChangeThuTien.emit(this.validationErrorsThongTin);\n                            return;\n                        });\n                },\n                () => { });\n\n        } else {\n\n            this.apiService.post<any>(\"QuayThuoc/CheckValidationForQuayThuocKhachVangLai\", validationCheck).subscribe(\n                () => {\n                    var khachVangLaiChoThanhToan = {\n                        ThongTinKhach: this.thongTinKhachVangLai,\n                        ThongTinThuChi: this.thongtinDonThuoc,\n                        DanhSachDonThuoc: this.lstDonThuocMoiThem\n                    };\n                    let chuInHoa = this.thongTinKhachVangLai.HoTen.toUpperCase();\n\n                    this.dialog.open(ConfirmComponent, {\n                        width: '1000px',\n                        data: { Title: \"Xác nhận\", Message: \"Bạn chắc chắn muốn thu của người bệnh \" + chuInHoa.bold() + \" với số tiền là \" + this.tongTien.toLocaleString(\"vi-VI\").bold() + \" đồng hay không?\" }\n                    }).afterClosed().subscribe(result => {\n                        if (result == 'Yes') {\n                            this.apiService.post<any>(\"QuayThuoc/ThuTienKhachVangLai\", khachVangLaiChoThanhToan).subscribe(\n                                resultData => {\n                                    khachVangLaiChoThanhToan.DanhSachDonThuoc = [];\n                                    this.lstDonThuocMoiThem = [];\n                                    if (resultData.ThanhCong == false) {\n                                        this.notificationService.showError(resultData.Error);\n                                        for (let i = 0; i < resultData.DanhSachDuocPhamVuotTonKho.length; i++) {\n                                            for (let j = 0; j < this.dataSourcedanhsachThuoc.data.length; j++) {\n                                                if (resultData.DanhSachDuocPhamVuotTonKho[i].Stt == this.dataSourcedanhsachThuoc.data[j].STT) {\n                                                    this.dataSourcedanhsachThuoc.data[j].HighLightClass = 'bg-row-lightpink';\n                                                    this.dataSourcedanhsachThuoc.data[j].SoLuongDung = resultData.DanhSachDuocPhamVuotTonKho[i].SoLuongTonKho;\n                                                }\n                                            }\n                                        }\n                                    } else if (resultData.ThanhCong == true) {\n                                        this.reset();\n                                        this.dataSourcedanhsachThuoc.data = [];\n\n                                        if (this.gridDanhSachMuaThuoc !== undefined) {\n                                            this.gridDanhSachMuaThuoc.setDataSource();\n                                        }\n\n                                        this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                                        this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n\n                                        if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n                                            this.thongtinDonThuoc.TienMat = this.tongTien;\n                                        }\n\n                                        this.benhNhanResultData = resultData;\n\n                                        this.apiService.post<any>(\"QuayThuoc/GetBenhNhanForNavigation?taiKhoanThuId=\" + resultData.TaiKhoanBenhNhanThuId).subscribe(\n                                            result1 => {\n                                                let dialogRef = this.dialog.open(QuayThuocXacNhanInPopUpComponent, {\n                                                    disableClose: true,\n                                                    width: '500px',\n                                                    data: { Model: this.benhNhanResultData, Title: \"XÁC NHẬN\" }\n                                                }).afterClosed().subscribe(result => {\n                                                    if (result.Response != \"No answer\") {\n                                                        this.changeTab.emit(2);\n                                                        this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                        this.XacNhanIn(result);\n                                                    }\n                                                    else {\n                                                        this.changeTab.emit(2);\n                                                        this.MaTiepNhanBenhNhanDaThuTien.emit(result1);\n                                                    }\n\n                                                });\n\n                                            });\n                                    }\n                                });\n                        }\n                    });\n                },\n                (err: ApiError) => {\n                    this.validationErrors = err.ValidationErrors;\n\n                    if (this.validationErrors.length !== 0) {\n                        for (var i = 0; i < this.validationErrors.length; i++) {\n                            if (this.validationErrors[i].Field === \"HoTen\") {\n                                this.validationErrorsThongTin.push(this.validationErrors[i]);\n                            }\n\n                            if (this.validationErrors[i].Field === \"NamSinh\") {\n                                this.validationErrorsThongTin.push(this.validationErrors[i]);\n                            }\n                        }\n                    }\n                    this.valueChangeThuTien.emit(this.validationErrorsThongTin);\n                    return;\n                });\n        }\n    }\n\n    showError(message: string) {\n        this.showIt(message);\n    }\n\n    private showIt(message: string) {\n        if (this.snackBarOpen != null) {\n            this.snackBarOpen.dismiss();\n        }\n        this.snackBarOpen = this.snackBar.open(message, 'Đóng', {\n            duration: 7000,\n            horizontalPosition: 'right'\n        });\n    }\n\n    them1() {\n        this.validationThuocErrors = [];\n        if (this.themDuocPham.DuocPhamId == null) {\n            this.validationThuocErrors.push({ \"Message\": \"Dược phẩm yêu cầu nhập\", \"Field\": \"DuocPhamId\" });\n        }\n        if (this.themDuocPham.SoLuong == null) {\n            this.validationThuocErrors.push({ \"Message\": \"Số lượng yêu cầu nhập\", \"Field\": \"SoLuong\" });\n        }\n        if (this.themDuocPham.SoLuong == 0) {\n            this.validationThuocErrors.push({ \"Message\": \"Số lượng phải lớn hơn 0\", \"Field\": \"SoLuong\" });\n        }\n        if (this.themDuocPham.SoLuongTon < this.themDuocPham.SoLuong) {\n            this.validationThuocErrors.push({ \"Message\": \"Số lượng phải nhỏ hơn tồn kho\", \"Field\": \"SoLuong\" });\n        }\n        if (this.validationThuocErrors.length > 0) {\n            return;\n        }\n        let soLuongDaMua = 0;\n        this.thongtinDonThuoc.BenhNhanDua = 0;\n        this.thongtinDonThuoc.TienTraLai = null;\n        if (this.lstDonThuocMoiThem.length > 0) {\n            this.lstDonThuocMoiThem.forEach(x => {\n                if (x.DuocPhamId == this.themDuocPham.DuocPhamId) {\n                    soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                }\n            });\n        }\n        if (this.themDuocPham.SoLuongTon >= this.themDuocPham.SoLuong) {\n            let stt = 1;\n            let idNew = 1;\n            if (this.dataSourcedanhsachThuoc.data.length > 0) {\n                stt = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].STT + 1;\n                idNew = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].Id + 1;\n            }\n\n            let count = this.themDuocPham.SoLuong;\n            let tamp = this.lstthongTinDonThuoc;\n            if (this.lstDonThuocMoiThem != undefined || this.lstDonThuocMoiThem != null) {\n\n                for (let jisoo = 0; jisoo < this.lstDonThuocMoiThem.length; jisoo++) {\n                    for (let jihoo = 0; jihoo < this.lstthongTinDonThuoc.length; jihoo++) {\n                        if (this.lstDonThuocMoiThem[jisoo].Solo == this.lstthongTinDonThuoc[jihoo].Solo) {\n                            this.lstthongTinDonThuoc[jihoo].SoLuongTon = this.lstthongTinDonThuoc[jihoo].SoLuongTon - this.lstDonThuocMoiThem[jisoo].SoLuongMua;\n                            tamp = this.lstthongTinDonThuoc;\n                        }\n                    }\n                }\n            }\n            console.log(\"lusc them :\", this.lstthongTinDonThuoc)\n            for (let index = 0; index < tamp.length; index++) {\n                if (tamp[index].SoLuongTon > 0) {\n                    if (count != 0) {\n                        let item = new ThongTinDuocPham();\n                        if (count <= this.lstthongTinDonThuoc[index].SoLuongTon) {\n                            item = Object.assign({}, this.lstthongTinDonThuoc[index]);\n                            item.SoLuongMua = count;\n                            item.STT = stt;\n                            item.Id = idNew;\n                            item.CheckedDefault = true;\n                            item.isNew = true;\n                            item.BacSiKeToa = \"Nhà Thuốc\";\n                            item.ThanhTien = item.SoLuongMua * item.DonGia;\n                            item.LoaiDuocPhamHoacVatTu1 = item.LoaiDuocPhamHoacVatTu;\n                            this.lstDonThuocMoiThem.push(item);\n                            this.lstthongTinDonThuoc[index].SoLuongTon = this.lstthongTinDonThuoc[index].SoLuongTon - count;\n                            this.dataSourcedanhsachThuoc.data.push(item);\n                            this.duocPhamCombobox.focusManual();\n                            count = 0;\n                        } else {\n                            item = Object.assign({}, this.lstthongTinDonThuoc[index]);\n                            item.SoLuongMua = this.lstthongTinDonThuoc[index].SoLuongTon;\n                            item.ThanhTien = item.SoLuongMua * item.DonGia\n                            item.STT = stt;\n                            item.Id = idNew;\n                            item.isNew = true;\n                            item.CheckedDefault = true;\n                            item.BacSiKeToa = \"Nhà Thuốc\";\n                            item.LoaiDuocPhamHoacVatTu1 = item.LoaiDuocPhamHoacVatTu;\n                            count = count - this.lstthongTinDonThuoc[index].SoLuongTon;\n                            this.lstDonThuocMoiThem.push(item);\n                            this.dataSourcedanhsachThuoc.data.push(item);\n                            this.duocPhamCombobox.focusManual();\n                            this.lstthongTinDonThuoc.splice(index, 1)\n                            index = -1;\n                        }\n                        this.gridDanhSachMuaThuoc.setSelectCheckbox(idNew);\n                        idNew++;\n                        stt++;\n                    } else {\n                        break;\n                    }\n                }\n\n            }\n\n            if (this.lstDonThuocMoiThem.length > 0) {\n                this.lstDonThuocMoiThem.forEach(x => {\n                    if (x.DuocPhamId == this.themDuocPham.DuocPhamId) {\n                        soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                    }\n                });\n            }\n\n            this.themDuocPham.SoLuongTon = this.themDuocPham.SoLuongTon - this.themDuocPham.SoLuong;\n            this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n            this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n            // if (this.thongtinDonThuoc.HinhThucThanhToan.length == 1 && this.thongtinDonThuoc.HinhThucThanhToan[0] == 1) {\n            //     this.thongtinDonThuoc.TienMat = this.tongTien;\n            // }\n\n            let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n            if (items != null && items.length > 0) {\n                this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n            }\n\n            this.themDuocPham = new ThemDuocPham();\n        } else {\n            this.notificationService.showError(\"Số lượng bạn nhập lớn hơn số lượng tồn\");\n        }\n\n       \n        this.danhSachXemTruocBangKeThuocVaVatTu(this.dataSourcedanhsachThuoc.data);\n    }\n\n    danhSachXemTruocBangKeThuocVaVatTu(danhSachChuaThanhToans: any) {\n        // lý do trả về danhSachChuaThanhToan cho quay-thuoc-mua-thuoc.component\n        // để xem trước bảng kê\n        this.danhSachChuaThanhToan.emit(danhSachChuaThanhToans);\n    }\n\n    getDonThuocChiTietCu() {\n        let toaThuocCuId: string[] = [];\n        if (typeof (this.donThuocId.ToaThuoc) == 'string') {\n            toaThuocCuId.push(this.donThuocId.ToaThuoc);\n        } else {\n            this.donThuocId.ToaThuoc.forEach(element => {\n                toaThuocCuId.push(element)\n            });\n        }\n        this.apiService.post<any>(\"QuayThuoc/GetDonthuocChiTietCu\", { ToaThuoc: toaThuocCuId }).subscribe(\n            resultData => {\n\n                this.validationThuocErrors = [];\n                let soLuongDaMua = 0;\n                if (this.lstDonThuocMoiThem.length > 0) {\n                    this.lstDonThuocMoiThem.forEach(x => {\n                        if (x.DuocPhamId == this.themDuocPham.DuocPhamId) {\n                            soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                        }\n                    });\n                }\n                if (this.themDuocPham.SoLuongTon >= this.themDuocPham.SoLuong) {\n                    let stt = 1;\n                    let idNew = 1;\n                    if (this.dataSourcedanhsachThuoc.data.length > 0) {\n                        stt = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].STT + 1;\n                        idNew = this.dataSourcedanhsachThuoc.data[this.dataSourcedanhsachThuoc.data.length - 1].Id + 1;\n                    }\n\n\n                    for (let index = 0; index < resultData.length; index++) {\n                        let count = this.themDuocPham.SoLuong;\n                        if (count != 0) {\n                            let item = new ThongTinDuocPham();\n                            if (count <= resultData[index].SoLuongTon) {\n                                item = Object.assign({}, resultData[index]);\n                                count = item.SoLuongMua;\n                                item.STT = stt;\n                                item.Id = idNew;\n                                item.CheckedDefault = true;\n                                item.isNew = true;\n                                item.BacSiKeToa = \"Nhà Thuốc\";\n                                item.ThanhTien = item.SoLuongMua * item.DonGia\n                                this.lstDonThuocMoiThem.push(item);\n                                resultData[index].SoLuongTon = resultData[index].SoLuongTon - count;\n                                this.dataSourcedanhsachThuoc.data.push(item);\n                                count = 0;\n                            } else {\n                                item = Object.assign({}, this.lstthongTinDonThuoc[index]);\n                                item.SoLuongMua = resultData[index].SoLuongTon;\n                                item.ThanhTien = item.SoLuongMua * item.DonGia\n                                item.STT = stt;\n                                item.Id = idNew;\n                                item.isNew = true;\n                                item.CheckedDefault = true;\n                                item.BacSiKeToa = \"Nhà Thuốc\";\n                                count = count - resultData[index].SoLuongTon;\n                                this.lstDonThuocMoiThem.push(item);\n                                this.dataSourcedanhsachThuoc.data.push(item);\n                                resultData.splice(index, 1)\n                                index = -1;\n                            }\n                            this.gridDanhSachMuaThuoc.setSelectCheckbox(idNew);\n                            idNew++;\n                            stt++;\n                        } else {\n                            break;\n                        }\n                    }\n\n                    if (this.lstDonThuocMoiThem.length > 0) {\n                        this.lstDonThuocMoiThem.forEach(x => {\n                            if (x.DuocPhamId == this.themDuocPham.DuocPhamId) {\n                                soLuongDaMua = soLuongDaMua + x.SoLuongMua;\n                            }\n                        });\n                    }\n\n                    this.themDuocPham.SoLuongTon = this.themDuocPham.SoLuongTon - this.themDuocPham.SoLuong;\n                    this.tongTien = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0) + 0.0000001);\n                    this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n                    if (this.thongtinDonThuoc.HinhThucThanhToan.length == 1 && this.thongtinDonThuoc.HinhThucThanhToan[0] == 1) {\n                        this.thongtinDonThuoc.TienMat = this.tongTien;\n                    }\n                    this.themDuocPham = new ThemDuocPham();\n                } else {\n                    this.notificationService.showError(\"Số lượng bạn nhập lớn hơn số lượng tồn\");\n                }\n                // });\n            },\n            () => { });\n    }\n\n    reset() {\n        this.thongtinDonThuoc.HinhThucThanhToan = [1];\n        this.thongtinDonThuoc.TienMat = null;\n        this.thongtinDonThuoc.BenhNhanDua = null;\n        this.thongtinDonThuoc.TienTraLai = null;\n        this.thongtinDonThuoc.NgayThu = new Date();\n        this.thongtinDonThuoc.NoiDungThu = \"Thu tiền thuốc\";\n    }\n\n    onKeyEnterAddItem(event: any) {\n        if (event.key == \"Enter\" && !this.isSelectingItem) {\n            if (this.isSelectingItem != true) {\n\n                this.them1();\n            }\n            else {\n                this.isSelectingItem = false;\n            }\n        }\n    }\n\n    openCombobox(event: any) {\n        if (event) {\n            this.isSelectingItem = true;\n        }\n        else {\n            this.isSelectingItem = false;\n        }\n    }\n\n    onKey(event: any) {\n        if (event.key == \"Enter\" && !this.isSelectingItem) {\n            if (this.isSelectingItem != true) {\n                this.them1();\n            }\n            else {\n                this.isSelectingItem = false;\n            }\n        }\n    }\n\n    modelChangeSoLuongMua(ev: any, dsQuayThuocs: any) {\n        // tslint:disable-next-line: prefer-for-of\n        for (let index = 0; index < this.dataSourcedanhsachThuoc.data.length; index++) {\n            if (this.dataSourcedanhsachThuoc.data[index].CheckedDefault === true) {\n                if (this.dataSourcedanhsachThuoc.data[index].Id === dsQuayThuocs.Id) {\n                    this.dataSourcedanhsachThuoc.data[index].SoTienMG = 0;\n                    this.dataSourcedanhsachThuoc.data[index].ThanhTien = ev * this.dataSourcedanhsachThuoc.data[index].DonGia;\n                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan = this.dataSourcedanhsachThuoc.data[index].ThanhTien;\n                    if (this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus != null) {\n                        if (this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.length > 0) {\n                            // tslint:disable-next-line: prefer-for-of\n                            for (let i = 0; i < this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus.length; i++) {\n                                this.dataSourcedanhsachThuoc.data[index].DanhSachCongNoChoThus[i].SoTienCongNoChoThu = 0;\n                                this.dataSourcedanhsachThuoc.data[index].KiemTraTienSoTienItemDichVu =\n                                    this.dataSourcedanhsachThuoc.data[index].BNConPhaiThanhToan < 0 ? true : false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this.tongTienGrid = Math.round(this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0) + 0.0000001);\n        this.tongTien = this.tongTienGrid;\n        this.tongTienHienThi = this.dataSourcedanhsachThuoc.data.reduce((sum, item) => sum + item.ThanhTien, 0);\n\n        // if (this.thongtinDonThuoc.HinhThucThanhToan.indexOf(1) >= 0) {\n        //     this.thongtinDonThuoc.TienMat = this.tongTien;\n        // }\n\n        let items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n        if (items != null && items.length > 0) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n\n        this.danhSachXemTruocBangKeThuocVaVatTu(this.dataSourcedanhsachThuoc.data);\n    }\n\n    bindHinhThucThanhToanChangeGrid(item: any) {\n        this.validationErrors = [];\n        this.cdRef.detectChanges();\n\n        this.clearHinhThucThanhToan();\n        this.defeautSoTien();\n\n        switch (item) {\n            case 1:\n                this.thongtinDonThuoc.TienMat = this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                this.flagCheckSeletedTienMat = true;\n                if (this.thongtinDonThuoc.TienMat < 0) {\n                    this.thongtinDonThuoc.TienMat = 0;\n                }\n                break;\n            case 2:\n                this.thongtinDonThuoc.ChuyenKhoan = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                this.flagCheckSeletedChuyenKhoan = true;\n                if (this.thongtinDonThuoc.ChuyenKhoan < 0) {\n                    this.thongtinDonThuoc.ChuyenKhoan = 0;\n                }\n                break;\n            case 3:\n                this.thongtinDonThuoc.POS = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.SoTienCongNo;\n                this.flagCheckSeletedPos = true;\n                if (this.thongtinDonThuoc.POS < 0) {\n                    this.thongtinDonThuoc.POS = 0;\n                }\n                break;\n            case 4:\n                this.thongtinDonThuoc.SoTienCongNo = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS;\n                this.flagCheckSeletedSoTienCongNo = true;\n                if (this.thongtinDonThuoc.SoTienCongNo < 0) {\n                    this.thongtinDonThuoc.SoTienCongNo = 0;\n                }\n                break;\n        }\n    }\n\n    defeautSoTien() {\n        this.thongtinDonThuoc.TienMat = 0;\n        this.thongtinDonThuoc.POS = 0;\n        this.thongtinDonThuoc.SoTienCongNo = 0;\n        this.thongtinDonThuoc.ChuyenKhoan = 0;\n        this.thongtinDonThuoc.BenhNhanDua = 0;\n        this.thongtinDonThuoc.TienTraLai = 0;\n    }\n\n    tinhTienChoPhuongThucThanhToan(item: any) {\n        switch (item) {\n            case 1:\n                this.thongtinDonThuoc.TienMat = this.tongTien - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.TienMat < 0) {\n                    this.thongtinDonThuoc.TienMat = 0;\n                }\n                break;\n            case 2:\n                this.thongtinDonThuoc.ChuyenKhoan = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.POS - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.ChuyenKhoan < 0) {\n                    this.thongtinDonThuoc.ChuyenKhoan = 0;\n                }\n                break;\n            case 3:\n                this.thongtinDonThuoc.POS = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.SoTienCongNo;\n                if (this.thongtinDonThuoc.POS < 0) {\n                    this.thongtinDonThuoc.POS = 0;\n                }\n                break;\n            case 4:\n                this.thongtinDonThuoc.SoTienCongNo = this.tongTien - this.thongtinDonThuoc.TienMat - this.thongtinDonThuoc.ChuyenKhoan - this.thongtinDonThuoc.POS;\n                if (this.thongtinDonThuoc.SoTienCongNo < 0) {\n                    this.thongtinDonThuoc.SoTienCongNo = 0;\n                }\n                break;\n        }\n    }\n\n    ChangeHinhThucThanhToan(event: any) {\n        this.validationErrors = [];\n        this.cdRef.detectChanges();\n\n        this.clearHinhThucThanhToan();\n        this.defeautSoTien();\n        this.showCanhBaoSoTienNhap = false;\n\n        var items = this.hinhThucThanhToan.filter((item) => item.Selected == true);\n\n        if (items != null && items.length === 1) {\n            this.tinhTienChoPhuongThucThanhToan(items[0].KeyId);\n        }\n\n        event.forEach((element) => {\n            switch (element) {\n                case 1:\n                    this.flagCheckSeletedTienMat = true;\n                    break;\n                case 2:\n                    this.flagCheckSeletedChuyenKhoan = true;\n                    break;\n                case 3:\n                    this.flagCheckSeletedPos = true;\n                    break;\n                case 4:\n                    this.flagCheckSeletedSoTienCongNo = true;\n                    break;\n            }\n        });\n\n        this.hinhThucThanhToan.forEach(item => { item.Change = false; });\n        this.hinhThucThanhToan.forEach(item => {\n            if (event.filter(o => o == item.KeyId).length > 0) {\n                item.Selected = true;\n                if (event.length == 1) {\n                    switch (item.KeyId) {\n                        case 1:\n                            this.thongtinDonThuoc.TienMat = this.tongTien;\n                            break;\n                        case 2:\n                            this.thongtinDonThuoc.ChuyenKhoan = this.tongTien;\n                            break;\n                        case 3:\n                            this.thongtinDonThuoc.POS = this.tongTien;\n                            break;\n                        case 4:\n                            this.thongtinDonThuoc.SoTienCongNo = this.tongTien;\n                            break;\n                    }\n                }\n            }\n            else {\n                item.Selected = false;\n            }\n        });\n\n        this.cdRef.detectChanges();\n    }\n    showPopupLoadingIn() {\n        this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '250px',\n            height: '90px',\n            data: { Title: 'Đang loading...' },\n        });\n    }\n\n    closePopupLoadingData() {\n        this.dialog.closeAll();\n    }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktY2hvLXh1YXQtdGh1b2MvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS1jaG8teHVhdC10aHVvYy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit,Input } from '@angular/core';\nimport { danhSachThuoc } from '../quay-thuoc.model';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { ConfirmComponent } from 'src/app/shared/component/dialogs/confirm/confirm.component';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MatDialog } from '@angular/material';\nimport { NotificationService } from 'src/app/core/services/notification.service';\n\n@Component({\n    selector: 'app-quay-thuoc-khach-vang-lai-cho-xuat-thuoc',\n    templateUrl: './quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component.html',\n    styleUrls: ['./quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component.scss']\n})\nexport class QuayThuocKhachVangLaiChoXuatThuocComponent implements OnInit {\n    gridColumns: any[] = [];\n    danhSachThuoc: danhSachThuoc;\n    dataSourcedanhsachThuoc: any = {\n        data: [],\n        total: 0\n    }  \n    @Input() ttCheck: number;\n    @Input() ThongTinBenhNhanDaThuTienData : any;\n    constructor(private route: ActivatedRoute, private dialog: MatDialog, private apiService: ApiService, private router: Router, private notificationService: NotificationService) { }\n\n    ngOnInit() {\n        \n     \n        this.danhSachThuoc = new danhSachThuoc();\n        this.gridColumns = [\n            { Field: \"TenDuocPham\", Title: \"Tên thuốc\", MinWidth: 120, Sortable: false },\n            { Field: \"MaHoatChat\", Title: \"Hoạt chất\", Width: 120, Sortable: false },\n            { Field: \"DonViTinh\", Title: \"ĐVT\", Width: 60, Sortable: false },\n            { Field: \"ViTri\", Title: \"Vị trí\", Width: 120, Sortable: false },\n            { Field: \"SoLuongMua\", Title: \"Số lượng\", Width: 120, Sortable: false },\n            { Field: \"HanSuDungHientThi\", Title: \"Hạn sử dụng\", Width: 120, Sortable: false }\n        ];\n        if(this.ThongTinBenhNhanDaThuTienData != undefined)\n        {\n            this.apiService.post<Array<any>>(\"QuayThuoc/GetDanhSachXuatThuocKhongBHYT?tiepNhanId=\" + this.ThongTinBenhNhanDaThuTienData.YeuCauTiepNhanId).subscribe(\n                resultData => {\n                    this.dataSourcedanhsachThuoc.data = resultData;\n                });\n        }\n        else{\n            this.dataSourcedanhsachThuoc.data = [];\n        }\n        \n    }\n    ngOnChanges(event: any){\n        this.ngOnInit();\n    }\n    GuiData() {\n         this.danhSachThuoc.Id = this.ThongTinBenhNhanDaThuTienData.YeuCauTiepNhanId;\n        this.dialog.open(ConfirmComponent, {\n            disableClose: false,\n            width: '400px',\n            data: { Title: \"Xác nhận\", Message: \"Bạn chắc chắn muốn xuất đơn thuốc này?\" }\n        }).afterClosed().subscribe(result => {/* result is a string:Yes,No,No answer*/\n            if (result == \"Yes\") {\n                this.apiService.post<any>(\"QuayThuoc/XuatDonThuocBHYT\", this.danhSachThuoc).subscribe(\n                    resultData => {\n                        if (resultData != null && resultData != undefined && resultData != \"\") {\n                            this.notificationService.showError(resultData);\n                        } else {\n                            if (this.ttCheck == 1) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n                            }\n                            if (this.ttCheck == 2) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n                            }\n                            if (this.ttCheck == 3) {\n                                this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n                            }\n                        }\n\n\n                    },\n                    (err: any) => {\n\n                    });\n            }\n        });\n    }\n}\n","export default \"fieldset {\\n  display: block;\\n  margin-left: 2px;\\n  margin-right: 2px;\\n  padding-top: 0.35em;\\n  padding-bottom: 0.625em;\\n  padding-left: 0.75em;\\n  padding-right: 0.75em;\\n  border: 1px #e0e0e0;\\n  border-style: inherit;\\n}\\n\\nfieldset .item_right {\\n  text-align: right !important;\\n  float: right;\\n}\\n\\nfieldset ul > li {\\n  padding-right: 15px !important;\\n}\\n\\nfieldset ul.inline > li {\\n  display: inline-block !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS10aG9uZy10aW4taGFuaC1jaGluaC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHF1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktdGhvbmctdGluLWhhbmgtY2hpbmhcXHF1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktdGhvbmctdGluLWhhbmgtY2hpbmguY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWktdGhvbmctdGluLWhhbmgtY2hpbmgvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS10aG9uZy10aW4taGFuaC1jaGluaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLG9CQUFBO0VBQ0EscUJBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0QkFBQTtFQUNBLFlBQUE7QUNDRjs7QURFQTtFQUNFLDhCQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQ0FBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS10aG9uZy10aW4taGFuaC1jaGluaC9xdWF5LXRodW9jLWtoYWNoLXZhbmctbGFpLXRob25nLXRpbi1oYW5oLWNoaW5oLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZmllbGRzZXQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IDJweDtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIHBhZGRpbmctdG9wOiAwLjM1ZW07XG4gIHBhZGRpbmctYm90dG9tOiAwLjYyNWVtO1xuICBwYWRkaW5nLWxlZnQ6IDAuNzVlbTtcbiAgcGFkZGluZy1yaWdodDogMC43NWVtO1xuICBib3JkZXI6IDFweCAjZTBlMGUwO1xuICBib3JkZXItc3R5bGU6IGluaGVyaXQ7XG59XG5cbmZpZWxkc2V0IC5pdGVtX3JpZ2h0IHtcbiAgdGV4dC1hbGlnbjogcmlnaHQgIWltcG9ydGFudDtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG5maWVsZHNldCB1bCA+IGxpIHtcbiAgcGFkZGluZy1yaWdodDogMTVweCAhaW1wb3J0YW50O1xufVxuXG5maWVsZHNldCB1bC5pbmxpbmUgPiBsaSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O1xufSIsImZpZWxkc2V0IHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiAycHg7XG4gIG1hcmdpbi1yaWdodDogMnB4O1xuICBwYWRkaW5nLXRvcDogMC4zNWVtO1xuICBwYWRkaW5nLWJvdHRvbTogMC42MjVlbTtcbiAgcGFkZGluZy1sZWZ0OiAwLjc1ZW07XG4gIHBhZGRpbmctcmlnaHQ6IDAuNzVlbTtcbiAgYm9yZGVyOiAxcHggI2UwZTBlMDtcbiAgYm9yZGVyLXN0eWxlOiBpbmhlcml0O1xufVxuXG5maWVsZHNldCAuaXRlbV9yaWdodCB7XG4gIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7XG4gIGZsb2F0OiByaWdodDtcbn1cblxuZmllbGRzZXQgdWwgPiBsaSB7XG4gIHBhZGRpbmctcmlnaHQ6IDE1cHggIWltcG9ydGFudDtcbn1cblxuZmllbGRzZXQgdWwuaW5saW5lID4gbGkge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcbn0iXX0= */\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { KhachVangLai, ServiceId,BenhNhanThongTin,TinhHuyenTemplateVo } from '../quay-thuoc.model';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { LookupQueryInfo } from 'src/app/shared/models/common.model';\n@Component({\n    selector: 'app-quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh',\n    templateUrl: './quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component.html',\n    styleUrls: ['./quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component.scss']\n})\n\nexport class QuayThuocKhachVangLaiThongTinHanhChinhComponent implements OnInit {\n    thongTinBenhNhan = {} as KhachVangLai;\n    @Input() validationErrors: any;\n    @Output() valueChange: EventEmitter<any> = new EventEmitter<any>();\n    @Input() donThuocId: ServiceId;\n    @Input() MaBN: number;\n    @Input() TenBenhNhan: string;\n    @Input() SDT: string;\n    @Input() ThongTinBenhNhanDaThuTienData : any;\n    data = {} as BenhNhanThongTin;\n    constructor(private apiService: ApiService) { }\n\n    ngOnInit() {\n        let maBN = this.donThuocId.maBN;\n        if(this.MaBN != null)\n        {\n            maBN = this.MaBN;\n        }\n        else{\n            this.data = null;\n\n        }\n        if (maBN != null) {\n            this.GetThongTinBenhNhan(maBN);\n        }\n        else{\n            this.data = null;\n\n        }\n        if(this.data == null)\n        {\n            if(this.TenBenhNhan != null || this.SDT != null)\n            {\n                this.thongTinBenhNhan.HoTen = this.TenBenhNhan;\n            }\n            if( this.SDT != null)\n            {\n                this.thongTinBenhNhan.SoDienThoai = this.SDT;\n            }\n        }\n        if(this.ThongTinBenhNhanDaThuTienData != undefined){\n            this.GetThongTinBenhNhanTN(this.ThongTinBenhNhanDaThuTienData.YeuCauTiepNhanId);\n        }\n    }\n    ngOnChanges(event: any){\n        this.ngOnInit();\n    }\n    GetThongTinBenhNhan(maBN: number) {\n        this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhan1?maBN=\" + maBN).subscribe(\n            resultData => {\n                this.data = resultData;\n                console.log(resultData);\n            },\n            () => {\n                console.log(\"Loi roi\")\n            });\n    }\n    GetThongTinBenhNhanTN(maTN: number) {\n        this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhanTN?maTN=\" + maTN).subscribe(\n            resultData => {\n                this.data = resultData;\n                console.log(resultData);\n            },\n            () => {\n                console.log(\"Loi roi\")\n            });\n    }\n    TinhThanhPhoChange(tinhThanh: any) {\n        this.thongTinBenhNhan.TinhThanhId = tinhThanh;\n        this.valueChange.emit(this.thongTinBenhNhan);\n        if(this.thongTinBenhNhan.TinhThanhId == null)\n        {\n            this.thongTinBenhNhan.QuanHuyenId =null;\n            this.thongTinBenhNhan.TinhThanhId = null;\n            this.thongTinBenhNhan.PhuongXaId = null;\n            this.thongTinBenhNhan.TenHuyenDisplay = null;\n            this.thongTinBenhNhan.TenTinhDisplay = null;\n            this.thongTinBenhNhan.TenPhuongDisplay = null;\n        }\n    }\n\n    QuanHuyenChange(quanHuyen: any) {\n        this.thongTinBenhNhan.QuanHuyenId = quanHuyen;\n        if(this.thongTinBenhNhan.QuanHuyenId == null)\n        {\n            this.thongTinBenhNhan.QuanHuyenId =null;\n            this.thongTinBenhNhan.TinhThanhId = null;\n            this.thongTinBenhNhan.PhuongXaId = null;\n            this.thongTinBenhNhan.TenHuyenDisplay = null;\n            this.thongTinBenhNhan.TenTinhDisplay = null;\n            this.thongTinBenhNhan.TenPhuongDisplay = null;\n        }\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    PhuongXaChange(phuongXa: any) {\n        this.thongTinBenhNhan.PhuongXaId = phuongXa;\n        if(this.thongTinBenhNhan.PhuongXaId != null)\n        {\n            this.apiService.post<TinhHuyenTemplateVo>(\"QuayThuoc/GetTinhHuyen?phuongXaId=\" + phuongXa).subscribe(\n                resultData => {\n                    this.thongTinBenhNhan.QuanHuyenId = resultData[0].HuyenId;\n                    this.thongTinBenhNhan.TinhThanhId = resultData[0].TinhId;\n                    this.thongTinBenhNhan.TenHuyenDisplay = resultData[0].TenHuyen;\n                    this.thongTinBenhNhan.TenTinhDisplay = resultData[0].TenTinh;\n                    this.thongTinBenhNhan.PhuongXaId = phuongXa\n                },\n                () => {\n                    console.log(\"Loi roi\")\n                });\n        }\n        else{\n                    this.thongTinBenhNhan.QuanHuyenId =0;\n                    this.thongTinBenhNhan.TinhThanhId = 0;\n                    this.thongTinBenhNhan.TenHuyenDisplay = null;\n                    this.thongTinBenhNhan.TenTinhDisplay = null;\n        }\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    onSaveTen() {\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    onSaveSDT(sdt: any) {\n        this.thongTinBenhNhan.SoDienThoai = sdt;\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    onSaveGioiTinh(gioiTinh: any) {\n        this.thongTinBenhNhan.GioiTinh = gioiTinh;\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    onSaveNamSinh(namSinh: any) {\n        this.thongTinBenhNhan.NamSinh = namSinh;\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n\n    onSaveDiaChi(diaChi: any) {\n        this.thongTinBenhNhan.DiaChi = diaChi;\n        this.valueChange.emit(this.thongTinBenhNhan);\n    }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2Mta2hhY2gtdmFuZy1sYWkvcXVheS10aHVvYy1raGFjaC12YW5nLWxhaS5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, HostListener, ViewChild } from '@angular/core';\nimport { ThongTinDonThuoc, KhachVangLai, XemTruocBangKeThuoc } from '../quay-thuoc.model';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TabStripComponent } from '@progress/kendo-angular-layout';\nimport { QuayThuocKhachVangLaiChoThanhToanComponent } from '../quay-thuoc-khach-vang-lai-cho-thanh-toan/quay-thuoc-khach-vang-lai-cho-thanh-toan.component';\nimport { MatDialog } from '@angular/material';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { NotificationService } from 'src/app/core/services/notification.service';\n\n@Component({\n    selector: 'app-quay-thuoc-khach-vang-lai',\n    templateUrl: './quay-thuoc-khach-vang-lai.component.html',\n    styleUrls: ['./quay-thuoc-khach-vang-lai.component.scss']\n})\n\nexport class QuayThuocKhachVangLaiComponent implements OnInit {\n    thongTinBenhNhan: KhachVangLai;\n    kendoTabSelected = 1;\n    validationErrorForThongTin: any;\n    donThuocIds: any;\n    MaBN: number;\n    SDT: string;\n    TenBenhNhan: string;\n    ttCheck: number;\n    ThongTinBenhNhanDaThuTien: any;\n    yctnId: number = 0;\n    benhNhanId: number = 0;\n    trangThai: number = 0;\n    @ViewChild('tabVangLai', { static: true }) tabVangLai: TabStripComponent;\n    flagAllowLoadThuoc: boolean = true;\n    xemTruocBangKeThuoc: XemTruocBangKeThuoc = new XemTruocBangKeThuoc();\n\n    tabIndex: number = 0;\n    @ViewChild(QuayThuocKhachVangLaiChoThanhToanComponent, { static: false }) quayThuocHinhThucThanhToan;\n\n    constructor(private route: ActivatedRoute,\n        private notificationService: NotificationService,\n        private router: Router, private dialog: MatDialog,\n        private apiService: ApiService,) { }\n\n    ngOnInit() {\n        this.route\n            .queryParams\n            .subscribe(v => {\n                this.donThuocIds = v;\n            });\n        this.route.queryParams.subscribe(params => {\n            this.ttCheck = params.page;\n        });\n        if (this.ttCheck == undefined) {\n            this.route.queryParams.subscribe(params => {\n                this.ttCheck = params.ttCheck;\n            });\n        }\n        this.route.queryParams.subscribe(params => {\n            this.MaBN = params.MaBN;\n        });\n        this.route.queryParams.subscribe(params => {\n            this.TenBenhNhan = params.TenBenhNhan;\n        });\n        this.route.queryParams.subscribe(params => {\n            this.SDT = params.SDT;\n        });\n    }\n\n\n    onTabSelect(event: any) {\n        this.tabIndex = event.index;\n        if (event.index == 1) {\n            this.flagAllowLoadThuoc = false;\n        } else {\n            this.flagAllowLoadThuoc = true;\n        }\n    }\n\n    Huy() {\n        this.route.queryParams.subscribe(v => {\n            if (v.page != null) {\n                this.ttCheck = v.page;\n            }\n        });\n        this.route.queryParams.subscribe(v => {\n            if (v.ttCheck != null) {\n                this.ttCheck = v.ttCheck;\n            }\n        });\n        if (this.ttCheck == 1) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n        }\n        if (this.ttCheck == 2) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n        }\n        if (this.ttCheck == 3) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n        }\n        if (this.ttCheck == 0) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttCheck } });\n        }\n    }\n    switchValueChanges(data: any) {\n        this.thongTinBenhNhan = data;\n    }\n\n    switchValueChangesChoThanhToan(data: any) {\n        this.validationErrorForThongTin = data;\n    }\n\n    changeTab(event) {\n        this.trangThai = event;\n\n    }\n\n    MaTiepNhanBenhNhanDaThuTien(event) {\n        this.ThongTinBenhNhanDaThuTien = event;\n        if (this.ThongTinBenhNhanDaThuTien != undefined) {\n            this.yctnId = event.YeuCauTiepNhanId;\n            this.benhNhanId = event.BenhNhanId;\n            if (this.trangThai == 1) {\n                this.router.navigate(['nha-thuoc/mua-thuoc/' + this.yctnId + '/' + this.benhNhanId + '/' + this.trangThai + '/' + this.ttCheck]);\n            }\n            else {\n                this.router.navigate(['nha-thuoc/mua-thuoc/' + this.yctnId + '/' + this.benhNhanId + '/' + this.trangThai + '/' + this.ttCheck]);\n            }\n            this.ngOnInit();\n        }\n    }\n\n    danhSachChuaThanhToan(data: any[]) {       \n        this.xemTruocBangKeThuoc.DanhSachDonThuocs = data;\n    }\n\n    inXemTruocBangKeThuoc() {        \n        \n        this.showPopupLoadingIn();\n        this.xemTruocBangKeThuoc.Hosting = window.location.protocol + '//' + window.location.host;\n        this.xemTruocBangKeThuoc.YeuCauTiepNhanId = this.route.snapshot.params.id;\n\n        if (this.xemTruocBangKeThuoc.DanhSachDonThuocs === undefined &&\n            this.xemTruocBangKeThuoc.DanhSachDonThuocs === null && this.xemTruocBangKeThuoc.DanhSachDonThuocs.length === 0) {\n            this.notificationService.showError(\"Không có thuốc và vật tư.\");\n            return;\n        }\n        else {\n            this.apiService.postExportPdf<any>('QuayThuoc/XemTruocBangKeThuoc', this.xemTruocBangKeThuoc).subscribe(\n                resultData => {\n                    if (resultData != undefined && resultData != null) {\n                        this.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                            disableClose: true,\n                            width: '1000px',\n                            data: { Model: resultData }\n                        }).afterClosed().subscribe(() => {\n                            this.closePopupLoadingData();\n                        });\n                    }\n                },\n                (err: ApiError) => {\n                    this.closePopupLoadingData();\n                });\n        }\n\n    }\n\n    showPopupLoadingIn() {\n        this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '250px',\n            height: '90px',\n            data: { Title: 'Đang loading...' },\n        });\n    }\n\n    closePopupLoadingData() {\n        this.dialog.closeAll();\n    }\n\n    @HostListener('document:keydown', ['$event'])\n    keyEvent(event: KeyboardEvent) {\n        if (event.keyCode == 83 && event.ctrlKey) {\n            // ctrl + s\n            if (this.tabIndex == 0) {\n                this.quayThuocHinhThucThanhToan.ThuTien();\n            }\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 112 && event.ctrlKey) {\n            // ctrl + f1\n            this.tabVangLai.selectTab(0);\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 113 && event.ctrlKey) {\n            // ctrl + f2\n            this.tabVangLai.selectTab(1);\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 27 && !event.ctrlKey) {\n            // esc\n            this.Huy();\n            event.preventDefault();\n        }\n    }\n}\n","export default \".icon-bhyt {\\n  height: 20px;\\n  top: 2px;\\n  position: absolute;\\n  right: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1saXN0L0M6XFxwcm9qZWN0XFxmcmVlbGFuY2VyXFxob3NwaXRhbC9zcmNcXGFwcFxcbW9kdWxlc1xcbWFpblxccXVheS10aHVvY1xccXVheS10aHVvYy1saXN0XFxxdWF5LXRodW9jLWxpc3QuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtbGlzdC9xdWF5LXRodW9jLWxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy1saXN0L3F1YXktdGh1b2MtbGlzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29uLWJoeXQge1xuICBoZWlnaHQ6IDIwcHg7XG4gIHRvcDogMnB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xufSIsIi5pY29uLWJoeXQge1xuICBoZWlnaHQ6IDIwcHg7XG4gIHRvcDogMnB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xufSJdfQ== */\"","import { Component, OnInit, ViewChild, TemplateRef, Input, Output, EventEmitter } from '@angular/core';\nimport icDone from '@iconify/icons-ic/done';\nimport icInfo from '@iconify/icons-ic/info';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { GridComponent } from 'src/app/shared/component/grid/grid.component';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { GroupDescriptor } from '@progress/kendo-data-query';\nimport icPrint from \"@iconify/icons-ic/twotone-print\";\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { MatDialog } from '@angular/material';\nimport { InBangThuTienPopUpComponent } from '../in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { listLazyRoutes } from '@angular/compiler/src/aot/lazy_routes';\nimport icCheck from \"@iconify/icons-ic/twotone-check\";\nimport { LocalStorageHelper } from 'src/app/core/utilities/local-storage.helper';\nimport { InDonThuocPopUpComponent } from '../in-don-thuoc-pop-up/in-don-thuoc-pop-up.component';\nimport { NguoiDungKhongMuaDonThuoc } from '../quay-thuoc.model';\nimport { SecurityOperation } from 'src/app/shared/enum/security-operation.enum';\nimport { CommonService } from 'src/app/core/utilities/common.helper';\nimport { SystemMessage } from 'src/app/shared/configdata/system-message';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { ConfirmComponent } from 'src/app/shared/component/dialogs/confirm/confirm.component';\nimport { AuthService } from 'src/app/core/services/auth.service';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\n@Component({\n  selector: 'app-quay-thuoc-list',\n  templateUrl: './quay-thuoc-list.component.html',\n  styleUrls: ['./quay-thuoc-list.component.scss']\n})\nexport class QuayThuocListComponent implements OnInit {\n  documentType: DocumentType;\n  icDone = icDone;\n  icInfo = icInfo;\n  icPrint = icPrint\n  icCheck = icCheck;\n  gridChildColumnsChoThanhToan: any[] = [];\n  gridChildColumnsDaThanhToan: any[] = [];\n  gridChildColumnsAll: any[] = [];\n  gridChild: any[] = [];\n  DieuKienLoadVaoChiTiet: boolean = false;\n  typeDanhSachThanhToan: number = 0;\n  @Input() xacNhanIn: boolean = false;\n  data: number = 0;\n  tongGiaTriDonThuoc: number;\n  @Input() id: number = null;\n  @Input() url1: string = null;\n  @Input() url2: string = null;\n  @Input() queryStringSearchUuTien: string = null;\n  @Output() OnHandleDataQuayThuocSearchList = new EventEmitter<any>();\n  @Output() OnHandleDieuKienLoadXemChiTiet = new EventEmitter<any>();\n  @ViewChild('gridD', { static: true }) gridD: GridComponent;\n  urlGetDataGridChild: string = \"QuayThuoc/GetDataForGridTimBenhNhanAsync\";\n  urlGetTotalPageGridChild: string = \"QuayThuoc/GetTotalPageForGridTimBenhNhanAsync\";\n  urlGetDataChild: string = \"QuayThuoc/GetDanhSachThuocBenhNhanChild\";\n  validationErrors: any[] = [];\n\n  constructor(private router: Router, private apiService: ApiService, private dialog: MatDialog, private route: ActivatedRoute,\n    private authService: AuthService, private notificationService: NotificationService,) { }\n  @ViewChild('actionTemplate', { static: true }) actionTemplate: TemplateRef<any>;\n  @ViewChild('TongGiaTriDonThuocTemplate', { static: true }) TongGiaTriDonThuocTemplate: TemplateRef<any>;\n  @ViewChild('SoTienChoThanhToanTemplate', { static: true }) SoTienChoThanhToanTemplate: TemplateRef<any>;\n  @ViewChild('trangThaiTemplate', { static: true }) trangThaiTemplate: TemplateRef<any>;\n  @ViewChild('nguoiDungKhongMuaThuocTemplate', { static: true }) nguoiDungKhongMuaThuocTemplate: TemplateRef<any>;\n  @ViewChild('maTNTemplate', { static: true }) maTNTemplate: TemplateRef<any>;\n  @ViewChild('templatePrint', { static: true }) templatePrint: TemplateRef<any>;\n  @ViewChild('TongCongDonThuocFooter', { static: true }) TongCongDonThuocFooter: TemplateRef<any>;\n  @ViewChild('TonggiaTriThuocFooter', { static: true }) TonggiaTriThuocFooter: TemplateRef<any>;\n  //\n  @ViewChild('gridDonThuocTrongNgay', { static: false }) gridDonThuocTrongNgay: GridComponent;\n  @ViewChild('nhomGroupHeaderTemplate', { static: true }) nhomGroupHeaderTemplate: TemplateRef<any>;\n  //\n  @ViewChild('SoTienThuoctemplate', { static: true }) SoTienThuoctemplate: TemplateRef<any>;\n  @ViewChild('TinhTrangThuoctemplate', { static: true }) TinhTrangThuoctemplate: TemplateRef<any>;\n  groups: GroupDescriptor[] = [{ field: 'LoaiDonThuoc' }];\n  ngOnInit() {\n    this.gridChildColumnsChoThanhToan = [\n      { Field: \"MaTN\", Title: \"Mã TN\", Width: 100, Sortable: true, Template: this.maTNTemplate },\n      { Field: \"MaBN\", Title: \"Mã NB\", Width: 80, Sortable: true },\n      { Field: \"HoTen\", Title: \"Họ Tên\", Width: 200, Sortable: true },\n      { Field: \"NamSinh\", Title: \"Năm sinh\", Width: 80, Sortable: true },\n      { Field: \"GioiTinhHienThi\", Title: \"Giới tính\", Width: 80, Sortable: true },\n      { Field: \"DiaChi\", Title: \"Địa chỉ\", MinWidth: 120, Sortable: true },\n      { Field: \"SoDienThoai\", Title: \"Điện thoại\", Width: 120, Sortable: true },\n      { Field: \"DoiTuong\", Title: \"Đối tượng\", Width: 120, Sortable: true },\n      { Field: \"TongGiaTriDonThuoc\", Title: \"Tổng giá trị đơn thuốc\", Width: 200, Sortable: true, Template: this.TongGiaTriDonThuocTemplate },\n      { Field: \"TrangThaiHienThiString\", Title: \"Trạng thái\", Width: 120, Sortable: false, Template: this.trangThaiTemplate },\n      { Field: \"\", Title: \"\", Width: 200, Sortable: false, Template: this.nguoiDungKhongMuaThuocTemplate },\n    ];\n    this.gridChildColumnsDaThanhToan = [\n      { Field: \"MaTN\", Title: \"Mã TN\", Width: 100, Sortable: true, Template: this.maTNTemplate },\n      { Field: \"MaBN\", Title: \"Mã NB\", Width: 80, Sortable: true },\n      { Field: \"HoTen\", Title: \"Họ Tên\", Width: 200, Sortable: true },\n      { Field: \"NamSinh\", Title: \"Năm sinh\", Width: 80, Sortable: true },\n      { Field: \"GioiTinhHienThi\", Title: \"Giới tính\", Width: 80, Sortable: true },\n      { Field: \"DiaChi\", Title: \"Địa chỉ\", MinWidth: 120, Sortable: true },\n      { Field: \"SoDienThoai\", Title: \"Điện thoại\", Width: 120, Sortable: true },\n      { Field: \"DoiTuong\", Title: \"Đối tượng\", Width: 120, Sortable: true },\n      { Field: \"TongGiaTriDonThuoc\", Title: \"Tổng giá trị đơn thuốc\", Width: 200, Sortable: true, Template: this.TongGiaTriDonThuocTemplate },\n      { Field: \"TrangThaiHienThiString\", Title: \"Trạng thái\", Width: 120, Sortable: false, Template: this.trangThaiTemplate },\n    ];\n    this.gridChildColumnsAll = [\n      { Field: \"MaTN\", Title: \"Mã TN\", Width: 100, Sortable: true, Template: this.maTNTemplate },\n      { Field: \"MaBN\", Title: \"Mã NB\", Width: 80, Sortable: true },\n      { Field: \"HoTen\", Title: \"Họ Tên\", Width: 200, Sortable: true },\n      { Field: \"NamSinh\", Title: \"Năm sinh\", Width: 80, Sortable: true },\n      { Field: \"GioiTinhHienThi\", Title: \"Giới tính\", Width: 80, Sortable: true },\n      { Field: \"DiaChi\", Title: \"Địa chỉ\", MinWidth: 120, Sortable: true },\n      { Field: \"SoDienThoai\", Title: \"Điện thoại\", Width: 120, Sortable: true },\n      { Field: \"DoiTuong\", Title: \"Đối tượng\", Width: 120, Sortable: true },\n      { Field: \"SoTienChoThanhToan\", Title: \"Số tiền chờ thanh toán\", Width: 220, Sortable: true, Template: this.SoTienChoThanhToanTemplate },\n      { Field: \"TongGiaTriDonThuoc\", Title: \"Tổng giá trị đơn thuốc\", Width: 200, Sortable: true, Template: this.TongGiaTriDonThuocTemplate },\n      { Field: \"TrangThaiHienThiString\", Title: \"Trạng thái\", Width: 120, Sortable: false, Template: this.trangThaiTemplate },\n\n    ];\n    this.gridChild = [\n      { Field: \"STT\", Title: \"#\", Width: 100, Sortable: true },\n      { Field: \"LoaiDonThuoc\", Title: \"\", Width: 200, Sortable: true, Hidden: true, TemplateGroupHeader: this.nhomGroupHeaderTemplate },\n      { Field: \"MaDon\", Title: \"Mã Đơn\", Width: 100, Sortable: true },\n      { Field: \"NgayKeDon\", Title: \"Ngày kê đơn\", Width: 200, Sortable: true },\n      { Field: \"DVKham\", Title: \"Dịch vụ khám\", minWidth: 200, Sortable: true },\n      { Field: \"BSKham\", Title: \"Bác sĩ khám\", Width: 200, Sortable: true },//,TemplateFooter: this.TonggiaTriThuocFooter},\n      { Field: \"SoTienDisPlay\", Title: \"Số tiền \", Width: 80, Sortable: true, TemplateFooter: this.TongCongDonThuocFooter, Template: this.SoTienThuoctemplate }, //TemplateFooter: this.TongCongDonThuocFooter\n      { Field: \"TinhTrang\", Title: \"Tình trạng\", Width: 120, Sortable: true, Template: this.TinhTrangThuoctemplate },\n      { Field: \"\", Title: \"\", Width: 120, Sortable: true, Template: this.templatePrint },\n    ];\n\n  }\n  Xem(event: any) {\n\n    this.router.navigate(['nha-thuoc/mua-thuoc/' + event.YeuCauTiepNhanId + '/' + event.BenhNhanId + '/' + event.TrangThai + '/' + this.typeDanhSachThanhToan]);\n  }\n  ngOnChanges(event: any) {\n    if (event.queryStringSearchUuTien != null || event.queryStringSearchUuTien != undefined) {\n      if (event.queryStringSearchUuTien.currentValue != null || event.queryStringSearchUuTien.currentValue != undefined) {\n        if (event.queryStringSearchUuTien.currentValue != null) {\n          this.gridD._additionalSearchString = event.queryStringSearchUuTien.currentValue;\n          let kiemTraDieuKienLoad = JSON.parse(event.queryStringSearchUuTien.currentValue);\n          this.typeDanhSachThanhToan = kiemTraDieuKienLoad.KiemTraThanhToan\n          if (kiemTraDieuKienLoad.DieuKienLoadVaoChiTiet != null) {\n            this.DieuKienLoadVaoChiTiet = kiemTraDieuKienLoad.DieuKienLoadVaoChiTiet;\n          }\n          this.gridD.search();\n        }\n      }\n    }\n  }\n  sortConfig = [\n    {\n      field: \"TrangThai\",\n      dir: \"asc\",\n    },\n    {\n      field: \"Id\",\n      dir: \"asc\",\n    },\n  ];\n\n  PrinAllDonThuocBenhNhan(donThuocThanhToanId: number, LoaiDonThuoc: any, YeuCauKhambenhId: any) {\n    var data = {\n      LoaiDonThuoc: LoaiDonThuoc,\n      YeuCauKhambenhId: YeuCauKhambenhId,\n      Hosting: null,\n      TiepNhanId: donThuocThanhToanId\n    }\n    if (window.location.protocol == \"http:\") {\n      data.Hosting = \"http://\" + window.location.host;\n    } else {\n      data.Hosting = \"https://\" + window.location.host;\n    }\n\n    this.apiService.post<any>(\"QuayThuoc/InThuocBenhNhan\", data).subscribe(\n      resultData => {\n        let dialogRef = this.dialog.open(InDonThuocPopUpComponent, {\n          width: '1000px',\n          data: { Model: resultData, InDonThuocDanhSachList: false, InBangKe: true, InPhieuThu: false }\n        }).afterClosed().subscribe(() => { });\n      }, () => { });\n  }\n  onDataBound(data: any) {\n    this.OnHandleDieuKienLoadXemChiTiet.emit(true);\n    this.OnHandleDataQuayThuocSearchList.emit(data);\n  }\n\n  nguoiBenhKhongMuaThuoc(dataItem: any) {   \n    var self = this;\n    const yeuCauTiepNhanId: number = dataItem.Id;\n    var nguoiDungKhongMuaDonThuoc = new NguoiDungKhongMuaDonThuoc();\n    nguoiDungKhongMuaDonThuoc.YeuCauTiepNhanId = yeuCauTiepNhanId;\n    self.dialog.open(ConfirmComponent, {\n      disableClose: false,\n      width: '400px',\n      data: { Title: \"Xác nhận\", Message: \"Người bệnh không muốn mua thuốc này?\" }\n    }).afterClosed().subscribe(result => {\n      if (result == \"Yes\") {\n        self.apiService.post(\"QuayThuoc/NguoiBenhKhongMuaDonThuoc\", nguoiDungKhongMuaDonThuoc).subscribe(\n          () => {\n            self.notificationService.showSuccess(CommonService.format(SystemMessage.ActionSuccessfully, [\"Xóa\"]));\n            this.gridD.search();\n          },\n          (err: ApiError) => {\n            self.validationErrors = err.ValidationErrors;\n            if (err.Message != \"Validation Failed\") {\n              self.notificationService.showError(err.Message);\n            }\n          });\n      }\n    });\n  }\n}\n\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtbXVhLXRodW9jL3F1YXktdGh1b2MtbXVhLXRodW9jLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, ChangeDetectorRef, ViewChild, HostListener } from '@angular/core';\nimport { BenhNhanThongTin, ThongTinDonThuoc, ThongTinDuocPham, XemTruocBangKeThuoc } from '../quay-thuoc.model';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { TabStripComponent } from '@progress/kendo-angular-layout';\nimport { QuayThuocHinhThucThanhToanComponent } from '../quay-thuoc-hinh-thuc-thanh-toan/quay-thuoc-hinh-thuc-thanh-toan.component';\nimport { MatDialog } from '@angular/material';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { NotificationService } from 'src/app/core/services/notification.service';\n\n@Component({\n    selector: 'app-quay-thuoc-mua-thuoc',\n    templateUrl: './quay-thuoc-mua-thuoc.component.html',\n    styleUrls: ['./quay-thuoc-mua-thuoc.component.scss']\n})\n\nexport class QuayThuocMuaThuocComponent implements OnInit {\n    tt: number = this.route.snapshot.params.tt;\n    ttcheck: number = this.route.snapshot.params.ttcheck;\n    benhnhanThongTin: BenhNhanThongTin;\n    apDungCongNoThuoc: boolean = false;\n    thongTinTam: any = [];\n    viTri: number = 0;\n    tongTienBNThanhToan: number = 0;\n    thongTinMienGiamVos: any;\n    apDungMienGiam: boolean = false;\n    flagAllowLoadThuoc: boolean = true;\n    xemTruocBangKeThuoc: XemTruocBangKeThuoc = new XemTruocBangKeThuoc();\n\n    tabIndex: number = 0;\n\n    @ViewChild('tabQuayThuoc', { static: true }) tabQuayThuoc: TabStripComponent;\n    @ViewChild(QuayThuocHinhThucThanhToanComponent, { static: false }) quayThuocHinhThucThanhToan;\n\n    constructor(private route: ActivatedRoute, private notificationService: NotificationService,\n        private dialog: MatDialog, private apiService: ApiService, private router: Router, private cdRef: ChangeDetectorRef) { }\n\n    ngOnInit() {\n        const tiepNhanId: number = this.route.snapshot.params.id;\n        const benhNhanId: number = this.route.snapshot.params.idsub;\n\n        this.benhnhanThongTin = new BenhNhanThongTin();\n        this.GetThongTinBenhNhan(benhNhanId, tiepNhanId);\n\n    }\n\n    GetThongTinBenhNhan(benhNhanId: number, tiepNhanId: number) {\n        this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhan?benhNhanId=\" + benhNhanId + \"&tiepNhanId=\" + tiepNhanId).subscribe(\n            resultData => {\n                this.benhnhanThongTin = resultData;\n            }, () => { });\n    }\n\n    onTabSelect(event: any) {\n        this.tabIndex = event.index;\n        if (event.index == 1) {\n            this.flagAllowLoadThuoc = false;\n        } else {\n            this.flagAllowLoadThuoc = true;\n        }\n    }\n    // 2 đã thanh toán --- 1 chưa thanh toán --- 3 là cả 2\n    Huy() {\n        if (this.ttcheck == 1) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck, hoQuerysearch: false } });\n        }\n        if (this.ttcheck == 2) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck, hoQuerysearch: false } });\n        }\n        if (this.ttcheck == 3) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck, hoQuerysearch: false } });\n        }\n        if (this.ttcheck == 0) {\n            this.router.navigate(['nha-thuoc'], { queryParams: { page: this.ttcheck, hoQuerysearch: false } });\n        }\n    }\n\n    ngAfterViewChecked() {\n        this.cdRef.detectChanges();\n    }\n\n    afterChangedCongNo() {\n        this.cdRef.detectChanges();\n        this.apDungCongNoThuoc = false;\n    }\n\n    afterChangedMienGiam() {\n        this.cdRef.detectChanges();\n        this.apDungMienGiam = false;\n    }\n\n    getBaoHiem(data: any) {\n        this.apDungCongNoThuoc = data.apDungCongNoThuoc;\n        this.thongTinTam = data.thongTinTam;\n        this.viTri = data.viTri;\n    }\n\n\n    getMg(data: any) {\n        this.apDungMienGiam = data.apDungMienGiam;\n        this.thongTinMienGiamVos = data.thongTinMienGiam;\n    }\n\n    danhSachChuaThanhToan(data: any[]) {\n        let bnThanhToan = 0;\n        if (data != undefined && data != null) {\n            data.forEach(ele => {\n                bnThanhToan += ele.BNConPhaiThanhToan;\n            });\n        }\n        this.tongTienBNThanhToan = bnThanhToan;\n        this.xemTruocBangKeThuoc.DanhSachDonThuocs = data;\n    }\n\n    changeTab() {\n        this.tabQuayThuoc.selectTab(1);\n        this.flagAllowLoadThuoc = false;\n    }\n\n    inXemTruocBangKeThuoc() {\n        this.showPopupLoadingIn();\n        this.xemTruocBangKeThuoc.Hosting = window.location.protocol + '//' + window.location.host;\n        this.xemTruocBangKeThuoc.YeuCauTiepNhanId = this.route.snapshot.params.id;\n\n        if (this.xemTruocBangKeThuoc.DanhSachDonThuocs === undefined &&\n            this.xemTruocBangKeThuoc.DanhSachDonThuocs === null && this.xemTruocBangKeThuoc.DanhSachDonThuocs.length === 0) {\n            this.notificationService.showError(\"Không có thuốc và vật tư.\");\n            return;\n        }\n        else {\n            this.apiService.postExportPdf<any>('QuayThuoc/XemTruocBangKeThuoc', this.xemTruocBangKeThuoc).subscribe(\n                resultData => {\n                    if (resultData != undefined && resultData != null) {\n                        this.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                            disableClose: true,\n                            width: '1000px',\n                            data: { Model: resultData }\n                        }).afterClosed().subscribe(() => {\n                            this.closePopupLoadingData();\n                        });\n                    }\n                },\n                (err: ApiError) => {\n                    this.closePopupLoadingData();\n                });\n        }\n\n    }\n\n    showPopupLoadingIn() {\n        this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: '250px',\n            height: '90px',\n            data: { Title: 'Đang loading...' },\n        });\n    }\n\n    closePopupLoadingData() {\n        this.dialog.closeAll();\n    }\n\n    @HostListener('document:keydown', ['$event'])\n    keyEvent(event: KeyboardEvent) {\n        if (event.keyCode == 83 && event.ctrlKey) {\n            // ctrl + s\n            if (this.tabIndex == 0) {\n                this.quayThuocHinhThucThanhToan.ThuTien();\n            }\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 112 && event.ctrlKey) {\n            // ctrl + f1\n            this.tabQuayThuoc.selectTab(0);\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 113 && event.ctrlKey) {\n            // ctrl + f2\n            this.tabQuayThuoc.selectTab(1);\n            event.preventDefault();\n        }\n\n        if (event.keyCode == 27 && !event.ctrlKey) {\n            // esc\n            this.Huy();\n            event.preventDefault();\n        }\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PermisssionGuard } from 'src/app/core/guards/permission-guard.service';\nimport { SecurityOperation } from 'src/app/shared/enum/security-operation.enum';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { QuayThuocChoThanhToanComponent } from './quay-thuoc-cho-thanh-toan/quay-thuoc-cho-thanh-toan.component';\nimport { QuayThuocMuaThuocComponent } from './quay-thuoc-mua-thuoc/quay-thuoc-mua-thuoc.component';\nimport { QuayThuocToaThuocCuComponent } from './quay-thuoc-toa-thuoc-cu/quay-thuoc-toa-thuoc-cu.component';\nimport { QuayThuocKhachVangLaiComponent } from './quay-thuoc-khach-vang-lai/quay-thuoc-khach-vang-lai.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: QuayThuocChoThanhToanComponent,\n  data: {\n    title: 'Tìm thông tin',\n    DocumentType: DocumentType.QuayThuoc,\n    SecurityOperation: SecurityOperation.View\n  },\n  canActivate: [PermisssionGuard]\n},\n{\n  path: 'mua-thuoc/:id/:idsub/:tt/:ttcheck',\n  component: QuayThuocMuaThuocComponent,\n  data: {\n    title: 'Mua thuốc',\n    DocumentType: DocumentType.QuayThuoc,\n    SecurityOperation: SecurityOperation.Update\n  },\n  canActivate: [PermisssionGuard]\n},\n{\n  path: 'mua-toa-cu/:id/:ttcheck',\n  component: QuayThuocToaThuocCuComponent,\n  data: {\n    title: 'Mua thuốc',\n    DocumentType: DocumentType.QuayThuoc,\n    SecurityOperation: SecurityOperation.Update\n  },\n  canActivate: [PermisssionGuard]\n},\n{\n  path: 'khach-vang-lai',\n  component: QuayThuocKhachVangLaiComponent,\n  data: {\n    title: 'Mua thuốc',\n    DocumentType: DocumentType.QuayThuoc,\n    SecurityOperation: SecurityOperation.Update\n  },\n  canActivate: [PermisssionGuard]\n}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class QuayThuocRoutingModule { }\n","export default \"fieldset {\\n  display: block;\\n  margin-left: 2px;\\n  margin-right: 2px;\\n  padding-top: 0.35em !important;\\n  padding-bottom: 0.625em !important;\\n  padding-left: 0.75em !important;\\n  padding-right: 0.75em !important;\\n  border: 1px #e0e0e0;\\n  border-style: inherit;\\n}\\n\\nfieldset legend {\\n  margin-left: 15px;\\n  text-transform: uppercase;\\n}\\n\\nfieldset .item_right {\\n  text-align: right !important;\\n  float: right;\\n}\\n\\nfieldset ul > li {\\n  padding-right: 15px !important;\\n}\\n\\nfieldset ul.inline > li {\\n  display: inline-block !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy10aG9uZy10aW4tYmFvLWhpZW0tdHUtbmhhbi9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHF1YXktdGh1b2MtdGhvbmctdGluLWJhby1oaWVtLXR1LW5oYW5cXHF1YXktdGh1b2MtdGhvbmctdGluLWJhby1oaWVtLXR1LW5oYW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdGhvbmctdGluLWJhby1oaWVtLXR1LW5oYW4vcXVheS10aHVvYy10aG9uZy10aW4tYmFvLWhpZW0tdHUtbmhhbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQ0FBQTtFQUNBLCtCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtFQUNBLHlCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0QkFBQTtFQUNBLFlBQUE7QUNDRjs7QURFQTtFQUNFLDhCQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQ0FBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy10aG9uZy10aW4tYmFvLWhpZW0tdHUtbmhhbi9xdWF5LXRodW9jLXRob25nLXRpbi1iYW8taGllbS10dS1uaGFuLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZmllbGRzZXQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IDJweDtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIHBhZGRpbmctdG9wOiAwLjM1ZW0gIWltcG9ydGFudDtcbiAgcGFkZGluZy1ib3R0b206IDAuNjI1ZW0gIWltcG9ydGFudDtcbiAgcGFkZGluZy1sZWZ0OiAwLjc1ZW0gIWltcG9ydGFudDtcbiAgcGFkZGluZy1yaWdodDogMC43NWVtICFpbXBvcnRhbnQ7XG4gIGJvcmRlcjogMXB4ICNlMGUwZTA7XG4gIGJvcmRlci1zdHlsZTogaW5oZXJpdDtcbn1cblxuZmllbGRzZXQgbGVnZW5kIHtcbiAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG59XG5cbmZpZWxkc2V0IC5pdGVtX3JpZ2h0IHtcbiAgdGV4dC1hbGlnbjogcmlnaHQgIWltcG9ydGFudDtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG5maWVsZHNldCB1bCA+IGxpIHtcbiAgcGFkZGluZy1yaWdodDogMTVweCAhaW1wb3J0YW50O1xufVxuXG5maWVsZHNldCB1bC5pbmxpbmUgPiBsaSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O1xufSIsImZpZWxkc2V0IHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiAycHg7XG4gIG1hcmdpbi1yaWdodDogMnB4O1xuICBwYWRkaW5nLXRvcDogMC4zNWVtICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmctYm90dG9tOiAwLjYyNWVtICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmctbGVmdDogMC43NWVtICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmctcmlnaHQ6IDAuNzVlbSAhaW1wb3J0YW50O1xuICBib3JkZXI6IDFweCAjZTBlMGUwO1xuICBib3JkZXItc3R5bGU6IGluaGVyaXQ7XG59XG5cbmZpZWxkc2V0IGxlZ2VuZCB7XG4gIG1hcmdpbi1sZWZ0OiAxNXB4O1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG5maWVsZHNldCAuaXRlbV9yaWdodCB7XG4gIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7XG4gIGZsb2F0OiByaWdodDtcbn1cblxuZmllbGRzZXQgdWwgPiBsaSB7XG4gIHBhZGRpbmctcmlnaHQ6IDE1cHggIWltcG9ydGFudDtcbn1cblxuZmllbGRzZXQgdWwuaW5saW5lID4gbGkge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcbn0iXX0= */\"","import { Component, OnInit, ViewChild, TemplateRef, EventEmitter, Output, Input, ChangeDetectorRef, OnChanges } from '@angular/core';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { ActivatedRoute } from '@angular/router';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { MultiselectComponent } from 'src/app/shared/component/dropdowns/multiselect/multiselect.component';\n\n@Component({\n    selector: 'app-quay-thuoc-thong-tin-bao-hiem-tu-nhan',\n    templateUrl: './quay-thuoc-thong-tin-bao-hiem-tu-nhan.component.html',\n    styleUrls: ['./quay-thuoc-thong-tin-bao-hiem-tu-nhan.component.scss']\n})\nexport class QuayThuocThongTinBaoHiemTuNhanComponent implements OnInit, OnChanges {\n    constructor(\n        private route: ActivatedRoute,\n        private apiService: ApiService,\n        private cdRef: ChangeDetectorRef,\n        private notificationService: NotificationService\n    ) { }\n    gridChildColumns2: any[] = [];\n    documentType: DocumentType;\n    idMYCTN: number = this.route.snapshot.params.id;\n    @ViewChild('actionTemplateSTCongNo', { static: true }) actionTemplateSTCongNo: TemplateRef<any>;\n    @ViewChild('actionTemplateSubmitCongNo', { static: true }) actionTemplateSubmitCongNo: TemplateRef<any>;\n    apDungCongNo: boolean = false;\n    thongTinBenhNhantam: any = [];\n    @Output() valueChangeBaoHiem = new EventEmitter<any>();\n    @Output() valueChangeMg = new EventEmitter<any>();\n    dataSourceDanhSachBHTN = {\n        data: [],\n        total: 0\n    };\n    checkHaveBHTN: boolean = false;\n    flagEnableVoucher: boolean = false;\n    flagApDung: boolean = false;\n    thongTinMienGiamThem: any = [];\n    thongTinMienGiamVo: any;\n    thongTinMienGiamVoucher: any = [];\n    disabledVoucher: boolean = false;\n    flagEnableMGThem: boolean = false;\n    disabledMGThem: boolean = false;\n    disabledSoTienMG: boolean = true;\n    disabledTiLeMG: boolean = true;\n    isExistFile: boolean = false;\n    soTienMgCheck: boolean = true;\n    tiLeMgCheck: boolean = false;\n    listVouchers: number[] = [];\n    listOldVouchers: number[] = [];\n    quayThuocValidationErrors: any = [];\n    apDungMienGiam: boolean = false;\n    idBenhNhan: number = 0;\n    @Input() tongTienBNThanhToan: number;\n    tongTienBNThanhToanPrivate: number = 0;\n    public checkHiddenSoTienConLai: boolean = false;\n    loaiVoucher: number = 0;\n    @ViewChild('voucherList', { static: false }) voucherList: MultiselectComponent;\n    khachVangLaiMuaThuoc: boolean = false;\n    format: string = 'n2';\n    \n    ngOnInit() {\n        this.documentType = DocumentType.QuayThuoc;\n        this.gridChildColumns2 = [\n            { Field: \"TenCongTy\", Title: \"Công Ty\", Width: 231 },\n            { Field: \"SoThe\", Title: \"Số Thẻ\", Width: 111 },\n            { Field: \"TuNgayHienThi\", Title: \"Từ ngày\", Width: 96 },\n            { Field: \"DenNgayHienThi\", Title: \"Đến ngày\", Width: 104 },\n            { Field: \"DienThoai\", Title: \"Điện thoại\", Width: 122 },\n            { Field: \"DiaChi\", Title: \"Địa chỉ\", Width: 240 },\n            { Field: \"CongNo\", Title: \"Công nợ\", Width: 115, Template: this.actionTemplateSTCongNo },\n            { Field: \"\", Title: \"\", Width: 125, Template: this.actionTemplateSubmitCongNo }\n        ];\n        this.idBenhNhan = this.route.snapshot.params.idsub;\n        this.getDanhSachBHTN();\n    }\n\n    ngOnChanges() {\n        this.tongTienBNThanhToanPrivate = this.tongTienBNThanhToan;\n    }\n\n    getDanhSachBHTN() {\n        this.apiService.get<any>(\"QuayThuoc/GetListCongTyBaoHiemTuNhans?tiepNhanId=\" + this.idMYCTN).subscribe(\n            resultData => {\n                if (resultData != null && resultData != undefined) {\n                    this.dataSourceDanhSachBHTN.data = resultData;\n                    this.dataSourceDanhSachBHTN.data.forEach(element => {\n                        var congNoItem = {\n                            Id: element.Id,\n                            CongNoId: element.CongNoId,\n                            SoTien: element.SoTien,\n                            TenCongTy: element.TenCongTy\n                        };\n                        this.thongTinBenhNhantam.push(congNoItem);\n                    });\n\n                    this.CheckThongTinBenhNhan(this.idMYCTN);\n                }\n            });\n    }\n\n    CheckThongTinBenhNhan(tiepNhanId: number) {\n        this.apiService.post<Array<any>>(\"QuayThuoc/CheckBenhNhanExistBaoHiemTuNhan?yctnId=\" + tiepNhanId).subscribe(\n            resultData => {\n                if (resultData.length > 0) {\n                    this.checkHaveBHTN = true;\n                } else {\n                    this.checkHaveBHTN = false;\n                }\n\n                this.getThongTinMienGiam(tiepNhanId);\n            }, () => { });\n    }\n\n    getThongTinMienGiam(id: number) {\n        this.apiService.get<any>(\"ThuNgan/GetThongTinMienGiam?yeuCauTiepNhanId=\" + id).subscribe(resultData => {\n            if (resultData !== null && resultData !== undefined) {\n                this.khachVangLaiMuaThuoc = resultData.KhachVangLaiMuaThuoc;\n                if (resultData.ThongTinMienGiamVoucherVo != null || resultData.ThongTinMienGiamVoucherVo != undefined) {\n                    this.flagApDung = true;\n                    this.flagEnableVoucher = true;\n                    if (this.flagEnableVoucher === true) {\n                        this.disabledVoucher = true;\n                    }\n\n                    this.listVouchers = [];\n\n                    resultData.ThongTinMienGiamVoucherVo.MaVouchers.forEach(element => {\n                        this.listVouchers.push(element.KeyId);\n                        this.listOldVouchers.push(element.KeyId);\n                    });\n\n                    this.thongTinMienGiamVoucher = {\n                        MaVouchers: resultData.ThongTinMienGiamVoucherVo.MaVouchers,\n                        DuocPhamMienGiamTheoTiLes: resultData.ThongTinMienGiamVoucherVo.DuocPhamMienGiamTheoTiLes,\n                        LoaiVoucher: resultData.ThongTinMienGiamVoucherVo.LoaiVoucher,\n                        TenVoucher: resultData.ThongTinMienGiamVoucherVo.TenVoucher,\n                        SoTienVoucherMiemGiam: resultData.ThongTinMienGiamVoucherVo.LoaiVoucher.SoTienVoucherMiemGiam\n                    };\n\n                    this.loaiVoucher = resultData.ThongTinMienGiamVoucherVo.LoaiVoucher;\n                }\n\n                if (resultData.ThongTinMienGiamThemVo != null || resultData.ThongTinMienGiamThemVo != undefined) {\n                    this.flagApDung = true;\n                    this.flagEnableMGThem = true;\n                    if (this.flagEnableMGThem === true) {\n                        this.disabledMGThem = true;\n                    }\n\n                    this.thongTinMienGiamThem = {\n                        LoaiMienGiamThem: resultData.ThongTinMienGiamThemVo.LoaiMienGiamThem,\n                        LyDoMiemGiam: resultData.ThongTinMienGiamThemVo.LyDoMiemGiam,\n                        SoTienMG: resultData.ThongTinMienGiamThemVo.SoTienMG,\n                        SoTienMGConLai: resultData.ThongTinMienGiamThemVo.SoTienMGConLai,\n                        TiLeMienGiam: resultData.ThongTinMienGiamThemVo.TiLeMienGiam,\n                        NhanVienDuyetMienGiamThemId: resultData.ThongTinMienGiamThemVo.NhanVienDuyetMienGiamThemId,\n                        TenNhanVienDuyet: resultData.ThongTinMienGiamThemVo.TenNhanVienDuyet,\n                        TaiLieuDinhKemGiayMiemGiam: {\n                            Id: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.Id,\n                            Ma: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.Ma,\n                            DuongDan: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.DuongDan,\n                            MoTa: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.MoTa,\n                            KichThuoc: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.KichThuoc,\n                            LoaiTapTin: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.LoaiTapTin,\n                            Ten: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.Ten,\n                            TenGuid: resultData.ThongTinMienGiamThemVo.TaiLieuDinhKemGiayMiemGiam.TenGuid\n                        }\n                    };\n\n                    if (this.thongTinMienGiamThem.SoTienMG != 0) {\n                        this.disabledSoTienMG = false;\n                        this.soTienMgCheck = true;\n                        this.tiLeMgCheck = false;\n                    }\n\n                    if (this.thongTinMienGiamThem.TiLeMienGiam != 0) {\n                        this.disabledTiLeMG = false;\n                        this.soTienMgCheck = false;\n                        this.tiLeMgCheck = true;\n                    }\n\n                    if (this.thongTinMienGiamThem.TaiLieuDinhKemGiayMiemGiam.Ten != null) {\n                        this.isExistFile = true;\n                    }\n                } else {\n                    this.disabledSoTienMG = false;\n                    this.thongTinMienGiamThem = {\n                        LoaiMienGiamThem: null,\n                        LyDoMiemGiam: null,\n                        SoTienMG: 0,\n                        SoTienMGConLai: 0,\n                        TiLeMienGiam: 0,\n                        TaiLieuDinhKemGiayMiemGiam: {\n                            Ma: null,\n                            DuongDan: null,\n                            MoTa: null,\n                            KichThuoc: null,\n                            LoaiTapTin: null,\n                            Ten: null,\n                            TenGuid: null\n                        }\n                    };\n                }\n            }\n        });\n    }\n\n    uploadFileDone(tapTin: any) {\n        this.thongTinMienGiamThem.TaiLieuDinhKemGiayMiemGiam = tapTin;\n        this.cdRef.detectChanges();\n    }\n\n    onApplyMGThem() {\n        this.thongTinMienGiamVo = {\n            ThongTinMienGiamVoucherVo: this.thongTinMienGiamVoucher,\n            ThongTinMienGiamThemVo: this.thongTinMienGiamThem,\n        }\n        this.apDungMienGiam = true;\n        var loaiMGThem = 1;\n\n        if (this.soTienMgCheck) {\n            loaiMGThem = 1;\n        }\n\n        if (this.tiLeMgCheck) {\n            loaiMGThem = 2;\n        }\n\n        if (this.thongTinMienGiamThem.SoTienMG != 0) {\n            this.thongTinMienGiamThem.LoaiMienGiamThem = 1;\n            this.thongTinMienGiamThem.TiLeMienGiam = 0;\n        }\n\n        if (this.thongTinMienGiamThem.TiLeMienGiam != 0) {\n            this.thongTinMienGiamThem.LoaiMienGiamThem = 2;\n            this.thongTinMienGiamThem.SoTienMG = 0;\n        }\n\n        var thongTinMGThem = {\n            ValidateVoucher: this.flagEnableVoucher,\n            IdYeuCauTiepNhan: this.idMYCTN,\n            ListVouchers: this.listVouchers,\n            ValidateMGThem: this.flagEnableMGThem,\n            LoaiMienGiamThem: loaiMGThem,\n            LyDoMienGiam: this.thongTinMienGiamThem.LyDoMiemGiam,\n            TaiLieuDinhKem: this.thongTinMienGiamThem.TaiLieuDinhKemGiayMiemGiam,\n            SoTienMG: this.thongTinMienGiamThem.SoTienMG,\n            TiLeMienGiam: this.thongTinMienGiamThem.TiLeMienGiam,\n            SoTienMGConLai: this.thongTinMienGiamThem.SoTienMGConLai,\n            BenhNhanId: this.idBenhNhan,\n            NhanVienDuyetMienGiamThemId: this.thongTinMienGiamThem.NhanVienDuyetMienGiamThemId\n        };\n\n        this.quayThuocValidationErrors = null;\n        this.apiService.post<any>(\"ThuNgan/ThemThongTinMiemGiamThemVaVoucher\", thongTinMGThem)\n            .subscribe(resultData => {\n                if (resultData) {\n                    this.getThongTinMienGiam(this.idMYCTN);\n                }\n\n                this.apDungMienGiam = true;\n                var mienGiamObj = {\n                    apDungMienGiam: this.apDungMienGiam,\n                    thongTinMienGiam: this.thongTinMienGiamVo\n                };\n                this.valueChangeMg.emit(mienGiamObj);\n            }, (err: ApiError) => {\n                this.quayThuocValidationErrors = err.ValidationErrors;\n                this.disabledSoTienMG = true;\n                this.thongTinMienGiamThem = {\n                    LoaiMienGiamThem: loaiMGThem,\n                    LyDoMiemGiam: this.thongTinMienGiamThem.LyDoMiemGiam,\n                    SoTienMG: this.thongTinMienGiamThem.SoTienMG,\n                    TiLeMienGiam: this.thongTinMienGiamThem.TiLeMienGiam,\n                    SoTienMGConLai: this.thongTinMienGiamThem.SoTienMGConLai,\n                    TaiLieuDinhKemGiayMiemGiam: this.thongTinMienGiamThem.TaiLieuDinhKemGiayMiemGiam,\n                };\n            });\n    }\n\n    onChangeLoaiMg(value: any) {\n        if (value === 1) {\n            this.soTienMgCheck = true;\n            this.tiLeMgCheck = false;\n            this.disabledSoTienMG = false;\n            this.disabledTiLeMG = true;\n            this.checkHiddenSoTienConLai = false;\n            this.thongTinMienGiamThem.TiLeMienGiam = 0;\n        }\n\n        if (value === 2) {\n            this.soTienMgCheck = false;\n            this.tiLeMgCheck = true;\n            this.disabledSoTienMG = true;\n            this.disabledTiLeMG = false;\n            this.checkHiddenSoTienConLai = true;\n            this.thongTinMienGiamThem.SoTienMG = 0;\n        }\n    }\n\n    onKeyCongNo(event: any, indexRow: any) {\n        if (event.key == \"Enter\") {\n            this.ApDungCongNo(indexRow);\n        }\n    }\n\n    ApDungCongNo(indexRow: any) {\n        if (this.dataSourceDanhSachBHTN.data[indexRow].SoTien != 0) {\n            this.thongTinBenhNhantam[indexRow].SoTien = this.dataSourceDanhSachBHTN.data[indexRow].SoTien;\n\n            this.apDungCongNo = true;\n\n            var apDungCongNoQuayThuoc = {\n                apDungCongNoThuoc: this.apDungCongNo,\n                viTri: indexRow,\n                thongTinTam: this.thongTinBenhNhantam\n            }\n            this.dataSourceDanhSachBHTN.data[indexRow].SoTien = 0;\n            this.valueChangeBaoHiem.emit(apDungCongNoQuayThuoc);\n        }\n    }\n\n    onChangeVoucher(data: any) {\n        if (data === false) {\n            this.flagEnableVoucher = false;\n            if (this.flagEnableMGThem) {\n                this.flagApDung = true;\n                return;\n            }\n\n            this.flagApDung = false;\n        } else {\n            this.flagEnableVoucher = true;\n            this.flagApDung = true;\n\n            if (this.quayThuocValidationErrors == null) {\n                this.quayThuocValidationErrors = [];\n            }\n\n            var lengthQuayThuocValidators = this.quayThuocValidationErrors.length;\n\n            if (lengthQuayThuocValidators != 0) {\n                for (let i = 0; i < lengthQuayThuocValidators; i++) {\n                    if (this.quayThuocValidationErrors.length - 1 < i) {\n                        //exceed\n                        break;\n                    }\n\n                    if (this.quayThuocValidationErrors[i].Field == \"ListVouchers\") {\n                        this.quayThuocValidationErrors.splice(i, 1);\n                        if (i != 0) { i--; }\n                    }\n                }\n            }\n        }\n    }\n\n    onChangeMienGiam(data: any) {\n        if (data === false) {\n            this.flagEnableMGThem = false;\n            if (this.flagEnableVoucher == false && this.flagEnableMGThem == false) {\n                this.flagApDung = false;\n            }\n            if (this.flagEnableVoucher == true) {\n                this.flagApDung = true;\n            }\n        } else {\n            this.flagEnableMGThem = true;\n            this.flagApDung = true;\n            this.soTienMgCheck = true;\n            this.tiLeMgCheck = false;\n\n            if (this.quayThuocValidationErrors == null) {\n                this.quayThuocValidationErrors = [];\n            }\n\n            var lengthQuayThuocValidators = this.quayThuocValidationErrors.length;\n\n            if (lengthQuayThuocValidators != 0) {\n                for (let i = 0; i < lengthQuayThuocValidators; i++) {\n                    if (this.quayThuocValidationErrors.length - 1 < i) {\n                        //exceed\n                        break;\n                    }\n\n                    if (this.quayThuocValidationErrors[i].Field == \"SoTienMG\") {\n                        this.quayThuocValidationErrors.splice(i, 1);\n                        if (i != 0) { i--; }\n                    }\n\n                    if (this.quayThuocValidationErrors[i].Field == \"LyDoMienGiam\") {\n                        this.quayThuocValidationErrors.splice(i, 1);\n                        if (i != 0) { i--; }\n                    }\n\n                    if (this.quayThuocValidationErrors[i].Field == \"TiLeMienGiam\") {\n                        this.quayThuocValidationErrors.splice(i, 1);\n                        if (i != 0) { i--; }\n                    }\n\n                    if (this.quayThuocValidationErrors[i].Field == \"TaiLieuDinhKem\") {\n                        this.quayThuocValidationErrors.splice(i, 1);\n                        if (i != 0) { i--; }\n                    }\n                }\n            }\n        }\n    }\n\n    onOpenChange() {\n        this.voucherList.getDataForLookup();\n    }\n\n    onSelectChangeVoucher(voucherId: any) {\n        if (voucherId.length == 0)\n            this.loaiVoucher = 0\n        var last = voucherId[voucherId.length - 1];\n        this.apiService.post<any>(\"ThuNgan/GetMaVoucher?loaiVoucher=\" + this.loaiVoucher).subscribe(resultData => {\n            if (resultData !== null && resultData !== undefined) {\n                resultData.forEach(element => {\n                    if (element.KeyId == last) {\n                        this.loaiVoucher = element.LoaiVoucher;\n                    }\n                });\n            }\n        });\n    }\n\n    valueChangeTheVoucher(value: any) {\n        var voucherId: any[] = [];\n\n        if (value.length > this.listOldVouchers.length) {\n            this.listOldVouchers = value;\n        }\n\n        if (value.length < this.listOldVouchers.length) {\n            if (value.length == 0) {\n                this.disabledVoucher = false;\n                voucherId = this.listOldVouchers;\n                this.flagEnableVoucher = false;\n                if (this.flagEnableMGThem === false) {\n                    this.flagApDung = false;\n                    this.apDungMienGiam = true;\n                }\n            }\n            else {\n                voucherId = this.differenceOf2Arrays(this.listOldVouchers, value);\n            }\n\n            var thongTinVoucherTheoYeuCauTiepNhan = {\n                VoucherIds: voucherId,\n                YeucauTiepNhanId: this.idMYCTN\n            };\n\n            this.apiService.post<any>(\"ThuNgan/DeleteTheVoucher\", thongTinVoucherTheoYeuCauTiepNhan)\n                .subscribe(resultData => {\n                    if (resultData !== null && resultData !== undefined) {\n                        if (resultData.Item1) {\n                            this.notificationService.showSuccess(resultData.Item2);\n                            this.getThongTinMienGiam(this.idMYCTN);\n                            this.apDungMienGiam = true;\n                            var mienGiamObj = {\n                                apDungMienGiam: this.apDungMienGiam,\n                                thongTinMienGiam: this.thongTinMienGiamVo\n                            };\n                            this.valueChangeMg.emit(mienGiamObj);\n                        }\n                    }\n                });\n            this.listOldVouchers = value;\n        }\n    }\n\n    differenceOf2Arrays(arr1, arr2) {\n        const temp = [];\n        arr1 = arr1.toString().split(',').map(Number);\n        arr2 = arr2.toString().split(',').map(Number);\n\n        for (var i in arr1) {\n            if (!arr2.includes(arr1[i])) temp.push(arr1[i]);\n        }\n        for (i in arr2) {\n            if (!arr1.includes(arr2[i])) temp.push(arr2[i]);\n        }\n        return temp.sort((a, b) => a - b);\n    }\n}\n","export default \"fieldset {\\n  display: block;\\n  margin-left: 2px;\\n  margin-right: 2px;\\n  padding-top: 0.35em;\\n  padding-bottom: 0.625em;\\n  padding-left: 0.75em;\\n  padding-right: 0.75em;\\n  border: 1px #e0e0e0;\\n  border-style: inherit;\\n}\\n\\nfieldset .item_right {\\n  text-align: right !important;\\n  float: right;\\n}\\n\\nfieldset ul > li {\\n  padding-right: 15px !important;\\n}\\n\\nfieldset ul.inline > li {\\n  display: inline-block !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy10aG9uZy10aW4taGFuaC1jaGluaC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHF1YXktdGh1b2MtdGhvbmctdGluLWhhbmgtY2hpbmhcXHF1YXktdGh1b2MtdGhvbmctdGluLWhhbmgtY2hpbmguY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdGhvbmctdGluLWhhbmgtY2hpbmgvcXVheS10aHVvYy10aG9uZy10aW4taGFuaC1jaGluaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLG9CQUFBO0VBQ0EscUJBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0QkFBQTtFQUNBLFlBQUE7QUNDRjs7QURFQTtFQUNFLDhCQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQ0FBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy10aG9uZy10aW4taGFuaC1jaGluaC9xdWF5LXRodW9jLXRob25nLXRpbi1oYW5oLWNoaW5oLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZmllbGRzZXQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IDJweDtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIHBhZGRpbmctdG9wOiAwLjM1ZW07XG4gIHBhZGRpbmctYm90dG9tOiAwLjYyNWVtO1xuICBwYWRkaW5nLWxlZnQ6IDAuNzVlbTtcbiAgcGFkZGluZy1yaWdodDogMC43NWVtO1xuICBib3JkZXI6IDFweCAjZTBlMGUwO1xuICBib3JkZXItc3R5bGU6IGluaGVyaXQ7XG59XG5cbmZpZWxkc2V0IC5pdGVtX3JpZ2h0IHtcbiAgdGV4dC1hbGlnbjogcmlnaHQgIWltcG9ydGFudDtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG5maWVsZHNldCB1bCA+IGxpIHtcbiAgcGFkZGluZy1yaWdodDogMTVweCAhaW1wb3J0YW50O1xufVxuXG5maWVsZHNldCB1bC5pbmxpbmUgPiBsaSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O1xufSIsImZpZWxkc2V0IHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiAycHg7XG4gIG1hcmdpbi1yaWdodDogMnB4O1xuICBwYWRkaW5nLXRvcDogMC4zNWVtO1xuICBwYWRkaW5nLWJvdHRvbTogMC42MjVlbTtcbiAgcGFkZGluZy1sZWZ0OiAwLjc1ZW07XG4gIHBhZGRpbmctcmlnaHQ6IDAuNzVlbTtcbiAgYm9yZGVyOiAxcHggI2UwZTBlMDtcbiAgYm9yZGVyLXN0eWxlOiBpbmhlcml0O1xufVxuXG5maWVsZHNldCAuaXRlbV9yaWdodCB7XG4gIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7XG4gIGZsb2F0OiByaWdodDtcbn1cblxuZmllbGRzZXQgdWwgPiBsaSB7XG4gIHBhZGRpbmctcmlnaHQ6IDE1cHggIWltcG9ydGFudDtcbn1cblxuZmllbGRzZXQgdWwuaW5saW5lID4gbGkge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcbn0iXX0= */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { BenhNhanThongTin } from '../quay-thuoc.model';\n\n@Component({\n    selector: 'app-quay-thuoc-thong-tin-hanh-chinh',\n    templateUrl: './quay-thuoc-thong-tin-hanh-chinh.component.html',\n    styleUrls: ['./quay-thuoc-thong-tin-hanh-chinh.component.scss']\n})\nexport class QuayThuocThongTinHanhChinhComponent implements OnInit {\n\n    @Input() benhnhanThongTin: BenhNhanThongTin;\n    @Input() MaBN: number;\n    data = {} as BenhNhanThongTin;\n\n    constructor(private route: ActivatedRoute, private apiService: ApiService) { }\n    ngOnInit() {\n        const id: number = this.route.snapshot.params.idsub;\n        if (this.benhnhanThongTin == null) {\n            this.benhnhanThongTin = new BenhNhanThongTin();\n        }\n        if (this.MaBN != null) {\n            this.GetThongTinBenhNhan(this.MaBN);\n        }\n    }\n    GetThongTinBenhNhan(id: number) {\n        this.apiService.post<any>(\"QuayThuoc/GetThongTinBenhNhan1?maBN=\" + id).subscribe(\n            resultData => {\n                this.data = resultData;\n            },\n            () => { });\n    }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdGltLWJlbmgtbmhhbi1wb3AtdXAvcXVheS10aHVvYy10aW0tYmVuaC1uaGFuLXBvcC11cC5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, Optional, Inject, ViewChild, TemplateRef } from '@angular/core';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDialog } from '@angular/material/dialog';\nimport icClose from '@iconify/icons-ic/twotone-close';\nimport icDone from '@iconify/icons-ic/done';\nimport { ThongTinBenhNhan } from '../quay-thuoc.model';\nimport icPrint from \"@iconify/icons-ic/twotone-print\";\nimport { InBangThuTienPopUpComponent } from '../in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { InDonThuocPopUpComponent } from '../in-don-thuoc-pop-up/in-don-thuoc-pop-up.component';\n@Component({\n  selector: 'app-quay-thuoc-tim-benh-nhan-pop-up',\n  templateUrl: './quay-thuoc-tim-benh-nhan-pop-up.component.html',\n  styleUrls: ['./quay-thuoc-tim-benh-nhan-pop-up.component.scss']\n})\nexport class QuayThuocTimBenhNhanPopUpComponent implements OnInit {\n  icClose = icClose;\n  icDone = icDone;\n  icPrint = icPrint;\n  Title: any = null;\n  data: any[] = [];\n  gridChild: any[] = [];\n  benhNhan: ThongTinBenhNhan;\n  constructor(private dialogRef: MatDialogRef<QuayThuocTimBenhNhanPopUpComponent>, @Optional() @Inject(MAT_DIALOG_DATA) public dataItem: any, private apiService: ApiService, private dialog: MatDialog) {\n    this.data = dataItem.Model\n    this.Title = dataItem.Title\n  }\n  gridChildColumns2: any[] = [];\n  documentType: DocumentType;\n  @ViewChild('actionTemplate', { static: true }) actionTemplate: TemplateRef<any>;\n  @ViewChild('TongGiaTriDonThuocTemplate', { static: true }) TongGiaTriDonThuocTemplate: TemplateRef<any>;\n  @ViewChild('SoTienChoThanhToanTemplate', { static: true }) SoTienChoThanhToanTemplate: TemplateRef<any>;\n  @ViewChild('trangThaiTemplate', { static: true }) trangThaiTemplate: TemplateRef<any>;\n  @ViewChild('maTNTemplate', { static: true }) maTNTemplate: TemplateRef<any>;\n  @ViewChild('templatePrint', { static: true }) templatePrint: TemplateRef<any>;\n  @ViewChild('SoTienThuoctemplate', { static: true }) SoTienThuoctemplate: TemplateRef<any>;\n  @ViewChild('TinhTrangThuoctemplate', { static: true }) TinhTrangThuoctemplate: TemplateRef<any>;\n  urlGetDataChild: string = \"QuayThuoc/GetDataForGridChildDTTNAsync\";\n  ngOnInit() {\n    this.documentType = DocumentType.QuayThuoc;\n    this.benhNhan = new ThongTinBenhNhan();\n    this.gridChildColumns2 = [\n      { Field: \"MaBN\", Title: \"Mã NB\", Width: 80, Sortable: false },\n      { Field: \"MaTN\", Title: \"Mã TN\", Width: 120, Sortable: false },\n      { Field: \"HoTen\", Title: \"Họ Tên\", Width: 200, Sortable: false },\n      { Field: \"NamSinh\", Title: \"Năm sinh\", Width: 80, Sortable: false },\n      { Field: \"GioiTinhHienThi\", Title: \"Giới tính\", Width: 80, Sortable: false },\n      { Field: \"DiaChi\", Title: \"Địa chỉ\", Width: 300, Sortable: false },\n      { Field: \"SoDienThoaiDisPlay\", Title: \"Điện thoại\", Width: 120, Sortable: false },\n      { Field: \"Action\", Title: \"\", Width: 80, Template: this.actionTemplate },\n    ];\n\n    this.gridChild = [\n      { Field: \"STT\", Title: \"#\", Width: 100, Sortable: true },\n      { Field: \"LoaiDonThuoc\", Title: \"\", Width: 200, Sortable: true, Hidden: true },\n      { Field: \"MaDon\", Title: \"Mã Đơn\", Width: 100, Sortable: true },\n      { Field: \"NgayKeDon\", Title: \"Ngày kê đơn\", Width: 200, Sortable: true },\n      { Field: \"DVKham\", Title: \"Dịch vụ khám\", minWidth: 200, Sortable: true },\n      { Field: \"BSKham\", Title: \"Bác sĩ khám\", Width: 200, Sortable: true },\n      { Field: \"SoTienDisPlay\", Title: \"Số tiền \", Width: 80, Sortable: true, Template: this.SoTienThuoctemplate },\n      { Field: \"TinhTrang\", Title: \"Tình trạng\", Width: 120, Sortable: true, Template: this.TinhTrangThuoctemplate },\n      { Field: \"\", Title: \"\", Width: 120, Sortable: true, Template: this.templatePrint },\n    ];\n  }\n  close(answer: any, type: any) {\n    if (type == 1) {\n      this.dialogRef.close(answer);\n    } else {\n      // this.benhNhan.MaBenhNhan = answer.BenhNhanId;\n      // this.benhNhan.MaTiepNhan=answer.MaTN;\n      // this.benhNhan.TrangThaiThanhToan = answer.TrangThai;\n      // this.benhNhan.YeuCauTiepNhanId=answer.Id;\n      this.dialogRef.close(answer);\n    }\n\n  }\n  PrinAllDonThuocBenhNhan(YeuCauTiepNhanId: number) {\n    var data = {\n      Hosting: null,\n      TiepNhanId: YeuCauTiepNhanId\n    }\n    if (window.location.protocol == \"http:\") {\n      data.Hosting = \"http://\" + window.location.host;\n    } else {\n      data.Hosting = \"https://\" + window.location.host;\n    }\n\n    this.apiService.post<any>(\"QuayThuoc/InThuocBenhNhan\", data).subscribe(\n      resultData => {\n        let dialogRef = this.dialog.open(InDonThuocPopUpComponent, {\n          width: '1000px',\n          data: { Model: resultData, InDonThuocDanhSachList: false, InBangKe: true, InPhieuThu: false }\n        }).afterClosed().subscribe(() => { });\n      }, () => { });\n  }\n}\n","export default \"fieldset {\\n  display: block;\\n  margin-left: 2px;\\n  margin-right: 2px;\\n  padding-top: 0.35em;\\n  padding-bottom: 0.625em;\\n  padding-left: 0.75em;\\n  padding-right: 0.75em;\\n  border: 1px #e0e0e0;\\n  border-style: inherit;\\n}\\n\\nfieldset .item_right {\\n  text-align: right !important;\\n  float: right;\\n}\\n\\nfieldset ul > li {\\n  padding-right: 15px !important;\\n}\\n\\nfieldset ul.inline > li {\\n  display: inline-block !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvcXVheS10aHVvYy10aW0tYmVuaC1uaGFuL0M6XFxwcm9qZWN0XFxmcmVlbGFuY2VyXFxob3NwaXRhbC9zcmNcXGFwcFxcbW9kdWxlc1xcbWFpblxccXVheS10aHVvY1xccXVheS10aHVvYy10aW0tYmVuaC1uaGFuXFxxdWF5LXRodW9jLXRpbS1iZW5oLW5oYW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdGltLWJlbmgtbmhhbi9xdWF5LXRodW9jLXRpbS1iZW5oLW5oYW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxvQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtBQ0NGOztBREVBO0VBQ0UsNEJBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSw4QkFBQTtBQ0NGOztBREVBO0VBQ0UsZ0NBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdGltLWJlbmgtbmhhbi9xdWF5LXRodW9jLXRpbS1iZW5oLW5oYW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJmaWVsZHNldCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogMnB4O1xuICBtYXJnaW4tcmlnaHQ6IDJweDtcbiAgcGFkZGluZy10b3A6IDAuMzVlbTtcbiAgcGFkZGluZy1ib3R0b206IDAuNjI1ZW07XG4gIHBhZGRpbmctbGVmdDogMC43NWVtO1xuICBwYWRkaW5nLXJpZ2h0OiAwLjc1ZW07XG4gIGJvcmRlcjogMXB4ICNlMGUwZTA7XG4gIGJvcmRlci1zdHlsZTogaW5oZXJpdDtcbn1cblxuZmllbGRzZXQgLml0ZW1fcmlnaHQge1xuICB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50O1xuICBmbG9hdDogcmlnaHQ7XG59XG5cbmZpZWxkc2V0IHVsID4gbGkge1xuICBwYWRkaW5nLXJpZ2h0OiAxNXB4ICFpbXBvcnRhbnQ7XG59XG5cbmZpZWxkc2V0IHVsLmlubGluZSA+IGxpIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7XG59IiwiZmllbGRzZXQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IDJweDtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIHBhZGRpbmctdG9wOiAwLjM1ZW07XG4gIHBhZGRpbmctYm90dG9tOiAwLjYyNWVtO1xuICBwYWRkaW5nLWxlZnQ6IDAuNzVlbTtcbiAgcGFkZGluZy1yaWdodDogMC43NWVtO1xuICBib3JkZXI6IDFweCAjZTBlMGUwO1xuICBib3JkZXItc3R5bGU6IGluaGVyaXQ7XG59XG5cbmZpZWxkc2V0IC5pdGVtX3JpZ2h0IHtcbiAgdGV4dC1hbGlnbjogcmlnaHQgIWltcG9ydGFudDtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG5maWVsZHNldCB1bCA+IGxpIHtcbiAgcGFkZGluZy1yaWdodDogMTVweCAhaW1wb3J0YW50O1xufVxuXG5maWVsZHNldCB1bC5pbmxpbmUgPiBsaSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O1xufSJdfQ== */\"","import { Component, OnInit, Output, EventEmitter, HostListener, Input, ChangeDetectorRef } from '@angular/core';\nimport { TimBenhNhan, ThongTinBenhNhan, SearchInfoNhaThuoc, ExportQueryInfoQueryInfo, QuayThuocGridVo } from '../quay-thuoc.model';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MatDialog } from '@angular/material';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { QuayThuocTimBenhNhanPopUpComponent } from '../quay-thuoc-tim-benh-nhan-pop-up/quay-thuoc-tim-benh-nhan-pop-up.component';\nimport { QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent } from '../quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component';\nimport { LoadingComponent } from \"src/app/shared/component/dialogs/loading/loading.component\";\nimport icFileExcel from '@iconify/icons-fa-solid/file-excel';\nimport { AuthService } from 'src/app/core/services/auth.service';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { SecurityOperation } from 'src/app/shared/enum/security-operation.enum';\nimport { CommonService } from 'src/app/core/utilities/common.helper';\nimport { SystemMessage } from 'src/app/shared/configdata/system-message';\nimport { InBangThuTienPopUpComponent } from '../in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { LocalStorageHelper } from 'src/app/core/utilities/local-storage.helper';\nimport { type } from 'os';\n\n@Component({\n  selector: 'app-quay-thuoc-tim-benh-nhan',\n  templateUrl: './quay-thuoc-tim-benh-nhan.component.html',\n  styleUrls: ['./quay-thuoc-tim-benh-nhan.component.scss']\n})\nexport class QuayThuocTimBenhNhanComponent implements OnInit {\n  documentType: DocumentType;\n  timKiem: TimBenhNhan;\n  benhNhanId: ThongTinBenhNhan;\n  quayThuocGridVo: QuayThuocGridVo;\n  validationErrors: any;\n  modelQRCode: any;\n  isScanF1: boolean = false;\n  tt111: number = 0;\n  DateTuNgay: Date = null;\n  DateDenNgay: Date = null;\n  eXportExel: boolean = false;\n  searchUuTien: boolean = true;\n  exportQueryInfoQueryInfo: ExportQueryInfoQueryInfo = new ExportQueryInfoQueryInfo();\n  public kiemTraDanhSachThanhToan: boolean = true;\n  public kiemTraDanhSachDaThanhToan: boolean = true;\n\n  @Input() typeDanhSachThanhToan: number;\n  @Input() hoquerySearch: boolean = false;\n  @Input() dataQuayThuocSearch: any;\n  @Output() dataSearch = new EventEmitter<any>();\n  @Output() onHaddlekiemTraDonThuocThanhToan = new EventEmitter<any>();\n  @Output() onHaddleeXportExel = new EventEmitter<any>();\n  @Output() onHaddleUuTienSearch = new EventEmitter<any>();\n  constructor(private apiService: ApiService, private dialog: MatDialog\n    , private router: Router,\n    private cd: ChangeDetectorRef,\n    private authService: AuthService, private notificationService: NotificationService,\n    private route: ActivatedRoute) { }\n  queRyInFoSearchNhaThuoc: SearchInfoNhaThuoc = new SearchInfoNhaThuoc();\n  // icon\n  icFileExcel = icFileExcel;\n  ngOnInit() {\n    this.documentType = DocumentType.QuayThuoc;\n    this.quayThuocGridVo = new QuayThuocGridVo();\n    this.benhNhanId = new ThongTinBenhNhan();\n    this.timKiem = new TimBenhNhan()\n    if (this.timKiem.RangeDate.startDate == null) {\n      this.DateTuNgay = new Date();\n      this.timKiem.RangeDate.startDate = this.DateTuNgay;\n    }\n    if (this.timKiem.RangeDate.endDate == null) {\n      this.DateDenNgay = new Date();\n      this.timKiem.RangeDate.endDate = this.DateDenNgay;\n    }\n\n\n    if (this.typeDanhSachThanhToan == 1) // đang thanh toán\n    {\n      this.kiemTraDanhSachThanhToan = true;\n      this.kiemTraDanhSachDaThanhToan = false;\n      this.TimkiemId(this.typeDanhSachThanhToan);\n    }\n    if (this.typeDanhSachThanhToan == 2) // đã thanh toán\n    {\n      this.kiemTraDanhSachThanhToan = false;\n      this.kiemTraDanhSachDaThanhToan = true;\n      this.TimkiemId(this.typeDanhSachThanhToan);\n    }\n    if (this.typeDanhSachThanhToan == 0) // đang thanh toán  và đãn thanh toán\n    {\n      this.kiemTraDanhSachThanhToan = true;\n      this.kiemTraDanhSachDaThanhToan = true;\n      this.TimkiemId(this.typeDanhSachThanhToan);\n    }\n    if (this.typeDanhSachThanhToan == 3) // đang thanh toán  và đãn thanh toán\n    {\n      this.kiemTraDanhSachThanhToan = false;\n      this.kiemTraDanhSachDaThanhToan = false;\n      this.TimkiemId(this.typeDanhSachThanhToan);\n    }\n    if (this.kiemTraDanhSachThanhToan == true && this.kiemTraDanhSachDaThanhToan == true) {\n      this.timKiem.KiemTraThanhToan = 0;\n      let data = this.timKiem.KiemTraThanhToan;\n    }\n    if (this.kiemTraDanhSachThanhToan == false && this.kiemTraDanhSachDaThanhToan == false) {\n      this.timKiem.KiemTraThanhToan = 3;\n      let data = this.timKiem.KiemTraThanhToan;\n      // this.onHaddlekiemTraDonThuocThanhToan.emit(data);\n      this.TimkiemId(this.typeDanhSachThanhToan);\n    }\n    this.route\n      .queryParams\n      .subscribe(v => {\n        this.timKiem.KiemTraThanhToan = v.page;\n\n      });\n    this.TimKiem(false);\n\n  }\n  TimkiemId(typeDanhSachThanhToan) {\n    var searching = LocalStorageHelper.getItem<string>(\"additionalSearchStringChiTietNhaThuoc\");\n    let KiemTraLoCalAdditonalExit;\n    if (searching != undefined && searching !== null && searching !== \"\") {\n      KiemTraLoCalAdditonalExit = JSON.parse(searching);\n      if (KiemTraLoCalAdditonalExit.MaBenhNhan != null) {\n        this.timKiem.MaBenhNhan = KiemTraLoCalAdditonalExit.MaBenhNhan;\n      }\n      if (KiemTraLoCalAdditonalExit.MaTiepNhan != null) {\n        this.timKiem.MaTiepNhan = KiemTraLoCalAdditonalExit.MaTiepNhan;\n      }\n      if (KiemTraLoCalAdditonalExit.HoTen != null) {\n        this.timKiem.HoTen = KiemTraLoCalAdditonalExit.HoTen;\n      }\n      if (KiemTraLoCalAdditonalExit.SoDienThoai != null) {\n        this.timKiem.SoDienThoai = KiemTraLoCalAdditonalExit.SoDienThoai;\n      }\n      if (KiemTraLoCalAdditonalExit.typeDanhSachThanhToan != null) {\n        this.typeDanhSachThanhToan = KiemTraLoCalAdditonalExit.typeDanhSachThanhToan;\n      }\n      if (KiemTraLoCalAdditonalExit.DateStart != null) {\n        this.timKiem.RangeDate.startDate = new Date(KiemTraLoCalAdditonalExit.DateStart);\n      }\n      else {\n        this.timKiem.RangeDate.startDate = null;\n      }\n      if (KiemTraLoCalAdditonalExit.DateEnd != null) {\n        this.timKiem.RangeDate.endDate = new Date(KiemTraLoCalAdditonalExit.DateEnd);\n      }\n      else {\n        this.timKiem.RangeDate.endDate = null;\n      }\n    }\n    if (searching == null || searching == undefined || searching == \"\") {\n      this.timKiem.MaBenhNhan = null;\n      this.timKiem.MaTiepNhan = null;\n      this.timKiem.HoTen = null;\n      this.timKiem.SoDienThoai = null;\n      this.typeDanhSachThanhToan = this.timKiem.KiemTraThanhToan;\n\n    }\n  }\n  ngOnChanges(event: any) {\n    if (event.dataQuayThuocSearch != null || event.dataQuayThuocSearch != undefined) {\n      if (event.dataQuayThuocSearch.currentValue != null || event.dataQuayThuocSearch.currentValue != undefined) {\n        this.dataQuayThuocSearch = event.dataQuayThuocSearch.currentValue;\n        if (this.dataQuayThuocSearch.Data.length > 0) {\n          if (this.dataQuayThuocSearch.Data.length == 1) {\n            \n            if (this.hoquerySearch == true) {\n              this.XemChiTiet(this.dataQuayThuocSearch.Data);\n            }\n          }\n        }\n        else {\n          if (this.hoquerySearch == true) {\n          this.searchAll();\n          }\n        }\n      }\n    }\n\n  }\n  XemChiTiet(data) {\n    if (data != null) {\n      if (data != null && data.length > 0) {\n        if (data.length == 1) {\n          //KHông có toa thuốc đang chờ thanh toán hoặc chờ xuất thuốc\n          if (this.dataQuayThuocSearch.Data[0].Id > 0) {\n            if (this.timKiem.KiemTraThanhToan == undefined) {\n              this.timKiem.KiemTraThanhToan = 3;\n            }\n            this.router.navigate(['nha-thuoc/mua-thuoc/' + data[0].Id + '/' + data[0].MaBN + '/' + data[0].TrangThai + '/' + this.timKiem.KiemTraThanhToan]);\n          }\n        }\n      }\n    }\n  }\n  searchAll() {\n    let maBenhNhanQueryString = null;\n    let maTiepNhanQueryString = null;\n    let hoTenNhanQueryString = null;\n    let sdtQueryString = null;\n    let KtraQueryString = null;\n    let KtraQueryRangeStartString = null;\n    let KtraQueryRangeEndString = null;\n\n    if (this.timKiem.MaBenhNhan != null) {\n      maBenhNhanQueryString = \"\\\"\" + this.timKiem.MaBenhNhan + \"\\\"\";\n      this.queRyInFoSearchNhaThuoc.MaBenhNhan = this.timKiem.MaBenhNhan;\n    }\n    if (this.timKiem.MaTiepNhan != null) {\n      maTiepNhanQueryString = \"\\\"\" + this.timKiem.MaTiepNhan + \"\\\"\";\n      this.queRyInFoSearchNhaThuoc.MaTiepNhan = this.timKiem.MaTiepNhan;\n    }\n    if (this.timKiem.HoTen != null) {\n      hoTenNhanQueryString = \"\\\"\" + this.timKiem.HoTen + \"\\\"\";\n      this.queRyInFoSearchNhaThuoc.HoTen = this.timKiem.HoTen;\n    }\n    if (this.timKiem.SoDienThoai != null) {\n      sdtQueryString = \"\\\"\" + this.timKiem.SoDienThoai + \"\\\"\";\n      this.queRyInFoSearchNhaThuoc.SoDienThoai = this.timKiem.SoDienThoai;\n    }\n    if (this.timKiem.KiemTraThanhToan != null) {\n      KtraQueryString = \"\\\"\" + this.timKiem.KiemTraThanhToan + \"\\\"\";\n      this.queRyInFoSearchNhaThuoc.KiemTraThanhToan = \"\\\"\" + this.timKiem.KiemTraThanhToan + \"\\\"\";\n    }\n    if (this.timKiem.RangeDate.endDate != null) {\n      KtraQueryRangeEndString = \"\\\"\" + CommonService.formatDateTime(this.timKiem.RangeDate.endDate, \"mm/dd/yyyy\") + \"\\\"\";\n    }\n    if (this.timKiem.RangeDate.startDate != null) {\n      KtraQueryRangeStartString = \"\\\"\" + CommonService.formatDateTime(this.timKiem.RangeDate.startDate, \"mm/dd/yyyy\") + \"\\\"\";\n    }\n    //\n\n    if (this.timKiem.MaBenhNhan == \"\") {\n      maBenhNhanQueryString = null;\n      this.queRyInFoSearchNhaThuoc.MaBenhNhan = \"\";\n    }\n    if (this.timKiem.MaTiepNhan == null) {\n      maTiepNhanQueryString = null;\n      this.queRyInFoSearchNhaThuoc.MaTiepNhan = \"\";\n    }\n    if (this.timKiem.HoTen == null) {\n      hoTenNhanQueryString = null;\n      this.queRyInFoSearchNhaThuoc.HoTen = \"\";\n    }\n    if (this.timKiem.SoDienThoai == null) {\n      sdtQueryString = null;\n      this.queRyInFoSearchNhaThuoc.SoDienThoai = \"\";\n    }\n    if (this.timKiem.KiemTraThanhToan == null) {\n      KtraQueryString = null;\n      this.queRyInFoSearchNhaThuoc.KiemTraThanhToan = \"\";\n    }\n    if (this.timKiem.RangeDate.startDate == null) {\n      KtraQueryRangeStartString = null;\n    }\n    if (this.timKiem.RangeDate.endDate == null) {\n      KtraQueryRangeEndString = null;\n    }\n    let dateTimeNow = new Date();\n    let queryString = \"{\\\"MaBenhNhan\\\":\" + maBenhNhanQueryString + \",\\\"MaTiepNhan\\\":\" + maTiepNhanQueryString\n      + \",\\\"HoTen\\\":\" + hoTenNhanQueryString + \",\\\"SoDienThoai\\\":\" + sdtQueryString + \",\\\"KiemTraThanhToan\\\":\" + KtraQueryString + \",\\\"DateStart\\\":\" + KtraQueryRangeStartString + \",\\\"DateEnd\\\":\" + KtraQueryRangeEndString + \"}\";\n    this.apiService.post<Array<any>>(\"QuayThuoc/TimKiemBenhNhan?search=\" + queryString).subscribe(\n      resultData => {\n        // dialogRef.close();\n        if (resultData != null && resultData.length > 0) {\n          if (resultData.length == 1) {\n            //KHông có toa thuốc đang chờ thanh toán hoặc chờ xuất thuốc\n            if (resultData[0].Id > 0) {\n              if (this.timKiem.KiemTraThanhToan == undefined) {\n                this.timKiem.KiemTraThanhToan = 3;\n              }\n              this.router.navigate(['nha-thuoc/mua-thuoc/' + resultData[0].Id + '/' + resultData[0].MaBN + '/' + resultData[0].TrangThai + '/' + this.timKiem.KiemTraThanhToan]);\n            }\n            else if (resultData[0].DonThuocThanhToanExits == true) {\n              if (this.timKiem.KiemTraThanhToan == undefined) {\n                this.timKiem.KiemTraThanhToan = 3;\n              }\n\n              this.router.navigate(['nha-thuoc/mua-toa-cu/' + resultData[0].MaBN + '/' + this.timKiem.KiemTraThanhToan]);\n            }\n          }\n          else {\n            if (resultData.length == 1) {\n              if (resultData[0].Id > 0) {\n                this.router.navigate(['nha-thuoc/mua-thuoc/' + resultData[0].Id + '/' + resultData[0].MaBN + '/' + resultData[0].TrangThai + '/' + this.timKiem.KiemTraThanhToan]);\n              }\n              else {\n                if (resultData[0].DonThuocThanhToanExits == true) {\n                  this.router.navigate(['nha-thuoc/mua-toa-cu/' + resultData[0].MaBN + '/' + this.timKiem.KiemTraThanhToan]);\n                }\n                else {\n                  let dialogRef = this.dialog.open(QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent, {\n                    disableClose: true,\n                    width: '500px',\n                    data: { Model: resultData[0], KiemTraThanhToan: this.timKiem.KiemTraThanhToan, Title: \"XÁC NHẬN\" }\n                  }).afterClosed().subscribe(result => {\n                  });\n                }\n\n              }\n            }\n            else {\n              let dialogRef = this.dialog.open(QuayThuocTimBenhNhanPopUpComponent, {\n                width: '1500px',\n                data: { Model: resultData, Title: \"Tìm kiếm người bệnh\" }\n              }).afterClosed().subscribe(result => {\n                if (typeof (result) == 'object') {\n                  this.dataSearch.emit(result);\n                }\n              });\n            }\n          }\n        } else if (resultData == null) {\n          this.notificationService.showError(\"Không có người bệnh.\");\n        }\n        else {\n          // this.notificationService.showError(\"Người bệnh này chưa có toa thuốc tại bệnh viện.\");\n          let dialogRef = this.dialog.open(QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent, {\n            disableClose: true,\n            width: '500px',\n            data: { Model: null, KiemTraThanhToan: this.timKiem.KiemTraThanhToan, TenBenhNhanSearch: this.timKiem.HoTen, SoDienThoaiSearch: this.timKiem.SoDienThoai, Title: \"XÁC NHẬN\" } // null là người bệnh không tồn tại\n          }).afterClosed().subscribe(result => {\n          });\n        }\n      },\n      (err: ApiError) => {\n\n      });\n  }\n  @HostListener('document:keydown', ['$event'])\n  keyEvent(event: KeyboardEvent) {\n    if (event.keyCode == 81 && event.ctrlKey && this.isScanF1 != true) {\n      event.preventDefault();\n      this.QuetMaQRCodeClick();\n      this.isScanF1 = true;\n    }\n    else if (event.keyCode == 81 && this.isScanF1 == true) {\n      event.preventDefault();\n    }\n  }\n  QuetMaQRCodeClick() {\n    let elementBarcode: HTMLElement = document.getElementById('barcodeActive') as HTMLElement;\n    if (elementBarcode != undefined) {\n      elementBarcode.click();\n    }\n  }\n  changeQR($event) {\n    if ($event != null && typeof $event == \"string\" && $event.endsWith(\"@\")) {\n      this.modelQRCode = $event;\n      var dataTimKiem = $event.split(\"|\");\n      if (dataTimKiem.length > 1) {\n        this.timKiem.MaBenhNhan = dataTimKiem[0];\n        this.TimKiem(true);\n      } else {\n        this.timKiem.MaTiepNhan = $event.slice(0, -1); // Mã tiếp nhận @\n        this.TimKiem(true);\n      }\n    }\n    else {\n      this.notificationService.showError(\"Không tìm thấy thông tin cần tìm.\");\n    }\n    this.isScanF1 = false;\n  }\n  onKey3(event: any) {\n    if (event.key == 'Enter') {\n    }\n  }\n  changRange(event: any) {\n  }\n  TimKiem(kiemTra:boolean) {\n    this.hoquerySearch =kiemTra;\n    var self = this;\n    var dialogRef = self.dialog.open(LoadingComponent, {\n      disableClose: true,\n      width: '200px',\n      height: '90px',\n      data: { Title: \"Đang tải dữ liệu...\" }\n    });\n    this.router.navigate(['nha-thuoc'], { queryParams: { page: this.timKiem.KiemTraThanhToan,hoQuerysearch:true} })\n    let dateTimeNow = new Date();\n    this.quayThuocGridVo.MaBenhNhan = this.timKiem.MaBenhNhan;\n    this.quayThuocGridVo.MaTiepNhan = this.timKiem.MaTiepNhan;\n    this.quayThuocGridVo.HoTen = this.timKiem.HoTen;\n    this.quayThuocGridVo.SoDienThoai = this.timKiem.SoDienThoai;\n    if (this.kiemTraDanhSachThanhToan == true && this.kiemTraDanhSachDaThanhToan == true) {\n      this.timKiem.KiemTraThanhToan = 0;\n    }\n    if (this.kiemTraDanhSachThanhToan == false && this.kiemTraDanhSachDaThanhToan == false) {\n      this.timKiem.KiemTraThanhToan = 3;\n    }\n    this.quayThuocGridVo.KiemTraThanhToan = this.timKiem.KiemTraThanhToan;\n    this.quayThuocGridVo.DieuKienLoadVaoChiTiet = true;\n    if (this.timKiem.RangeDate.endDate != null) {\n      this.quayThuocGridVo.DateEnd = CommonService.formatDate(this.timKiem.RangeDate.endDate, \"mm/dd/yyyy\")+\" 11:59 PM\";\n    }\n    else {\n      this.quayThuocGridVo.DateEnd = null;\n    }\n    if (this.timKiem.RangeDate.startDate != null) {\n      this.quayThuocGridVo.DateStart = CommonService.formatDate(this.timKiem.RangeDate.startDate, \"mm/dd/yyyy\")+\" 12:00 AM\";\n    }\n    else {\n      this.quayThuocGridVo.DateStart = null;\n    }\n    this.quayThuocGridVo.DateNow = dateTimeNow;\n    let queryStringSearchUuTien = JSON.stringify(this.quayThuocGridVo);\n    LocalStorageHelper.setItem(\"additionalSearchStringChiTietNhaThuoc\", queryStringSearchUuTien);\n    if (this.searchUuTien == true) {\n      this.onHaddleUuTienSearch.emit(queryStringSearchUuTien);\n      dialogRef.close();\n    }\n  }\n\n  KhachVangLai() { }\n  onKey(event: any) {\n    if (event.key == \"Enter\") {\n      this.TimKiem(true);\n    }\n  }\n  blurChange($event: any, isSoTheBHYT: boolean) {\n\n  }\n  shareData1() {\n    return this.benhNhanId;\n  }\n  checkTrangThai(event: any, type: number) {\n    this.cd.detectChanges();\n    if (type == 1 && event == true) {\n      this.kiemTraDanhSachThanhToan = event;\n\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: type } });\n\n    }\n    else if (type == 1 && event == false) {\n      this.kiemTraDanhSachThanhToan = false;\n    }\n    if (type == 2 && event == true) {\n      this.kiemTraDanhSachDaThanhToan = event;\n\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: type } });\n    }\n    else if (type == 2 && event == false) {\n      this.kiemTraDanhSachDaThanhToan = false;\n    }\n    if (this.kiemTraDanhSachThanhToan == true) {\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: 1 } });\n      this.timKiem.KiemTraThanhToan = 1;\n      let data = this.timKiem.KiemTraThanhToan;\n    }\n    if (this.kiemTraDanhSachDaThanhToan == true) {\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: 2 } });\n      this.timKiem.KiemTraThanhToan = 2;\n      let data = this.timKiem.KiemTraThanhToan;\n    }\n    if (this.kiemTraDanhSachThanhToan == true && this.kiemTraDanhSachDaThanhToan == true) {\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: 0 } });\n      this.timKiem.KiemTraThanhToan = 0;\n      let data = this.timKiem.KiemTraThanhToan;\n    }\n    if (this.kiemTraDanhSachThanhToan == false && this.kiemTraDanhSachDaThanhToan == false) {\n      this.router.navigate(['nha-thuoc'], { queryParams: { page: 3 } });\n      this.timKiem.KiemTraThanhToan = 3;\n      let data = this.timKiem.KiemTraThanhToan;\n    }\n    this.TimKiem(true);\n  }\n  timeoutSearchChange: any;\n\n  searchChangeMaBN(event) {\n    //xóa sreach trước đó\n    var self = this;\n    if (this.timeoutSearchChange != null) {\n      clearTimeout(this.timeoutSearchChange);\n      this.timeoutSearchChange = null;\n    }\n    this.timeoutSearchChange = setTimeout(function () {\n      if (event !== undefined && event.endsWith(\"@\")) {\n        var dataTimKiem = event.split(\"|\");\n        if (dataTimKiem.length > 1) {\n          self.timKiem.MaBenhNhan = dataTimKiem[0];\n          self.TimKiem(true);\n        } else {\n          self.timKiem.MaBenhNhan = null;\n          self.timKiem.MaTiepNhan = event.slice(0, -1);\n          self.TimKiem(true);\n        }\n      }\n    }, 100);\n  }\n  searchChangeMaTN(event) {\n    //xóa sreach trước đó\n    var self = this;\n    if (this.timeoutSearchChange != null) {\n      clearTimeout(this.timeoutSearchChange);\n      this.timeoutSearchChange = null;\n    }\n    this.timeoutSearchChange = setTimeout(function () {\n      if (event !== undefined && event.endsWith(\"@\")) {\n        var dataTimKiem = event.split(\"|\");\n        if (dataTimKiem.length > 1) {\n          self.timKiem.MaTiepNhan = dataTimKiem[0];\n          self.TimKiem(true);\n        } else {\n          self.timKiem.MaTiepNhan = null;\n          self.timKiem.MaBenhNhan = event.slice(0, -1);\n          self.TimKiem(true);\n        }\n      }\n    }, 100);\n  }\n  // EXPORT ÊXCEL\n  exportExcel() {\n    const self = this;\n    self.showPopupLoadingData();\n    let dateTimeNow = new Date();\n    this.quayThuocGridVo.MaBenhNhan = this.timKiem.MaBenhNhan;\n    this.quayThuocGridVo.MaTiepNhan = this.timKiem.MaTiepNhan;\n    this.quayThuocGridVo.HoTen = this.timKiem.HoTen;\n    this.quayThuocGridVo.SoDienThoai = this.timKiem.SoDienThoai;\n    this.quayThuocGridVo.KiemTraThanhToan = this.timKiem.KiemTraThanhToan;\n    this.quayThuocGridVo.DieuKienLoadVaoChiTiet = true;\n    if (this.timKiem.RangeDate.endDate != null) {\n      this.quayThuocGridVo.DateEnd = CommonService.formatDateTime(this.timKiem.RangeDate.endDate, \"mm/dd/yyyy\");\n    }\n    else {\n      this.quayThuocGridVo.DateEnd = null;\n    }\n    if (this.timKiem.RangeDate.startDate != null) {\n      this.quayThuocGridVo.DateStart = CommonService.formatDateTime(this.timKiem.RangeDate.startDate, \"mm/dd/yyyy\");\n    }\n    else {\n      this.quayThuocGridVo.DateStart = null;\n    }\n    this.quayThuocGridVo.DateNow = dateTimeNow;\n    let queryStringSearchUuTien = JSON.stringify(this.quayThuocGridVo);\n    self.exportQueryInfoQueryInfo.AdditionalSearchString = queryStringSearchUuTien;\n    if (self.authService.hasPermission(self.documentType, SecurityOperation.Process)) {\n      self.apiService.postExportExcel<string>('QuayThuoc/ExportDonThuocTrongNgay',\n        self.exportQueryInfoQueryInfo).subscribe(\n          resultData => {\n            self.closePopupLoadingData();\n            const dateTimeNow = new Date();\n            CommonService.downLoadFile(resultData, 'application/vnd.ms-excel',\n              'DonThuocTrongNgay' + dateTimeNow.getFullYear() + '.xlsx');\n          },\n          (err: any) => {\n            self.notificationService.showError(err.Message);\n          });\n    } else {\n      self.notificationService.showError(SystemMessage.UnAuthorizedMessage);\n    }\n  }\n  showPopupLoadingData() {\n    this.dialog.open(LoadingComponent, {\n      disableClose: true,\n      width: '200px',\n      height: '90px',\n      data: { Title: 'Đang xuất excel...' }\n    });\n  }\n\n  closePopupLoadingData() {\n    this.dialog.closeAll();\n  }\n  blur(event: any) {\n    this.TimKiem(true);\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MtdG9hLXRodW9jLWN1L3F1YXktdGh1b2MtdG9hLXRodW9jLWN1LmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\nimport { ToaThuocCuTimKiem } from '../quay-thuoc.model';\nimport { ActivatedRoute,Router } from '@angular/router';\nimport { GridComponent } from 'src/app/shared/component/grid/grid.component';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { CommonService } from 'src/app/core/utilities/common.helper';\n\n@Component({\n  selector: 'app-quay-thuoc-toa-thuoc-cu',\n  templateUrl: './quay-thuoc-toa-thuoc-cu.component.html',\n  styleUrls: ['./quay-thuoc-toa-thuoc-cu.component.scss']\n})\nexport class QuayThuocToaThuocCuComponent implements OnInit {\n  id:number=this.route.snapshot.params.id;\n  idSub:number=0;\n  donThuocToa : any[];\n  laDuocPhamBenhVien : boolean;\ntimKiemToaThuocCu:ToaThuocCuTimKiem;\ngridColumns: any[] = [];\ngridChildColumns: any[] = [];\ndonThuocId : any[]=[];\n  constructor(private route: ActivatedRoute,private router: Router,private notificationService: NotificationService) {\n   }\n  urlGetDataGridChild: string = \"QuayThuoc/GetDataForGridToaThuocCuAsync?tiepNhanId=\"+ this.id;\n  urlGetTotalPageGridChild: string = \"QuayThuoc/GetTotalPageForGridToaThuocCuAsync?tiepNhanId=\"+ this.id;\n  urlGetDataGridChild1: string = \"QuayThuoc/GetDataForGridChildAsync\"; \n  urlGetTotalPageGridChild1: string = \"QuayThuoc/GetTotalPageForGridChildAsync\";\n  @ViewChild(GridComponent, { static: true }) gridChild: GridComponent;\n  @ViewChild('detailTemplateCT', { static: true }) actionChiTietTemplate: TemplateRef<any>;\n  ngOnInit() {\n    this.idSub = this.route.snapshot.params.ttcheck;\n    this.id = this.route.snapshot.params.id;\n    this.timKiemToaThuocCu = new ToaThuocCuTimKiem();\n    this.gridColumns = [\n      { Field: \"DVKham\", Title: \"DV Khám\", Width: 200, Sortable: true },\n      { Field: \"ChuanDoan\", Title: \"Chẩn đoán\", MinWidth: 120, Sortable: true },\n      { Field: \"BacSiKham\", Title: \"BS Khám\", Width: 150, Sortable: true },\n      { Field: \"NgayKham\", Title: \"Ngày Khám\", Width: 200, Sortable: true },\n    ];\n    this.gridChildColumns = [\n      { Field: \"TenThuoc\", Title: \"Tên thuốc\", Width: 200, Sortable: true,LinkDetail:false },\n      { Field: \"HoatChat\", Title: \"Hoạt Chất\", MinWidth: 200, Sortable: true},\n      { Field: \"DVT\", Title: \"ĐVT\", Width: 150, Sortable: true},\n      { Field: \"SoLuong\", Title: \"Số lượng\", Width: 100, Sortable: true },\n      { Field: \"LaDuocPhamBenhVien\", Title: \"\", Width: 200, Template: this.actionChiTietTemplate }\n    ];\n  }\n  onKey(event: any) {\n    if (event.key == \"Enter\") {\n        this.TimKiem();\n    }\n  }\n  ConvertDateTime(datime): String {\n    var date = new Date(datime);\n    var year = date.getFullYear();\n    var rawMonth = parseInt(String(date.getMonth())) + 1;\n    var month = rawMonth < 10 ? '0' + rawMonth : rawMonth;\n    var rawDay = parseInt(String(date.getDate()));\n    var day = rawDay < 10 ? '0' + rawDay : rawDay;\n    // return day + '/' + month + '/' + year;\n    return year + '-' + month + '-' + day;\n}\n  TimKiem() {\n    let dvKhamQueryString = null;\n    let ChuanDoanQueryString = null;\n    let BSQueryString = null;\n    let ngayKhamStartQueryString = null;\n    let ngayKhamEndQueryString = null;\n\n    if (this.timKiemToaThuocCu.DVKhamHienThi != null) {\n      dvKhamQueryString = \"\\\"\" + this.timKiemToaThuocCu.DVKhamHienThi + \"\\\"\";\n    }\n    if (this.timKiemToaThuocCu.ChuanDoan != null) {\n      ChuanDoanQueryString = \"\\\"\" + this.timKiemToaThuocCu.ChuanDoan + \"\\\"\";\n    }\n    if (this.timKiemToaThuocCu.BSKham != null) {\n      BSQueryString = \"\\\"\" + this.timKiemToaThuocCu.BSKham + \"\\\"\";\n    }\n    if (this.timKiemToaThuocCu.RangeDate.startDate != null) {\n      ngayKhamStartQueryString = \"\\\"\" + CommonService.formatDateTime(this.timKiemToaThuocCu.RangeDate.startDate, \"mm/dd/yyyy\") + \"\\\"\";\n    }\n    if (this.timKiemToaThuocCu.RangeDate.endDate != null) {\n      ngayKhamEndQueryString = \"\\\"\" + CommonService.formatDateTime(this.timKiemToaThuocCu.RangeDate.endDate, \"mm/dd/yyyy\") + \"\\\"\";\n    }\n\n    let queryString = \"{\\\"DVKham\\\":\" + dvKhamQueryString + \",\\\"ChuanDoan\\\":\" + ChuanDoanQueryString\n    + \",\\\"BacSi\\\":\" + BSQueryString + \",\\\"DateStart\\\":\" + ngayKhamStartQueryString + \",\\\"DateEnd\\\":\" + ngayKhamEndQueryString + \"}\";\n    this.gridChild._additionalSearchString = queryString;\n    this.gridChild.search();\n  }\n  extCheckboxSelection(event: any)\n  {\n    this.donThuocId = event;\n  }\n  ChonThuoc(){\n    //this.router.navigate(['quay-thuoc/mua-thuoc/'+ this.id +'/' + 0 + '/1/'],this.donThuocId);\n    if(this.donThuocId.length == 0){\n      this.notificationService.showError(\"Bạn chưa chọn toa thuốc.\")\n    }\n    else{\n      this.router.navigate(['/nha-thuoc/khach-vang-lai'], { queryParams: { ToaThuoc: this.donThuocId,maBN: this.id,ttCheck:this.idSub} }); // idSub là trạng thái check\n    }\n    \n  }\n  Huy(){\n    this.router.navigate(['nha-thuoc']);\n  }\n  onKey3(event: any) {\n    if (event.key == 'Enter') {\n      // this.TimKiem();\n    }\n  }\n  changRange(event: any) {\n    // this.TimKiem();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MteGFjLW5oYW4taW4tcG9wLXVwL3F1YXktdGh1b2MteGFjLW5oYW4taW4tcG9wLXVwLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Optional, Inject} from '@angular/core';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ConfirmPrint } from '../quay-thuoc.model';\n\n@Component({\n  selector: 'app-quay-thuoc-xac-nhan-in-pop-up',\n  templateUrl: './quay-thuoc-xac-nhan-in-pop-up.component.html',\n  styleUrls: ['./quay-thuoc-xac-nhan-in-pop-up.component.scss']\n})\nexport class QuayThuocXacNhanInPopUpComponent implements OnInit {\n  thongTin: ConfirmPrint;\n  Title: any = null;\n  constructor(private dialogRef: MatDialogRef<QuayThuocXacNhanInPopUpComponent>, @Optional() @Inject(MAT_DIALOG_DATA) public dataItem: any) {\n    this.thongTin = new ConfirmPrint();\n    this.thongTin.TaiKhoanBenhNhanThuId = dataItem.Model.TaiKhoanBenhNhanThuId\n    this.Title = dataItem.Title\n  }\n\n  ngOnInit() {\n  }\n  close(answer: any) {\n    this.thongTin.Response = answer;\n    this.dialogRef.close(this.thongTin);\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MteGFjLW5oYW4tbXVhLXRodW9jLWtoYWNoLXZhbmctbGFpLXBvcC11cC9xdWF5LXRodW9jLXhhYy1uaGFuLW11YS10aHVvYy1raGFjaC12YW5nLWxhaS1wb3AtdXAuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Optional, Inject } from '@angular/core';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ConfirmPrint } from '../quay-thuoc.model';\nimport { Router } from '@angular/router';\nimport data from '@iconify/icons-ic/twotone-keyboard-voice';\n\n@Component({\n  selector: 'app-quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up',\n  templateUrl: './quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component.html',\n  styleUrls: ['./quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component.scss']\n})\nexport class QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent implements OnInit {\n  thongTin: ConfirmPrint;\n  Title: any = null;\n  typeDanhSachThanhToan: number;\n  constructor(private dialogRef: MatDialogRef<QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent>, @Optional() @Inject(MAT_DIALOG_DATA) public dataItem: any, private router: Router) {\n    this.Title = dataItem.Title\n    this.typeDanhSachThanhToan = dataItem.KiemTraThanhToan;\n  }\n\n  ngOnInit() {\n  }\n  close(answer: any) {\n    if (answer == 1) {\n      this.dialogRef.close();\n    }\n    else {\n      if (this.dataItem.Model != null) {\n        this.router.navigate(['nha-thuoc/khach-vang-lai'], { queryParams: { page: this.typeDanhSachThanhToan, maBN: this.dataItem.Model.MaBN } });\n        this.dialogRef.close();\n      }\n      else {\n        if (this.dataItem.TenBenhNhanSearch != null && this.dataItem.SoDienThoaiSearch != null) {\n          this.router.navigate(['nha-thuoc/khach-vang-lai'], { queryParams: { page: this.typeDanhSachThanhToan, TenBenhNhan: this.dataItem.TenBenhNhanSearch, SDT: this.dataItem.SoDienThoaiSearch } });\n        } else if (this.dataItem.TenBenhNhanSearch != null  && this.dataItem.SoDienThoaiSearch == null) {\n          this.router.navigate(['nha-thuoc/khach-vang-lai'], { queryParams: { page: this.typeDanhSachThanhToan, TenBenhNhan: this.dataItem.TenBenhNhanSearch } });\n        }\n        else {\n          this.router.navigate(['nha-thuoc/khach-vang-lai'], { queryParams: { page: this.typeDanhSachThanhToan, SDT: this.dataItem.SoDienThoaiSearch } });\n        }\n        this.dialogRef.close();\n      }\n    }\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3F1YXktdGh1b2MteGFjLW5oYW4tcG9wLXVwL3F1YXktdGh1b2MteGFjLW5oYW4tcG9wLXVwLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Optional, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport icClose from '@iconify/icons-ic/twotone-close';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n    selector: 'app-quay-thuoc-xac-nhan-pop-up',\n    templateUrl: './quay-thuoc-xac-nhan-pop-up.component.html',\n    styleUrls: ['./quay-thuoc-xac-nhan-pop-up.component.scss']\n})\n\nexport class QuayThuocXacNhanPopUpComponent implements OnInit {\n    Title: any = null;\n    soTien: number = 0;\n    tenBenhNhan: string = null;\n    dataSourcedanhsachThuoc: any = {\n        data: [],\n        total: 0\n    }\n    icClose = icClose;\n\n    constructor(private route: ActivatedRoute, private dialogRef: MatDialogRef<QuayThuocXacNhanPopUpComponent>, @Optional() @Inject(MAT_DIALOG_DATA) public dataItem: any) {\n        this.dataSourcedanhsachThuoc.data = dataItem.Model.DanhSachDonThuocs\n        this.soTien = dataItem.Model.DanhSachDonThuocs.reduce((sum, item) => sum + item.BNConPhaiThanhToan, 0);\n        this.tenBenhNhan = dataItem.Model.HoTenBenhNhan;\n        this.Title = dataItem.Title\n    }\n\n    ngOnInit() {\n    }\n\n    close(answer: any) {\n        this.dialogRef.close(answer);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { QuayThuocRoutingModule } from './quay-thuoc-routing.module';\nimport { QuayThuocTimBenhNhanComponent } from './quay-thuoc-tim-benh-nhan/quay-thuoc-tim-benh-nhan.component';\nimport { BaseService } from 'src/app/core/services/base.service';\nimport { PageLayoutModule } from 'src/@vex/components/page-layout/page-layout.module';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { BreadcrumbsModule } from 'src/@vex/components/breadcrumbs/breadcrumbs.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TooltipModule } from '@progress/kendo-angular-tooltip';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { MatIconModule, MatMenuModule, MatButtonToggleModule, MatTooltipModule, MatButtonModule, MatDialogModule, MatCheckboxModule, MatRadioModule } from '@angular/material';\nimport { IconModule } from '@visurel/iconify-angular';\nimport { LayoutModule } from '@progress/kendo-angular-layout';\nimport { MatInputModule, MatOptionModule, MatSelectModule, MatTabsModule } from '@angular/material';\nimport { GridModule } from '@progress/kendo-angular-grid';\nimport { QuayThuocTimBenhNhanPopUpComponent } from './quay-thuoc-tim-benh-nhan-pop-up/quay-thuoc-tim-benh-nhan-pop-up.component';\nimport { QuayThuocChoThanhToanComponent } from './quay-thuoc-cho-thanh-toan/quay-thuoc-cho-thanh-toan.component';\nimport { QuayThuocMuaThuocComponent } from './quay-thuoc-mua-thuoc/quay-thuoc-mua-thuoc.component';\nimport { QuayThuocListComponent } from './quay-thuoc-list/quay-thuoc-list.component';\nimport { QuayThuocThongTinHanhChinhComponent } from './quay-thuoc-thong-tin-hanh-chinh/quay-thuoc-thong-tin-hanh-chinh.component';\nimport { QuayThuocToaThuocCuComponent } from './quay-thuoc-toa-thuoc-cu/quay-thuoc-toa-thuoc-cu.component';\nimport { QuayThuocThongTinBaoHiemTuNhanComponent } from './quay-thuoc-thong-tin-bao-hiem-tu-nhan/quay-thuoc-thong-tin-bao-hiem-tu-nhan.component';\nimport { QuayThuocHinhThucThanhToanComponent } from './quay-thuoc-hinh-thuc-thanh-toan/quay-thuoc-hinh-thuc-thanh-toan.component';\nimport { QuayThuocXacNhanPopUpComponent } from './quay-thuoc-xac-nhan-pop-up/quay-thuoc-xac-nhan-pop-up.component';\nimport { QuayThuocXacNhanInPopUpComponent } from './quay-thuoc-xac-nhan-in-pop-up/quay-thuoc-xac-nhan-in-pop-up.component';\nimport { QuayThuocChoXuatThuocComponent } from './quay-thuoc-cho-xuat-thuoc/quay-thuoc-cho-xuat-thuoc.component';\nimport { InBangThuTienPopUpComponent } from './in-bang-thu-tien-pop-up/in-bang-thu-tien-pop-up.component';\nimport { QuayThuocKhachVangLaiComponent } from './quay-thuoc-khach-vang-lai/quay-thuoc-khach-vang-lai.component';\nimport { QuayThuocKhachVangLaiChoThanhToanComponent } from './quay-thuoc-khach-vang-lai-cho-thanh-toan/quay-thuoc-khach-vang-lai-cho-thanh-toan.component';\nimport { QuayThuocKhachVangLaiChoXuatThuocComponent } from './quay-thuoc-khach-vang-lai-cho-xuat-thuoc/quay-thuoc-khach-vang-lai-cho-xuat-thuoc.component';\nimport { QuayThuocKhachVangLaiThongTinHanhChinhComponent } from './quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh/quay-thuoc-khach-vang-lai-thong-tin-hanh-chinh.component';\nimport { QuayThuocService } from './quay-thuoc.service';\nimport { QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent } from './quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up/quay-thuoc-xac-nhan-mua-thuoc-khach-vang-lai-pop-up.component';\nimport { InDonThuocPopUpComponent } from './in-don-thuoc-pop-up/in-don-thuoc-pop-up.component';\nimport { ApDungMiemGiamThemPopupComponent } from './ap-dung-miem-giam-them-popup/ap-dung-miem-giam-them-popup.component';\nimport { ApDungMiemGiamChoTungLoaiThuocPopupComponent } from './ap-dung-miem-giam-cho-tung-loai-thuoc-popup/ap-dung-miem-giam-cho-tung-loai-thuoc-popup.component';\nimport { ThongTinPhieuPdfPopupComponent } from './thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { ThongTinPhieuThuThuoc } from './thong-tin-phieu-da-thu/thong-tin-phieu-da-thu.component';\nimport { XacNhanHuyThuComponent } from './xac-nhan-phieu-huy-thu/xac-nhan-phieu-huy-thu.component';\nimport { XacNhanHuyThuBanThuocComponent } from './xac-nhan-phieu-huy-thu-ban-thuoc/xac-nhan-phieu-huy-thu-ban-thuoc.component';\n\n@NgModule({\n  declarations: [\n    QuayThuocTimBenhNhanComponent,\n    QuayThuocTimBenhNhanPopUpComponent,\n    QuayThuocChoThanhToanComponent, QuayThuocMuaThuocComponent,\n    QuayThuocListComponent,\n    QuayThuocThongTinHanhChinhComponent,\n    QuayThuocToaThuocCuComponent,\n    QuayThuocThongTinBaoHiemTuNhanComponent,\n    QuayThuocHinhThucThanhToanComponent,\n    QuayThuocXacNhanPopUpComponent,\n    QuayThuocXacNhanInPopUpComponent,\n    QuayThuocChoXuatThuocComponent,\n    InBangThuTienPopUpComponent,\n    QuayThuocKhachVangLaiComponent,\n    QuayThuocKhachVangLaiChoThanhToanComponent,\n    QuayThuocKhachVangLaiChoXuatThuocComponent,\n    QuayThuocKhachVangLaiThongTinHanhChinhComponent,\n    QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent,\n    InDonThuocPopUpComponent,\n    ApDungMiemGiamThemPopupComponent,\n    ApDungMiemGiamChoTungLoaiThuocPopupComponent,\n    ThongTinPhieuPdfPopupComponent,\n    ThongTinPhieuThuThuoc,\n    XacNhanHuyThuComponent ,\n    XacNhanHuyThuBanThuocComponent   \n  ],\n  imports: [\n    CommonModule,\n    QuayThuocRoutingModule,\n    ReactiveFormsModule,\n    MatInputModule, MatOptionModule, MatSelectModule,\n    MatTabsModule,\n    PageLayoutModule,\n    FlexLayoutModule,\n    BreadcrumbsModule,\n    FormsModule,\n    TooltipModule,\n    SharedModule,\n    MatIconModule,\n    IconModule,\n    MatMenuModule,\n    MatButtonToggleModule,\n    MatTooltipModule,\n    MatButtonModule,\n    LayoutModule,\n    MatDialogModule,\n    MatCheckboxModule,\n    GridModule,\n    MatRadioModule,\n  ], entryComponents: [\n    ApDungMiemGiamChoTungLoaiThuocPopupComponent,\n    ApDungMiemGiamThemPopupComponent,\n    InDonThuocPopUpComponent,\n    QuayThuocTimBenhNhanPopUpComponent,\n    QuayThuocXacNhanPopUpComponent,\n    QuayThuocXacNhanInPopUpComponent,\n    InBangThuTienPopUpComponent,\n    QuayThuocXacNhanMuaThuocKhachVangLaiPopUpComponent,\n    ThongTinPhieuPdfPopupComponent,\n    XacNhanHuyThuComponent,\n    XacNhanHuyThuBanThuocComponent\n  ],\n  providers: [\n    QuayThuocService,\n    { provide: BaseService, useClass: QuayThuocService },\n  ]\n})\nexport class QuayThuocModule { }\n","import { Injectable } from '@angular/core';\nimport { BaseService } from 'src/app/core/services/base.service';\nimport { ApiService } from 'src/app/core/services/api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class QuayThuocService extends BaseService {\n\n  constructor(apiService: ApiService) { \n    super(apiService);\n  }\n}\n","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 500px;\\n  background: #ebeced;\\n}\\n\\n.container-iframe iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.size-icon {\\n  display: inline-block;\\n  height: 20px;\\n  width: 20px;\\n  line-height: 20px;\\n  border-radius: 10px;\\n  background-color: green;\\n  color: #fff;\\n  text-align: center;\\n}\\n\\n.size-icon-duoc-bhyt {\\n  display: inline-block;\\n  height: 14px;\\n  width: 14px;\\n  line-height: 20px;\\n  border-radius: 7px;\\n  background-color: green;\\n  color: #fff;\\n  text-align: center;\\n  right: -4px;\\n  top: 6px;\\n  margin: 0;\\n}\\n\\n.float_right {\\n  float: right;\\n}\\n\\n.color-green {\\n  color: green;\\n}\\n\\n.color-red {\\n  color: red;\\n}\\n\\n.reverse-ellipsis.r {\\n  text-align: right;\\n  direction: inherit;\\n}\\n\\n.yellowText {\\n  color: yellowgreen;\\n}\\n\\n.redText {\\n  color: red;\\n}\\n\\n.greenText {\\n  color: green;\\n}\\n\\n.orangeText {\\n  color: orange;\\n}\\n\\n.blueText {\\n  color: blue;\\n}\\n\\n.blackText {\\n  color: black;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvdGhvbmctdGluLXBoaWV1LWRhLXRodS9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHRob25nLXRpbi1waGlldS1kYS10aHVcXHRob25nLXRpbi1waGlldS1kYS10aHUuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3Rob25nLXRpbi1waGlldS1kYS10aHUvdGhvbmctdGluLXBoaWV1LWRhLXRodS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQ0NGOztBREVBO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxxQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFFQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSxxQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFFQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxVQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtBQ0NGOztBREVBO0VBQ0UsVUFBQTtBQ0NGOztBREVBO0VBQ0UsWUFBQTtBQ0NGOztBREVBO0VBQ0UsYUFBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtBQ0NGOztBREVBO0VBQ0UsWUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvdGhvbmctdGluLXBoaWV1LWRhLXRodS90aG9uZy10aW4tcGhpZXUtZGEtdGh1LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lci1pZnJhbWUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDUwMHB4O1xuICBiYWNrZ3JvdW5kOiAjZWJlY2VkO1xufVxuXG4uY29udGFpbmVyLWlmcmFtZSBpZnJhbWUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLnNpemUtaWNvbiB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgaGVpZ2h0OiAyMHB4O1xuICB3aWR0aDogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5zaXplLWljb24tZHVvYy1iaHl0IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBoZWlnaHQ6IDE0cHg7XG4gIHdpZHRoOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDdweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHJpZ2h0OiAtNHB4O1xuICB0b3A6IDZweDtcbiAgbWFyZ2luOiAwO1xufVxuXG4uZmxvYXRfcmlnaHQge1xuICBmbG9hdDogcmlnaHQ7XG59XG5cbi5jb2xvci1ncmVlbiB7XG4gIGNvbG9yOiBncmVlbjtcbn1cblxuLmNvbG9yLXJlZCB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5yZXZlcnNlLWVsbGlwc2lzLnIge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgZGlyZWN0aW9uOiBpbmhlcml0O1xufVxuXG4ueWVsbG93VGV4dCB7XG4gIGNvbG9yOiB5ZWxsb3dncmVlbjtcbn1cblxuLnJlZFRleHQge1xuICBjb2xvcjogcmVkO1xufVxuXG4uZ3JlZW5UZXh0IHtcbiAgY29sb3I6IGdyZWVuO1xufVxuXG4ub3JhbmdlVGV4dCB7XG4gIGNvbG9yOiBvcmFuZ2U7XG59XG5cbi5ibHVlVGV4dCB7XG4gIGNvbG9yOiBibHVlO1xufVxuXG4uYmxhY2tUZXh0IHtcbiAgY29sb3I6IGJsYWNrO1xufSIsIi5jb250YWluZXItaWZyYW1lIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiA1MDBweDtcbiAgYmFja2dyb3VuZDogI2ViZWNlZDtcbn1cblxuLmNvbnRhaW5lci1pZnJhbWUgaWZyYW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5zaXplLWljb24ge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGhlaWdodDogMjBweDtcbiAgd2lkdGg6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZWVuO1xuICBjb2xvcjogI2ZmZjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uc2l6ZS1pY29uLWR1b2MtYmh5dCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgaGVpZ2h0OiAxNHB4O1xuICB3aWR0aDogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3JkZXItcmFkaXVzOiA3cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZWVuO1xuICBjb2xvcjogI2ZmZjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICByaWdodDogLTRweDtcbiAgdG9wOiA2cHg7XG4gIG1hcmdpbjogMDtcbn1cblxuLmZsb2F0X3JpZ2h0IHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG4uY29sb3ItZ3JlZW4ge1xuICBjb2xvcjogZ3JlZW47XG59XG5cbi5jb2xvci1yZWQge1xuICBjb2xvcjogcmVkO1xufVxuXG4ucmV2ZXJzZS1lbGxpcHNpcy5yIHtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGRpcmVjdGlvbjogaW5oZXJpdDtcbn1cblxuLnllbGxvd1RleHQge1xuICBjb2xvcjogeWVsbG93Z3JlZW47XG59XG5cbi5yZWRUZXh0IHtcbiAgY29sb3I6IHJlZDtcbn1cblxuLmdyZWVuVGV4dCB7XG4gIGNvbG9yOiBncmVlbjtcbn1cblxuLm9yYW5nZVRleHQge1xuICBjb2xvcjogb3JhbmdlO1xufVxuXG4uYmx1ZVRleHQge1xuICBjb2xvcjogYmx1ZTtcbn1cblxuLmJsYWNrVGV4dCB7XG4gIGNvbG9yOiBibGFjaztcbn0iXX0= */\"","import { Component, OnInit, Inject, Input } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\nimport icClose from '@iconify/icons-ic/twotone-close';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NotificationService } from 'src/app/core/services/notification.service';\nimport { ApiService } from 'src/app/core/services/api.service';\nimport { AuthService } from 'src/app/core/services/auth.service';\nimport { LoadingComponent } from 'src/app/shared/component/dialogs/loading/loading.component';\nimport { ThongTinHuyPhieu, ThongTinSoPhieuDaThu, TrangThaiThuTienBenhNhan } from '../quay-thuoc.model';\nimport icEdit from \"@iconify/icons-ic/twotone-edit\";\nimport { ApiError } from 'src/app/shared/models/api-error.model';\nimport { XacNhanHuyThuComponent } from '../xac-nhan-phieu-huy-thu/xac-nhan-phieu-huy-thu.component';\nimport { ThongTinPhieuPdfPopupComponent } from '../thong-tin-phieu-pdf-popup/thong-tin-phieu-pdf-popup.component';\nimport { XacNhanInViewModel } from '../lich-su-quay-thuoc/lich-su-quay-thuoc.model';\nimport { SecurityOperation } from 'src/app/shared/enum/security-operation.enum';\nimport { DocumentType } from 'src/app/shared/enum/document-type.enum';\n@Component({\n    selector: 'app-thong-tin-phieu-da-thu',\n    templateUrl: './thong-tin-phieu-da-thu.component.html',\n    styleUrls: ['./thong-tin-phieu-da-thu.component.scss']\n})\nexport class ThongTinPhieuThuThuoc implements OnInit {\n    @Input() yeuCauTiepNhanId: number;\n    hostingName: string;\n    src = '';\n    icClose = icClose;\n    public icEdit = icEdit;\n    InPhieuThu: boolean;\n    InBangKe: boolean;\n    loaiPhieu: any;\n    kiemtraPhieuInManhinh: boolean = false;\n    public dataSoPhieus: any;\n    confrim: any = null;\n    thongTinSoPhieuDaThu = new ThongTinSoPhieuDaThu();\n    trangThaiThuTienBenhNhan = new TrangThaiThuTienBenhNhan();\n    documentType: DocumentType;\n\n    constructor(private route: ActivatedRoute,\n        private notificationService: NotificationService,\n        private apiService: ApiService,\n        private authService: AuthService,\n        private router: Router,\n        private dialog: MatDialog) { }\n\n\n    ngOnInit() {\n        this.getThongSoPhieu();\n    }\n\n    public total(field: any) {\n        switch (field) {\n            case 'ThanhTien':\n                return this.thongTinSoPhieuDaThu.DanhSachThuPhis\n                    .reduce((sum, item) => sum + item.ThanhTien, 0);\n            case 'BHYTThanhToan':\n                return this.thongTinSoPhieuDaThu.DanhSachThuPhis\n                    .reduce((sum, item) => sum + item.BHYTThanhToan, 0);\n            case 'TongCongNo':\n                return this.thongTinSoPhieuDaThu.DanhSachThuPhis\n                    .reduce((sum, item) => sum + item.TongCongNo, 0);\n            case 'SoTienMG':\n                return this.thongTinSoPhieuDaThu.DanhSachThuPhis\n                    .reduce((sum, item) => sum + item.SoTienMG, 0);\n            case 'DaThanhToan':\n                return this.thongTinSoPhieuDaThu.DanhSachThuPhis\n                    .reduce((sum, item) => sum + item.DaThanhToan, 0);\n        }\n    }\n\n    getThongSoPhieu() {\n        this.apiService.post<any>(\"QuayThuoc/GetSoPhieuQuayThuoc/\" + this.yeuCauTiepNhanId).subscribe(resultData => {\n            if (resultData !== undefined && resultData !== null) {\n                this.dataSoPhieus = resultData;\n                if (resultData.length > 0) {\n                    this.xemThongTinPhieu(resultData[0].KeyId);\n                }\n            }\n        });\n    }\n\n    xemThongTinPhieu(keyId: any) {\n        let loading = this.dialog.open(LoadingComponent, {\n            disableClose: true,\n            width: \"200px\",\n            height: \"90px\",\n            data: {},\n        });\n        this.apiService.get<ThongTinSoPhieuDaThu>(\"QuayThuoc/GetThongTinPhieuThu/\" + keyId).subscribe(resultData => {\n            if (resultData !== undefined && resultData !== null) {\n                this.thongTinSoPhieuDaThu = resultData;\n                this.thongTinSoPhieuDaThu.SoPhieuId = keyId;\n                this.thongTinSoPhieuDaThu.TenSoPhieu = resultData.SoPhieu;\n                loading.close();\n            }\n        });\n    }\n\n    selectionChangeSoPhieu(event: any) {\n        if (event != undefined && event != null) {\n            this.thongTinSoPhieuDaThu.SoPhieuId = event.KeyId;\n            this.thongTinSoPhieuDaThu.LoaiPhieu = event.LoaiPhieu;\n            this.thongTinSoPhieuDaThu.TinhTrang = event.TinhTrang;\n            this.thongTinSoPhieuDaThu.LoaiPhieuThuChiThuNgan = event.LoaiPhieuThuChiThuNgan;\n            this.xemThongTinPhieu(event.KeyId);\n        } else {\n            this.thongTinSoPhieuDaThu = new ThongTinSoPhieuDaThu();\n        }\n    }\n\n    huyPhieuThu(thongTinSoPhieuDaThu: any, thuHoiPhieu: any) {\n        let thongTinHuyPhieu = new ThongTinHuyPhieu();\n        thongTinHuyPhieu.SoPhieu = thongTinSoPhieuDaThu.Id;\n        thongTinHuyPhieu.TenPhieuThuChi = thongTinSoPhieuDaThu.LoaiPhieu;\n        thongTinHuyPhieu.TenSoPhieu = this.thongTinSoPhieuDaThu.TenSoPhieu;\n        thongTinHuyPhieu.LoaiPhieuThuChiThuNgan = this.thongTinSoPhieuDaThu.LoaiPhieuThuChiThuNgan;\n\n        let loaiType = true;\n        this.dialog\n            .open(XacNhanHuyThuComponent, { disableClose: true, width: \"800px\", data: { thongTinHuyPhieu, thuHoiPhieu, loaiType } })\n            .afterClosed()\n            .subscribe(resultData => {\n                if (resultData != undefined && resultData !== null && resultData !== \"\") {\n                    this.getThongSoPhieu();\n                    this.notificationService.showSuccess(\"Hủy phiếu thu thành công.\");\n                }\n            },\n                (err: ApiError) => {\n                    if (err.Message != \"Validation Failed\") {\n                        this.notificationService.showError(err.Message);\n                    }\n                });\n    }\n\n    phieuIn() {\n        const self = this;\n        const hosting = window.location.protocol + '//' + window.location.host;\n        let xacNhanInData = new XacNhanInViewModel();\n        xacNhanInData = {\n            TaiKhoanBenhNhanThuId: this.thongTinSoPhieuDaThu.SoPhieuId,\n            Hosting: hosting,\n            InBangKe: false,\n            InPhieuThu: true,\n        };\n        self.apiService.postExportPdf<any>('QuayThuoc/XacNhanIn', xacNhanInData).subscribe(\n            resultData => {\n                // var arrHtml = [{\n                //     Html: resultData,\n                //     TenFile: \"InPhieuThu\",\n                //     PageSize: \"A4\",\n                //     PageOrientation: \"Landscape\",\n                // }];\n                self.dialog.open(ThongTinPhieuPdfPopupComponent, {\n                    disableClose: true,\n                    width: '1000px',\n                    data: { Model: resultData }\n                }).afterClosed().subscribe(() => { });\n            });\n    }\n}\n","export default \".container-iframe {\\n  position: relative;\\n  width: 100%;\\n  height: 550px;\\n}\\n\\n.container-iframe iframe {\\n  margin-bottom: 10px;\\n  -webkit-backface-visibility: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL3F1YXktdGh1b2MvdGhvbmctdGluLXBoaWV1LXBkZi1wb3B1cC9DOlxccHJvamVjdFxcZnJlZWxhbmNlclxcaG9zcGl0YWwvc3JjXFxhcHBcXG1vZHVsZXNcXG1haW5cXHF1YXktdGh1b2NcXHRob25nLXRpbi1waGlldS1wZGYtcG9wdXBcXHRob25nLXRpbi1waGlldS1wZGYtcG9wdXAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3Rob25nLXRpbi1waGlldS1wZGYtcG9wdXAvdGhvbmctdGluLXBoaWV1LXBkZi1wb3B1cC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7QUNDRjs7QURFQTtFQUNFLG1CQUFBO0VBQ0EsbUNBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3Rob25nLXRpbi1waGlldS1wZGYtcG9wdXAvdGhvbmctdGluLXBoaWV1LXBkZi1wb3B1cC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXItaWZyYW1lIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiA1NTBweDtcbn1cblxuLmNvbnRhaW5lci1pZnJhbWUgaWZyYW1lIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG59IiwiLmNvbnRhaW5lci1pZnJhbWUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDU1MHB4O1xufVxuXG4uY29udGFpbmVyLWlmcmFtZSBpZnJhbWUge1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn0iXX0= */\"","import { Component, Inject, OnInit } from \"@angular/core\";\nimport { MatDialog, MAT_DIALOG_DATA } from \"@angular/material\";\nimport icClose from \"@iconify/icons-ic/twotone-close\";\nimport { ApiService } from \"src/app/core/services/api.service\";\nimport { NotificationService } from \"src/app/core/services/notification.service\";\nimport { CommonService } from \"src/app/core/utilities/common.helper\";\nimport { LoadingComponent } from \"src/app/shared/component/dialogs/loading/loading.component\";\nimport { ApiError } from \"src/app/shared/models/api-error.model\";\n\n@Component({\n\tselector: \"thong-tin-phieu-pdf-popup\",\n\ttemplateUrl: \"./thong-tin-phieu-pdf-popup.component.html\",\n\tstyleUrls: [\"./thong-tin-phieu-pdf-popup.component.scss\"],\n})\nexport class ThongTinPhieuPdfPopupComponent implements OnInit {\n\ticClose = icClose;\n\tarrFilePdf: Array<any> = [];\n\tarrFileUrl: Array<any> = [];\n\tpopupLoadingData: any;\n\n\tconstructor(@Inject(MAT_DIALOG_DATA) public data: any, private apiService: ApiService, private dialog: MatDialog, private notificationService: NotificationService) { }\n\n\tngOnInit() {\n\t\tthis.getALlFilePDFFromHtml(this.data.Model);\n\t}\n\n\tgetALlFilePDFFromHtml(arrHtml) {\n\t\tthis.showPopupLoadingData();\n\t\tlet newBlob = new Blob([arrHtml], { type: \"application/pdf\" });\n\t\tlet datalocalURL = window.URL.createObjectURL(newBlob);\n\t\tthis.arrFileUrl.push(datalocalURL);\n\t\tthis.arrFilePdf.push(arrHtml);\n\t\tthis.closePopupLoadingData();\n\t}\n\n\tdownloadAllFile() {\n\t\tconst dateTimeNow = new Date();\n\t\tthis.arrFilePdf.forEach((file) => {\n\t\t\tCommonService.downLoadFile(file, \"application/pdf\", \"PhieuThuNgan\" + dateTimeNow.getFullYear() + \".pdf\");\n\t\t});\n\t}\n\n\tshowPopupLoadingData() {\n\t\tif (this.popupLoadingData == undefined || this.popupLoadingData == null || this.popupLoadingData.openDialogs == undefined || (this.popupLoadingData.openDialogs != undefined && this.popupLoadingData.openDialogs.length == 0)) {\n\t\t\tthis.popupLoadingData = this.dialog.open(LoadingComponent, {\n\t\t\t\tdisableClose: true,\n\t\t\t\twidth: \"200px\",\n\t\t\t\theight: \"90px\",\n\t\t\t\tdata: { Title: \"Đang tải dữ liệu...\" },\n\t\t\t});\n\t\t}\n\t}\n\n\tclosePopupLoadingData() {\n\t\tif (this.popupLoadingData != undefined && this.popupLoadingData != null) {\n\t\t\tthis.popupLoadingData.close();\n\t\t}\n\t}\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3hhYy1uaGFuLXBoaWV1LWh1eS10aHUtYmFuLXRodW9jL3hhYy1uaGFuLXBoaWV1LWh1eS10aHUtYmFuLXRodW9jLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Inject } from \"@angular/core\";\nimport icClose from \"@iconify/icons-ic/twotone-close\";\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from \"@angular/material\";\nimport { ApiService } from \"src/app/core/services/api.service\";\nimport { ApiError } from \"src/app/shared/models/api-error.model\";\nimport { NotificationService } from \"src/app/core/services/notification.service\";\nimport { LoadingComponent } from \"src/app/shared/component/dialogs/loading/loading.component\";\nimport { DocumentType } from \"src/app/shared/enum/document-type.enum\";\nimport { AuthService } from \"src/app/core/services/auth.service\";\nimport { HuyXuatThuocTrongNgay } from \"../quay-thuoc.model\";\n\n\n@Component({\n\tselector: \"app-xac-nhan-phieu-huy-thu-ban-thuoc\",\n\ttemplateUrl: \"./xac-nhan-phieu-huy-thu-ban-thuoc.component.html\",\n\tstyleUrls: [\"./xac-nhan-phieu-huy-thu-ban-thuoc.component.scss\"],\n})\n\nexport class XacNhanHuyThuBanThuocComponent implements OnInit {\n\tloadingPopup: any;\n\tdocumentType: DocumentType = DocumentType.QuayThuoc;\n\thuyXuatThuocTrongNgay = new HuyXuatThuocTrongNgay();\n\n\tvalidationErrors: any[];\n\ticClose = icClose;\n\n\tconstructor(@Inject(MAT_DIALOG_DATA) public data: any,\n\t\tprivate dialogRef: MatDialogRef<any>,\n\t\tprivate authService: AuthService, private dialog: MatDialog,\n\t\tprivate notificationService: NotificationService,\n\t\tprivate apiService: ApiService) { }\n\n\tngOnInit() {\n\t\tthis.huyXuatThuocTrongNgay = this.data.huyXuatThuocTrongNgay;\n\t}\n\n\tmodelChangeThuHoiPhieu(e: any) {\n\t\tif (e) {\n\t\t\tlet currentUser = this.authService.getAccessUser();\n\t\t\tthis.apiService.get<any>(\"NhanVien/GetNhanVienProflie/\" + currentUser.Id).subscribe((resultData) => {\n\t\t\t\tthis.huyXuatThuocTrongNgay.NguoiThuHoiId = currentUser.Id;\n\t\t\t\tthis.huyXuatThuocTrongNgay.TenNguoiThuHoi = resultData.HoTen;\n\t\t\t\tthis.huyXuatThuocTrongNgay.ThoiGianThuHoi = new Date();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.huyXuatThuocTrongNgay.NguoiThuHoiId = null;\n\t\t\tthis.huyXuatThuocTrongNgay.TenNguoiThuHoi = null;\n\t\t\tthis.huyXuatThuocTrongNgay.ThoiGianThuHoi = null;\n\t\t}\n\t}\n\n\txacNhanThongTinHuy() {\n\t\tthis.showLoadingPopup();\t\t\n\t\tthis.apiService.post<any>(`QuayThuoc/HuyBanThuocTrongNgay`, this.huyXuatThuocTrongNgay).subscribe(\n\t\t\t(resultData) => {\n\t\t\t\tthis.closeAllDialogs();\n\t\t\t\tthis.dialogRef.close(\"Yes\");\n\t\t\t},\n\t\t\t(err: ApiError) => {\n\t\t\t\terr.ValidationErrors === null || err.ValidationErrors.length == 0 ? \n\t\t\t\t      this.notificationService.showError(err.Message)\n\t\t\t\t\t: (this.validationErrors = err.ValidationErrors);\n\t\t\t\tthis.closeAllDialogs();\n\t\t\t}\n\t\t);\n\t}\n\n\tclose() {\n\t\tthis.dialog.closeAll();\n\t}\n\n\tshowLoadingPopup() {\n\t\tif (!this.loadingPopup) {\n\t\t\tthis.loadingPopup = this.dialog.open(LoadingComponent, {\n\t\t\t\tdisableClose: true,\n\t\t\t\twidth: '200px',\n\t\t\t\theight: '90px',\n\t\t\t\tdata: { Title: 'Đang tải...' }\n\t\t\t});\n\t\t}\n\t}\n\n\tcloseAllDialogs() {\n\t\tif (this.loadingPopup) {\n\t\t\tthis.loadingPopup.close();\n\t\t\tthis.loadingPopup = null;\n\t\t}\n\t}\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9xdWF5LXRodW9jL3hhYy1uaGFuLXBoaWV1LWh1eS10aHUveGFjLW5oYW4tcGhpZXUtaHV5LXRodS5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component, OnInit, Inject} from \"@angular/core\";\nimport icClose from \"@iconify/icons-ic/twotone-close\";\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from \"@angular/material\";\nimport {ApiService} from \"src/app/core/services/api.service\";\nimport {ApiError} from \"src/app/shared/models/api-error.model\";\nimport {NotificationService} from \"src/app/core/services/notification.service\";\nimport {LoadingComponent} from \"src/app/shared/component/dialogs/loading/loading.component\";\nimport {SecurityOperation} from \"src/app/shared/enum/security-operation.enum\";\nimport {DocumentType} from \"src/app/shared/enum/document-type.enum\";\nimport {AuthService} from \"src/app/core/services/auth.service\";\nimport {SystemMessage} from \"src/app/shared/configdata/system-message\";\nimport { ThongTinHuyPhieu } from \"../quay-thuoc.model\";\n\n\n@Component({\n\tselector: \"app-xac-nhan-phieu-huy-thu\",\n\ttemplateUrl: \"./xac-nhan-phieu-huy-thu.component.html\",\n\tstyleUrls: [\"./xac-nhan-phieu-huy-thu.component.scss\"],\n})\nexport class XacNhanHuyThuComponent implements OnInit {\n\tdocumentType: DocumentType = DocumentType.QuayThuoc;\n\tthongTinHuyPhieu = new ThongTinHuyPhieu();\n\tloaiType : any;\n\n\tvalidationErrors: any[];\n\ticClose = icClose;\n\tthuHoiPhieu: boolean = false;\n\tconstructor(@Inject(MAT_DIALOG_DATA) public data: any,private dialogRef: MatDialogRef<any>, private authService: AuthService, private dialog: MatDialog, private notificationService: NotificationService, private apiService: ApiService) {}\n\n\tngOnInit() {\n\t\tthis.thongTinHuyPhieu = this.data.thongTinHuyPhieu;\n\t\tthis.thuHoiPhieu = this.data.thuHoiPhieu;\n\t\tthis.loaiType = this.data.loaiType;\n\n\t\tthis.thongTinHuyPhieu.ThuHoiPhieu = false;\n\t\tif (this.thuHoiPhieu) {\n\t\t\tlet currentUser = this.authService.getAccessUser();\n\t\t\tthis.apiService.get<any>(\"NhanVien/GetNhanVienProflie/\" + currentUser.Id).subscribe((resultData) => {\n\t\t\t\tthis.thongTinHuyPhieu.NguoiThuHoiId = currentUser.Id;\n\t\t\t\tthis.thongTinHuyPhieu.TenNguoiThuHoi = resultData.HoTen;\n\t\t\t\tthis.thongTinHuyPhieu.ThoiGianThuHoi = new Date();\n\t\t\t});\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis.dialog.closeAll();\n\t}\n\n\tmodelChangeThuHoiPhieu(e: any) {\n\t\tif (e) {\n\t\t\tlet currentUser = this.authService.getAccessUser();\n\t\t\tthis.apiService.get<any>(\"NhanVien/GetNhanVienProflie/\" + currentUser.Id).subscribe((resultData) => {\n\t\t\t\tthis.thongTinHuyPhieu.NguoiThuHoiId = currentUser.Id;\n\t\t\t\tthis.thongTinHuyPhieu.TenNguoiThuHoi = resultData.HoTen;\n\t\t\t\tthis.thongTinHuyPhieu.ThoiGianThuHoi = new Date();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.thongTinHuyPhieu.NguoiThuHoiId = null;\n\t\t\tthis.thongTinHuyPhieu.TenNguoiThuHoi = null;\n\t\t\tthis.thongTinHuyPhieu.ThoiGianThuHoi = null;\n\t\t}\n\t}\n\n\txacNhanThongTinHuy() {\n\t\tvar loading = this.dialog.open(LoadingComponent, {\n\t\t\tdisableClose: true,\n\t\t\twidth: \"200px\",\n\t\t\theight: \"90px\",\n\t\t\tdata: {},\n\t\t});\n\t\tif (this.loaiType) {\n\t\t\tif (this.authService.hasPermission(this.documentType, SecurityOperation.Update)) {\n\t\t\t\tif (this.thuHoiPhieu) {\n\t\t\t\t\tthis.apiService.post<any>(\"QuayThuoc/CapnhatNguoiThuHoiPhieuThuThuoc\", this.thongTinHuyPhieu).subscribe(\n\t\t\t\t\t\t(resultData) => {\n\t\t\t\t\t\t\tthis.dialog.closeAll();\n\t\t\t\t\t\t\tthis.dialogRef.close(\"Yes\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err: ApiError) => {\n\t\t\t\t\t\t\terr.ValidationErrors === null || err.ValidationErrors.length == 0 ? this.notificationService.showError(err.Message) : (this.validationErrors = err.ValidationErrors);\n\t\t\t\t\t\t\tloading.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.apiService.post<any>(\"QuayThuoc/HuyPhieuThuThuoc\", this.thongTinHuyPhieu).subscribe(\n\t\t\t\t\t\t(resultData) => {\n\t\t\t\t\t\t\tthis.dialog.closeAll();\n\t\t\t\t\t\t\tthis.dialogRef.close(\"Yes\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err: ApiError) => {\n\t\t\t\t\t\t\terr.ValidationErrors === null || err.ValidationErrors.length == 0 ? this.notificationService.showError(err.Message) : (this.validationErrors = err.ValidationErrors);\n\t\t\t\t\t\t\tloading.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notificationService.showError(SystemMessage.UnAuthorizedMessage);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.authService.hasPermission(this.documentType, SecurityOperation.Update)) {\n\t\t\t\tif (this.thuHoiPhieu) {\n\t\t\t\t\tthis.apiService.post<any>(\"QuayThuoc/CapnhatNguoiThuHoiPhieuThuThuoc\", this.thongTinHuyPhieu).subscribe(\n\t\t\t\t\t\t(resultData) => {\n\t\t\t\t\t\t\tthis.dialog.closeAll();\n\t\t\t\t\t\t\tthis.dialogRef.close(\"Yes\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err: ApiError) => {\n\t\t\t\t\t\t\terr.ValidationErrors === null || err.ValidationErrors.length == 0 ? this.notificationService.showError(err.Message) : (this.validationErrors = err.ValidationErrors);\n\t\t\t\t\t\t\tloading.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.apiService.post<any>(\"QuayThuoc/HuyThanhToan\", this.thongTinHuyPhieu).subscribe(\n\t\t\t\t\t\t(resultData) => {\n\t\t\t\t\t\t\tthis.dialog.closeAll();\n\t\t\t\t\t\t\tthis.dialogRef.close(\"Yes\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err: ApiError) => {\n\t\t\t\t\t\t\terr.ValidationErrors === null || err.ValidationErrors.length == 0 ? this.notificationService.showError(err.Message) : (this.validationErrors = err.ValidationErrors);\n\t\t\t\t\t\t\tloading.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notificationService.showError(SystemMessage.UnAuthorizedMessage);\n\t\t\t}\n\t\t}\n\t}\n}\n"],"sourceRoot":"webpack:///"}